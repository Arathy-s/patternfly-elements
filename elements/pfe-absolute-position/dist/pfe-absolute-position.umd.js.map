{"version":3,"file":"pfe-absolute-position.umd.js","sources":["../_temp/pfe-absolute-position-state-manager.js","../_temp/pfe-absolute-position.umd.js"],"sourcesContent":["/*!\n * PatternFly Elements: PfeAbsolutePosition 1.6.0\n * @license\n * Copyright 2021 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\n// register globally so we can make sure there is only one\nwindow.AbsolutePositionStateManager = window.AbsolutePositionStateManager || {};\n// request if this exists. This helps invoke element existing in dom\n// as well as that there is only one of them. That way we can ensure everything\n// is rendered through same modal\nwindow.AbsolutePositionStateManager.requestAvailability = () => {\n  if (!window.AbsolutePositionStateManager.instance) {\n    window.AbsolutePositionStateManager.instance = document.createElement(\"pfe-absolute-position-state-manager\");\n    let instance = window.AbsolutePositionStateManager.instance;\n    document.body.appendChild(instance);\n  }\n  return window.AbsolutePositionStateManager.instance;\n};\n\n/**\n * `absolute-position-state-manager`\n * manages state of multiple absolute-positioned elements on a page\n *\n * @element absolute-position-state-manager\n */\nclass PfeAbsolutePositionStateManager extends HTMLElement {\n  /**\n   * Store tag name to make it easier to obtain directly.\n   */\n  static get tag() {\n    return \"pfe-absolute-position-state-manager\";\n  }\n\n  /**\n   * Makes sure there is a utility ready and listening for elements.\n   */\n  constructor() {\n    super();\n    this.elements = [];\n    // Track the element that is currently open.\n    this._activeElement = null;\n    this.__timeout = false;\n    this.__observer = new MutationObserver(mutations => this.checkMutations(mutations));\n  }\n\n  /**\n   * Elements can request they be active through this method.\n   * The manager will ensure only one element is active at a time.\n   * The manager will call the _absolutePositionActiveChanged handler on\n   * the currently active element and the new element request it be active.\n   *\n   * @example _absolutePositionActiveChanged(isActive)\n   *\n   * @param {node} element a reference to the element requesting active state\n   * @param {ActivateElementOptions} options\n   * @return {void}\n   */\n  activateElement(element) {\n    // Notify current active element to deactivate\n    if (this._activeElement) {\n      if (typeof this._activeElement._absolutePositionActiveChanged !== \"undefined\") {\n        this._activeElement._absolutePositionActiveChanged(false);\n      }\n    }\n    // Notify the new element to activate\n    if (typeof element._absolutePositionActiveChanged !== \"undefined\") {\n      element._absolutePositionActiveChanged(true);\n    }\n    // updated activeElement state\n    this._activeElement = element;\n  }\n\n  /**\n   * Elements should notify the state manager that they have locally\n   * been deactated so that the manager can update the state. Note that\n   * this violates unidirectional data flow but we don't care because other\n   * elements don't care if others deactivate. It's only on activation state\n   * that others need care about.\n   *\n   * @param {node} element a reference to the element requesting active state\n   * @return {void}\n   */\n  deactivateElement(element) {\n    if (element === this._activeElement) {\n      this._activeElement = null;\n    }\n  }\n\n  /**\n   * Loads element into array\n   * @param {object} element to be added\n   */\n  loadElement(el) {\n    //only have event listeners when there are elements using manager\n    if (this.elements.length < 1) {\n      this.__observer.observe(document, {\n        attributes: true,\n        childList: true,\n        subtree: true,\n        characterData: true\n      });\n      this.updateElements();\n      document.addEventListener(\"load\", this.updateElements);\n      window.addEventListener(\"resize\", this._handleResize);\n    }\n    this.elements.push(el);\n    el.style.top = 0;\n    el.style.left = 0;\n    this.positionElement(el);\n  }\n\n  /**\n   * Unloads element from array\n   * @param {object} element to be removed\n   */\n  unloadElement(el) {\n    this.elements.filter(element => element === el);\n    if (this.elements.length < 1) this.removeEventListeners();\n  }\n\n  /**\n   * handles resize event\n   */\n  _handleResize() {\n    if (this.__timeout) clearTimeout(this.__timeout);\n    this.__timeout = setTimeout(window.AbsolutePositionStateManager.instance.updateElements(), 250);\n  }\n\n  /**\n   * Checks if there are any chances other than to\n   * element's position and updates accordioning.\n   * This is needed so that positioning elements\n   * doesn't trigger an infinite loop of updates.\n   *\n   * @param {array} mutation records\n   * @return {void}\n   */\n  checkMutations(mutations) {\n    let update = false;\n\n    mutations.forEach(mutation => {\n      if (update) return;\n      update = update;\n      !(\n        mutation.type === \"attributes\" &&\n        // We need to ignore any changes that the pfe-absolute-position\n        // element is making on the target to prevent an infinite loop.\n        // In this case we need to ignore role and tabindex.\n        // @todo this should be abstracted into an options argument.\n        mutation.attributeName !== \"role\" &&\n        mutation.attributeName !== \"tabindex\" &&\n        mutation.attributeName !== \"aria-label\" &&\n        mutation.attributeName !== \"aria-describedby\" &&\n        mutation.attributeName !== \"aria-expanded\" &&\n        mutation.attributeName !== \"aria-hidden\" &&\n        mutation.attributeName !== \"style\" &&\n        this.elements.includes(mutation.target)\n      );\n    });\n    if (update) this.updateElements();\n  }\n\n  /**\n   * Returns target element that this element is anchored to. It is\n   * either element given by `for` attribute, or immediate parent\n   * of element.\n   *\n   * Uses `target` object if specified.\n   * If not, queries document for elements with id specified in `for` attribute.\n   * If there is more than one element that matches, gets closest matching element.\n   *\n   * @param {object} element using pfe-absolute-position behavior\n   * @return {object} target element for positioning\n   */\n  findTarget(el) {\n    let selector = \"#\" + el.for,\n      target = el.target,\n      ancestor = el;\n\n    while (!!el.for && !target && !!ancestor && !!ancestor.parentNode && ancestor !== document) {\n      ancestor = ancestor.parentNode;\n      target = ancestor ? ancestor.querySelector(selector) : undefined;\n      if (ancestor.nodeType === 11) ancestor = ancestor.host;\n      target = !target && ancestor ? ancestor.querySelector(selector) : target;\n    }\n\n    // Hook to notify element that its target has been updated.\n    if (typeof el.targetUpdated == \"function\") el.targetUpdated(target);\n    return target;\n  }\n\n  /**\n   * Removes event listeners\n   * Centrally manage the event listeners\n   * @return {void}\n   */\n  removeEventListeners() {\n    if (this.__observer && this.__observer.disconnect) this.__observer.disconnect();\n    document.removeEventListener(\"load\", this.updateElements);\n    window.removeEventListener(\"resize\", this._handleResize);\n  }\n\n  /**\n   * Updates position for all elements on page.\n   * @return {void}\n   */\n  updateElements() {\n    this.elements.forEach(element => this.positionElement(element));\n  }\n\n  _getParentNode(node) {\n    let parent = node.parentNode;\n    if (parent !== undefined && parent !== null && parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      parent = parent.host;\n    }\n    return parent;\n  }\n\n  /**\n   * Gets an updated position based on target.\n   * @param {object} element using absolute-position behavior\n   * @return {void}\n   */\n  positionElement(el) {\n    if (!el.position) {\n      el.position = \"bottom\";\n    }\n    let target = this.findTarget(el),\n      parent = el.offsetParent;\n    if (!target || !parent) return;\n    let offset = parseFloat(el.offset),\n      w = document.body.getBoundingClientRect(),\n      p = parent.getBoundingClientRect(),\n      t = target.getBoundingClientRect(),\n      e = el.getBoundingClientRect(),\n      //place element before vertically?\n      vertical = (pos = el.position) => pos !== \"left\" && pos !== \"right\",\n      //place element before target?\n      before = (pos = el.position) => pos === \"left\" || pos === \"top\",\n      /**\n       * aligns horizontally if position is vertical\n       * or aligns vertically if position is horizontal\n       */\n      setAlign = (v = vertical(el.position)) => {\n        //fits element within parent's boundaries\n        let pxToNum = px => parseFloat(px.replace(\"px\", \"\")),\n          min = v ? pxToNum(el.style.left) - e.left : pxToNum(el.style.top) - e.top,\n          startAt = v ? \"left\" : \"top\",\n          distance = rect => (v ? rect.width : rect.height),\n          max = min + distance(w) - distance(e),\n          align = min;\n        if (el.positionAlign === \"end\") {\n          align += t[startAt] - distance(e) + distance(t);\n        } else if (el.positionAlign === \"start\") {\n          align += t[startAt];\n        } else {\n          align += t[startAt] - distance(e) / 2 + distance(t) / 2;\n        }\n        return el.fitToVisibleBounds ? Math.max(min, Math.min(max, align)) + \"px\" : align + \"px\"; //if element size > parent, align where parent begins\n      },\n      getCoord = (pos = el.position) => {\n        let pxToNum = px => parseFloat(px.replace(\"px\", \"\")),\n          adjust = vertical(pos) ? pxToNum(el.style.top) - e.top : pxToNum(el.style.left) - e.left,\n          eh =\n            window.getComputedStyle(el, null).overflowY == \"visible\" ? Math.max(e.height, el.scrollHeight) : e.height,\n          ew = window.getComputedStyle(el, null).overflowX == \"visible\" ? Math.max(e.width, el.scrollWidth) : e.width;\n        return pos === \"top\"\n          ? t.top + adjust - eh - offset + \"px\"\n          : pos === \"left\"\n          ? t.left + adjust - ew - offset + \"px\"\n          : t[pos] + adjust + offset + \"px\";\n      },\n      isFit = (pos = el.position) => {\n        //determines if room for element between parent and target\n        let distance = rect => (vertical(pos) ? e.height + offset : e.width + offset);\n        return before(pos) ? t[pos] - w[pos] > distance : w[pos] - t[pos] > distance; //if no room, return original position\n      },\n      flip = el.fitToVisibleBounds !== false && !isFit(el.position),\n      flipData = {\n        top: [\"bottom\", \"left\", \"right\"],\n        left: [\"right\", \"top\", \"bottom\"],\n        bottom: [\"top\", \"right\", \"left\"],\n        right: [\"left\", \"bottom\", \"top\"]\n      };\n    el.style.position = \"absolute\";\n    /*\n     * fits element according to specified postion,\n     * or finds an alternative position that fits\n     */\n    if (flip && isFit(flipData[el.position][0])) {\n      el.position = flipData[el.position][0];\n    } else if (flip && isFit(flipData[el.position][1])) {\n      el.position = flipData[el.position][1];\n    } else if (flip && isFit(flipData[el.position][2])) {\n      el.position = flipData[el.position][2];\n    } else {\n      el.style.top = vertical(el.position) ? getCoord() : setAlign();\n      el.style.left = vertical(el.position) ? setAlign() : getCoord();\n      //provide positions for element and target (in case furthor positioning adjustments are needed)\n      el.__positions = {\n        self: e,\n        parent: p,\n        target: t\n      };\n    }\n  }\n\n  /**\n   * life cycle, element is removed from DOM\n   */\n  disconnectedCallback() {\n    this.removeEventListeners();\n    super.disconnectedCallback();\n  }\n}\n\nwindow.customElements.define(PfeAbsolutePositionStateManager.tag, PfeAbsolutePositionStateManager);\n\nexport default PfeAbsolutePositionStateManager;\n","/*!\n * PatternFly Elements: PfeAbsolutePosition 1.6.0\n * @license\n * Copyright 2021 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\n/**\n * This is heavily inspired by LRN Web Component's absolute-position-behaviors element\n * https://github.com/elmsln/lrnwebcomponents/tree/master/elements/absolute-position-behavior\n */\n\nimport PFElement from \"../../pfelement/dist/pfelement\";\nimport \"./pfe-absolute-position-state-manager.js\";\n\nclass PfeAbsolutePosition extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.6.0\";\n  }\n\n  // Injected at build-time\n  get html() {\n    return `\n<style>:host{display:block;position:absolute;z-index:99999}:host([hidden]){display:none}@-webkit-keyframes keyFrameScaleUp{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes keyFrameScaleUp{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes keyFrameScaleDown{0%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0);transform:scale(0)}}@keyframes keyFrameScaleDown{0%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0);transform:scale(0)}}@-webkit-keyframes keyFrameFadeInOpacity{0%{opacity:0}100%{opacity:1;opacity:var(--simple-tooltip-opacity,1)}}@keyframes keyFrameFadeInOpacity{0%{opacity:0}100%{opacity:1;opacity:var(--simple-tooltip-opacity,1)}}@-webkit-keyframes keyFrameFadeOutOpacity{0%{opacity:1;opacity:var(--simple-tooltip-opacity,1)}100%{opacity:0}}@keyframes keyFrameFadeOutOpacity{0%{opacity:1;opacity:var(--simple-tooltip-opacity,1)}100%{opacity:0}}@-webkit-keyframes keyFrameSlideDownIn{0%{-webkit-transform:translateY(-2000px);transform:translateY(-2000px);opacity:0}10%{opacity:.2}100%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;opacity:var(--simple-tooltip-opacity,1)}}@keyframes keyFrameSlideDownIn{0%{-webkit-transform:translateY(-2000px);transform:translateY(-2000px);opacity:0}10%{opacity:.2}100%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;opacity:var(--simple-tooltip-opacity,1)}}@-webkit-keyframes keyFrameSlideDownOut{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;opacity:var(--simple-tooltip-opacity,1)}10%{opacity:.2}100%{-webkit-transform:translateY(-2000px);transform:translateY(-2000px);opacity:0}}@keyframes keyFrameSlideDownOut{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;opacity:var(--simple-tooltip-opacity,1)}10%{opacity:.2}100%{-webkit-transform:translateY(-2000px);transform:translateY(-2000px);opacity:0}}.fade-in-animation{opacity:0;-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-delay:var(--simple-tooltip-delay-in,0ms);animation-delay:var(--simple-tooltip-delay-in,0ms);-webkit-animation-name:keyFrameFadeInOpacity;animation-name:keyFrameFadeInOpacity;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-duration:.1s;animation-duration:.1s;-webkit-animation-duration:var(--simple-tooltip-duration-in,100ms);animation-duration:var(--simple-tooltip-duration-in,100ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.fade-out-animation{opacity:1;opacity:var(--simple-tooltip-opacity,1);-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-delay:var(--simple-tooltip-delay-out,0ms);animation-delay:var(--simple-tooltip-delay-out,0ms);-webkit-animation-name:keyFrameFadeOutOpacity;animation-name:keyFrameFadeOutOpacity;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-duration:.1s;animation-duration:.1s;-webkit-animation-duration:var(--simple-tooltip-duration-out,100ms);animation-duration:var(--simple-tooltip-duration-out,100ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.scale-up-animation{-webkit-transform:scale(0);transform:scale(0);opacity:1;opacity:var(--simple-tooltip-opacity,1);-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-delay:var(--simple-tooltip-delay-in,500ms);animation-delay:var(--simple-tooltip-delay-in,500ms);-webkit-animation-name:keyFrameScaleUp;animation-name:keyFrameScaleUp;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-duration:var(--simple-tooltip-duration-in,500ms);animation-duration:var(--simple-tooltip-duration-in,500ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.scale-down-animation{-webkit-transform:scale(1);transform:scale(1);opacity:1;opacity:var(--simple-tooltip-opacity,1);-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-delay:var(--simple-tooltip-delay-out,500ms);animation-delay:var(--simple-tooltip-delay-out,500ms);-webkit-animation-name:keyFrameScaleDown;animation-name:keyFrameScaleDown;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-duration:var(--simple-tooltip-duration-out,500ms);animation-duration:var(--simple-tooltip-duration-out,500ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.slide-down-animation{-webkit-transform:translateY(-2000px);transform:translateY(-2000px);opacity:0;-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-delay:var(--simple-tooltip-delay-out,500ms);animation-delay:var(--simple-tooltip-delay-out,500ms);-webkit-animation-name:keyFrameSlideDownIn;animation-name:keyFrameSlideDownIn;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1);-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-duration:var(--simple-tooltip-duration-out,500ms);animation-duration:var(--simple-tooltip-duration-out,500ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.slide-down-animation-out{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;opacity:var(--simple-tooltip-opacity,1);-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-delay:var(--simple-tooltip-delay-out,500ms);animation-delay:var(--simple-tooltip-delay-out,500ms);-webkit-animation-name:keyFrameSlideDownOut;animation-name:keyFrameSlideDownOut;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:cubic-bezier(.4,0,1,1);animation-timing-function:cubic-bezier(.4,0,1,1);-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-duration:var(--simple-tooltip-duration-out,500ms);animation-duration:var(--simple-tooltip-duration-out,500ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.cancel-animation{-webkit-animation-delay:-30s!important;animation-delay:-30s!important}.hidden{display:none!important} /*# sourceMappingURL=pfe-absolute-position.min.css.map */</style>\n<slot></slot>`;\n  }\n\n  static get tag() {\n    return \"pfe-absolute-position\";\n  }\n\n  static get meta() {\n    return {\n      title: \"Absolute position\",\n      description: \"Make any element absolute positioned over another element.\"\n    };\n  }\n\n  get templateUrl() {\n    return \"pfe-absolute-position.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-absolute-position.scss\";\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Element is positioned from connected to disconnected?\n       * Otherwise setPosition and unsetPosition must be called manually.\n       */\n      auto: {\n        type: Boolean,\n        default: false,\n        observer: \"_autoChanged\"\n      },\n      /**\n       * If true, no parts of the tooltip will ever be shown offscreen.\n       */\n      fitToVisibleBounds: {\n        type: Boolean,\n        default: false,\n        observer: \"updatePosition\"\n      },\n      /**\n       * If true, no parts of the tooltip will ever be shown offscreen.\n       */\n      hidden: {\n        type: Boolean,\n        reflect: true,\n        observer: \"updatePosition\"\n      },\n      /**\n       * The id of the element that the tooltip is anchored to. This element\n       * must be a sibling of the tooltip. If this property is not set,\n       * then the tooltip will be centered to the parent node containing it.\n       */\n      for: {\n        type: String,\n        reflect: true,\n        default: null,\n        observer: \"updatePosition\"\n      },\n      /**\n       * The spacing between the top of the tooltip and the element it is\n       * anchored to.\n       */\n      offset: {\n        type: Number,\n        default: 0,\n        observer: \"updatePosition\"\n      },\n      /**\n       * Positions the tooltip to the top, right, bottom, left of its content.\n       */\n      position: {\n        type: String,\n        reflect: true,\n        default: \"top\",\n        observer: \"updatePosition\"\n      },\n      /**\n       * Aligns at the start, or end fo target. Default is centered.\n       */\n      positionAlign: {\n        type: String,\n        reflect: true,\n        default: \"center\",\n        observer: \"updatePosition\"\n      },\n      /**\n       * Set the mode to either hover or click\n       */\n      mode: {\n        type: String,\n        default: \"hover\",\n        observer: \"updatePosition\"\n      }\n    };\n  }\n\n  /**\n   * Get the actual target element\n   * @type {Node}\n   */\n  get target() {\n    return this._target;\n  }\n\n  /**\n   * Set the actual target element\n   * @type {Node}\n   */\n  set target(node) {\n    this._target = node;\n    return this._target;\n  }\n\n  /**\n   * Get the actual target element\n   * @type {Object}\n   */\n  get _positions() {\n    return this._target;\n  }\n\n  /**\n   * Set the actual target element\n   * @type {Object}\n   */\n  set _positions(positions) {\n    this.__positions = positions;\n    return this.__positions;\n  }\n\n  // Declare the type of this component\n  static get PfeType() {\n    return PFElement.PfeTypes.Container;\n  }\n\n  constructor() {\n    super(PfeAbsolutePosition, { type: PfeAbsolutePosition.PfeType });\n    this._positions = {};\n    this.target = null;\n    this.__observe = false;\n    this.__manager = window.AbsolutePositionStateManager.requestAvailability();\n\n    this.animationEntry = \"\";\n    this.animationExit = \"\";\n    this.animationConfig = {\n      entry: [{ name: \"fade-in-animation\", node: this, timing: { delay: 0 } }],\n      exit: [{ name: \"fade-out-animation\", node: this }]\n    };\n    setTimeout(() => {\n      this.addEventListener(\"webkitAnimationEnd\", this._onAnimationEnd.bind(this));\n    }, 0);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // initialize set position immediately in auto changed\n    this._autoChanged(null, this.auto);\n  }\n\n  // auto property change handler\n  _autoChanged(oldValue, newValue) {\n    // if the component is set to auto then we are going to handle setting the\n    // position for the user.\n    if (this.auto) this.setPosition();\n    // if the user explicitly turned off auto then we'll unset position for them.\n    if (oldValue === true && this.auto) {\n      if (!this.auto) this.unsetPosition();\n    }\n  }\n\n  /**\n   * Target Updated Hook\n   *\n   * Called when a target element is found.\n   * @param {Node} target\n   */\n  targetUpdated(target) {\n    this._target = target;\n    this._addListeners();\n  }\n\n  /**\n   * Registers element with AbsolutePositionStateManager\n   * @returns {void}\n   */\n  setPosition() {\n    this.__observe = true;\n    this.__manager.loadElement(this);\n  }\n\n  /**\n   * Unregisters element with AbsolutePositionStateManager\n   * @returns {void}\n   */\n  unsetPosition() {\n    this.__observe = false;\n    this.__manager.unloadElement(this);\n  }\n\n  /**\n   * Updates  element's position\n   * @returns {void}\n   */\n  updatePosition() {\n    if (this.__observe === true) {\n      this.__manager.positionElement(this);\n    }\n  }\n  /**\n   * life cycle, element is removed from DOM\n   * @returns {void}\n   */\n  disconnectedCallback() {\n    this.unsetPosition();\n    this._removeListeners();\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Cancels the animation and either fully shows or fully hides tooltip\n   */\n  cancelAnimation() {\n    // Short-cut and cancel all animations and hide\n    this.shadowRoot.querySelector(\"#tooltip\").classList.add(\"cancel-animation\");\n  }\n\n  // Hook into absolute state manager to see if we\n  // have been activated or deactivated\n  _absolutePositionActiveChanged(isActive) {\n    isActive ? this._show() : this.hide();\n  }\n\n  /**\n   * Shows the tooltip programatically\n   * @return {void}\n   */\n  show() {\n    this.__manager.activateElement(this);\n  }\n\n  _show() {\n    // If the tooltip is already showing, there's nothing to do.\n    if (this._showing) return;\n    this._showing = true;\n    this.shadowRoot.querySelector(\"#tooltip\").classList.remove(\"hidden\");\n    this.shadowRoot.querySelector(\"#tooltip\").classList.remove(\"cancel-animation\");\n    this.shadowRoot.querySelector(\"#tooltip\").classList.remove(this._getAnimationType(\"exit\"));\n    this.updatePosition();\n    this._animationPlaying = true;\n    this.shadowRoot.querySelector(\"#tooltip\").classList.add(this._getAnimationType(\"entry\"));\n  }\n\n  /**\n   * Hides the tooltip programatically\n   * @return {void}\n   */\n  hide() {\n    // If the tooltip is already hidden, there's nothing to do.\n    if (!this._showing) {\n      return;\n    }\n\n    // If the entry animation is still playing, don't try to play the exit\n    // animation since this will reset the opacity to 1. Just end the animation.\n    if (this._animationPlaying) {\n      this._showing = false;\n      this._cancelAnimation();\n      return;\n    } else {\n      // Play Exit Animation\n      this._onAnimationFinish();\n    }\n    this._animationPlaying = true;\n    this._showing = false;\n    // Let the manager know that to remove us from its activeElement state.\n    this.__manager.deactivateElement(this);\n    // force hide if we are open too long\n    // helps older platforms and the monster known as Safari\n    clearTimeout(this.__debounceCancel);\n    this.__debounceCancel = setTimeout(() => {\n      this._cancelAnimation();\n    }, 5000);\n  }\n\n  /**\n   * Toggle the visibility of the tooltip programatically\n   * @return {void}\n   */\n  toggle() {\n    if (!this._showing || typeof this._showing === \"undefined\") {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n\n  _manualModeChanged() {\n    if (this.manualMode) this._removeListeners();\n    else this._addListeners();\n  }\n\n  _cancelAnimation() {\n    // Short-cut and cancel all animations and hide\n    this.shadowRoot.querySelector(\"#tooltip\").classList.remove(this._getAnimationType(\"entry\"));\n    this.shadowRoot.querySelector(\"#tooltip\").classList.remove(this._getAnimationType(\"exit\"));\n    this.shadowRoot.querySelector(\"#tooltip\").classList.remove(\"cancel-animation\");\n    this.shadowRoot.querySelector(\"#tooltip\").classList.add(\"hidden\");\n  }\n\n  _onAnimationFinish() {\n    if (this._showing) {\n      this.shadowRoot.querySelector(\"#tooltip\").classList.remove(this._getAnimationType(\"entry\"));\n      this.shadowRoot.querySelector(\"#tooltip\").classList.remove(\"cancel-animation\");\n      this.shadowRoot.querySelector(\"#tooltip\").classList.add(this._getAnimationType(\"exit\"));\n    }\n  }\n\n  _onAnimationEnd() {\n    // If no longer showing add class hidden to completely hide tooltip\n    this._animationPlaying = false;\n    if (!this._showing) {\n      this.shadowRoot.querySelector(\"#tooltip\").classList.remove(this._getAnimationType(\"exit\"));\n      this.shadowRoot.querySelector(\"#tooltip\").classList.add(\"hidden\");\n    }\n  }\n\n  _getAnimationType(type) {\n    // These properties have priority over animationConfig values\n    if (type === \"entry\" && this.animationEntry !== \"\") {\n      return this.animationEntry;\n    }\n    if (type === \"exit\" && this.animationExit !== \"\") {\n      return this.animationExit;\n    }\n    // If no results then return the legacy value from animationConfig\n    if (this.animationConfig[type] && typeof this.animationConfig[type][0].name === \"string\") {\n      // Checking Timing and Update if necessary - Legacy for animationConfig\n      if (\n        this.animationConfig[type][0].timing &&\n        this.animationConfig[type][0].timing.delay &&\n        this.animationConfig[type][0].timing.delay !== 0\n      ) {\n        var timingDelay = this.animationConfig[type][0].timing.delay;\n        // Has Timing Change - Update CSS\n        if (type === \"entry\") {\n          document.documentElement.style.setProperty(\"--simple-tooltip-delay-in\", timingDelay + \"ms\");\n        } else if (type === \"exit\") {\n          document.documentElement.style.setProperty(\"--simple-tooltip-delay-out\", timingDelay + \"ms\");\n        }\n      }\n      return this.animationConfig[type][0].name;\n    }\n  }\n\n  _addListeners() {\n    if (this.target) {\n      if (this.mode === \"hover\") {\n        this.target.addEventListener(\"mouseenter\", this.show.bind(this));\n        this.target.addEventListener(\"focus\", this.show.bind(this));\n        this.target.addEventListener(\"mouseleave\", this.hide.bind(this));\n        this.target.addEventListener(\"blur\", this.hide.bind(this));\n        this.target.addEventListener(\"tap\", this.hide.bind(this));\n      }\n      if (this.mode === \"click\") {\n        this.target.addEventListener(\"keydown\", this._keydownHandler.bind(this));\n        this.target.addEventListener(\"click\", this.show.bind(this));\n        this.target.addEventListener(\"tap\", this.show.bind(this));\n      }\n    }\n  }\n\n  _removeListeners() {\n    if (this.target) {\n      if (this.mode === \"hover\") {\n        this.target.removeEventListener(\"mouseenter\", this.show.bind(this));\n        this.target.removeEventListener(\"focus\", this.show.bind(this));\n        this.target.removeEventListener(\"mouseleave\", this.hide.bind(this));\n        this.target.removeEventListener(\"blur\", this.hide.bind(this));\n        this.target.removeEventListener(\"tap\", this.hide.bind(this));\n      }\n      if (this.mode === \"click\") {\n        this.target.removeEventListener(\"click\", this.toggle.bind(this));\n        this.target.removeEventListener(\"keydown\", this._keydownHandler.bind(this));\n        this.target.removeEventListener(\"tap\", this.hide.bind(this));\n      }\n    }\n  }\n\n  // Listen for keyboard events and map them to their\n  // corresponding mouse events.\n  _keydownHandler(event) {\n    let key = event.key || event.keyCode;\n    switch (key) {\n      case \"Enter\" || 13:\n        this.show();\n        break;\n      case \" \" || 32:\n        // Prevent the browser from scolling when the user hits the space key\n        this.show();\n        event.stopPropagation();\n        event.preventDefault();\n        break;\n    }\n  }\n\n  _delayChange(newValue) {\n    // Only Update delay if different value set\n    if (newValue !== 500) {\n      document.documentElement.style.setProperty(\"--simple-tooltip-delay-in\", newValue + \"ms\");\n    }\n  }\n}\n\nPFElement.create(PfeAbsolutePosition);\n\nexport default PfeAbsolutePosition;\n"],"names":["window","AbsolutePositionStateManager","requestAvailability","instance","document","createElement","body","appendChild","PfeAbsolutePositionStateManager","elements","_activeElement","__timeout","__observer","MutationObserver","checkMutations","mutations","element","_absolutePositionActiveChanged","el","length","observe","attributes","childList","subtree","characterData","updateElements","addEventListener","_handleResize","push","style","top","left","positionElement","filter","removeEventListeners","clearTimeout","setTimeout","update","forEach","mutation","type","attributeName","includes","target","selector","for","ancestor","parentNode","querySelector","undefined","nodeType","host","targetUpdated","disconnect","removeEventListener","node","parent","Node","DOCUMENT_FRAGMENT_NODE","position","findTarget","offsetParent","offset","parseFloat","w","getBoundingClientRect","p","t","e","vertical","pos","before","setAlign","v","pxToNum","px","replace","min","startAt","distance","rect","width","height","max","align","positionAlign","fitToVisibleBounds","Math","getCoord","adjust","eh","getComputedStyle","overflowY","scrollHeight","ew","overflowX","scrollWidth","isFit","flip","flipData","bottom","right","__positions","self","HTMLElement","customElements","define","tag","PfeAbsolutePosition","_target","positions","title","description","auto","Boolean","default","observer","hidden","reflect","String","Number","mode","PFElement","PfeTypes","Container","PfeType","_positions","__observe","__manager","animationEntry","animationExit","animationConfig","entry","name","timing","delay","exit","_onAnimationEnd","bind","_autoChanged","oldValue","newValue","setPosition","unsetPosition","_addListeners","loadElement","unloadElement","_removeListeners","shadowRoot","classList","add","isActive","_show","hide","activateElement","_showing","remove","_getAnimationType","updatePosition","_animationPlaying","_cancelAnimation","_onAnimationFinish","deactivateElement","__debounceCancel","show","manualMode","timingDelay","documentElement","setProperty","_keydownHandler","toggle","event","key","keyCode","stopPropagation","preventDefault","create"],"mappings":"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"}