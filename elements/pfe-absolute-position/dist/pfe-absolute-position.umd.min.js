!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("../../pfelement/dist/pfelement.umd.min")):"function"==typeof define&&define.amd?define(["../../pfelement/dist/pfelement.umd.min"],e):(t=t||self).PfeAbsolutePosition=e(t.PFElement)}(this,function(t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0!==n){if("value"in n)return n.value;n=n.get;return void 0!==n?n.call(i):void 0}if(null!==(t=Object.getPrototypeOf(t)))return o(t,e,i)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};window.AbsolutePositionStateManager=window.AbsolutePositionStateManager||{},window.AbsolutePositionStateManager.requestAvailability=function(){var t;return window.AbsolutePositionStateManager.instance||(window.AbsolutePositionStateManager.instance=document.createElement("pfe-absolute-position-state-manager"),t=window.AbsolutePositionStateManager.instance,document.body.appendChild(t)),window.AbsolutePositionStateManager.instance};var r,r=(r=HTMLElement,a(l,r),e(l,null,[{key:"tag",get:function(){return"pfe-absolute-position-state-manager"}}]),e(l,[{key:"activateElement",value:function(t){this._activeElement&&void 0!==this._activeElement._absolutePositionActiveChanged&&this._activeElement._absolutePositionActiveChanged(!1),void 0!==t._absolutePositionActiveChanged&&t._absolutePositionActiveChanged(!0),this._activeElement=t}},{key:"deactivateElement",value:function(t){t===this._activeElement&&(this._activeElement=null)}},{key:"loadElement",value:function(t){this.elements.length<1&&(this.__observer.observe(document,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),this.updateElements(),document.addEventListener("load",this.updateElements),window.addEventListener("resize",this._handleResize)),this.elements.push(t),t.style.top=0,t.style.left=0,this.positionElement(t)}},{key:"unloadElement",value:function(e){this.elements.filter(function(t){return t===e}),this.elements.length<1&&this.removeEventListeners()}},{key:"_handleResize",value:function(){this.__timeout&&clearTimeout(this.__timeout),this.__timeout=setTimeout(window.AbsolutePositionStateManager.instance.updateElements(),250)}},{key:"checkMutations",value:function(t){var e=this;t.forEach(function(t){"attributes"!==t.type||"role"===t.attributeName||"tabindex"===t.attributeName||"aria-label"===t.attributeName||"aria-describedby"===t.attributeName||"aria-expanded"===t.attributeName||"aria-hidden"===t.attributeName||"style"===t.attributeName||e.elements.includes(t.target)})}},{key:"findTarget",value:function(t){for(var e="#"+t.for,i=t.target,n=t;t.for&&!i&&n&&n.parentNode&&n!==document;)i=(n=n.parentNode)?n.querySelector(e):void 0,11===n.nodeType&&(n=n.host),i=!i&&n?n.querySelector(e):i;return"function"==typeof t.targetUpdated&&t.targetUpdated(i),i}},{key:"removeEventListeners",value:function(){this.__observer&&this.__observer.disconnect&&this.__observer.disconnect(),document.removeEventListener("load",this.updateElements),window.removeEventListener("resize",this._handleResize)}},{key:"updateElements",value:function(){var e=this;this.elements.forEach(function(t){return e.positionElement(t)})}},{key:"_getParentNode",value:function(t){t=t.parentNode;return t=null!=t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.host:t}},{key:"positionElement",value:function(s){s.position||(s.position="bottom");var o,r,t,l,m,u,e,i,n,a=this.findTarget(s),d=s.offsetParent;a&&d&&(o=parseFloat(s.offset),r=document.body.getBoundingClientRect(),t=d.getBoundingClientRect(),l=a.getBoundingClientRect(),m=s.getBoundingClientRect(),u=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.position;return"left"!==t&&"right"!==t},e=function(){function t(t){return e?t.width:t.height}var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:u(s.position),i=function(t){return parseFloat(t.replace("px",""))},n=e?i(s.style.left)-m.left:i(s.style.top)-m.top,o=e?"left":"top",a=n+t(r)-t(m),i=n;return"end"===s.positionAlign?i+=l[o]-t(m)+t(l):"start"===s.positionAlign?i+=l[o]:i+=l[o]-t(m)/2+t(l)/2,s.fitToVisibleBounds?Math.max(n,Math.min(a,i))+"px":i+"px"},i=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.position,e=function(t){return parseFloat(t.replace("px",""))},i=u(t)?e(s.style.top)-m.top:e(s.style.left)-m.left,n="visible"==window.getComputedStyle(s,null).overflowY?Math.max(m.height,s.scrollHeight):m.height,e="visible"==window.getComputedStyle(s,null).overflowX?Math.max(m.width,s.scrollWidth):m.width;return"top"===t?l.top+i-n-o+"px":"left"===t?l.left+i-e-o+"px":l[t]+i+o+"px"},d=!(n=function(){function t(t){return u(e)?m.height+o:m.width+o}var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.position;return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.position;return"left"===t||"top"===t}(e)?l[e]-r[e]>t:r[e]-l[e]>t})!==s.fitToVisibleBounds&&!n(s.position),a={top:["bottom","left","right"],left:["right","top","bottom"],bottom:["top","right","left"],right:["left","bottom","top"]},s.style.position="absolute",d&&n(a[s.position][0])?s.position=a[s.position][0]:d&&n(a[s.position][1])?s.position=a[s.position][1]:d&&n(a[s.position][2])?s.position=a[s.position][2]:(s.style.top=(u(s.position)?i:e)(),s.style.left=(u(s.position)?e:i)(),s.__positions={self:m,parent:t,target:l}))}},{key:"disconnectedCallback",value:function(){this.removeEventListeners(),o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"disconnectedCallback",this).call(this)}}]),l);function l(){i(this,l);var e=s(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return e.elements=[],e._activeElement=null,e.__timeout=!1,e.__observer=new MutationObserver(function(t){return e.checkMutations(t)}),e}window.customElements.define(r.tag,r);a(m,t),e(m,[{key:"html",get:function(){return"\n<style>:host{display:block;position:absolute;z-index:99999}:host([hidden]){display:none}@-webkit-keyframes keyFrameScaleUp{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes keyFrameScaleUp{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes keyFrameScaleDown{0%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0);transform:scale(0)}}@keyframes keyFrameScaleDown{0%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0);transform:scale(0)}}@-webkit-keyframes keyFrameFadeInOpacity{0%{opacity:0}100%{opacity:1;opacity:var(--simple-tooltip-opacity,1)}}@keyframes keyFrameFadeInOpacity{0%{opacity:0}100%{opacity:1;opacity:var(--simple-tooltip-opacity,1)}}@-webkit-keyframes keyFrameFadeOutOpacity{0%{opacity:1;opacity:var(--simple-tooltip-opacity,1)}100%{opacity:0}}@keyframes keyFrameFadeOutOpacity{0%{opacity:1;opacity:var(--simple-tooltip-opacity,1)}100%{opacity:0}}@-webkit-keyframes keyFrameSlideDownIn{0%{-webkit-transform:translateY(-2000px);transform:translateY(-2000px);opacity:0}10%{opacity:.2}100%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;opacity:var(--simple-tooltip-opacity,1)}}@keyframes keyFrameSlideDownIn{0%{-webkit-transform:translateY(-2000px);transform:translateY(-2000px);opacity:0}10%{opacity:.2}100%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;opacity:var(--simple-tooltip-opacity,1)}}@-webkit-keyframes keyFrameSlideDownOut{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;opacity:var(--simple-tooltip-opacity,1)}10%{opacity:.2}100%{-webkit-transform:translateY(-2000px);transform:translateY(-2000px);opacity:0}}@keyframes keyFrameSlideDownOut{0%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;opacity:var(--simple-tooltip-opacity,1)}10%{opacity:.2}100%{-webkit-transform:translateY(-2000px);transform:translateY(-2000px);opacity:0}}.fade-in-animation{opacity:0;-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-delay:var(--simple-tooltip-delay-in,0ms);animation-delay:var(--simple-tooltip-delay-in,0ms);-webkit-animation-name:keyFrameFadeInOpacity;animation-name:keyFrameFadeInOpacity;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-duration:.1s;animation-duration:.1s;-webkit-animation-duration:var(--simple-tooltip-duration-in,100ms);animation-duration:var(--simple-tooltip-duration-in,100ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.fade-out-animation{opacity:1;opacity:var(--simple-tooltip-opacity,1);-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-delay:var(--simple-tooltip-delay-out,0ms);animation-delay:var(--simple-tooltip-delay-out,0ms);-webkit-animation-name:keyFrameFadeOutOpacity;animation-name:keyFrameFadeOutOpacity;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-duration:.1s;animation-duration:.1s;-webkit-animation-duration:var(--simple-tooltip-duration-out,100ms);animation-duration:var(--simple-tooltip-duration-out,100ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.scale-up-animation{-webkit-transform:scale(0);transform:scale(0);opacity:1;opacity:var(--simple-tooltip-opacity,1);-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-delay:var(--simple-tooltip-delay-in,500ms);animation-delay:var(--simple-tooltip-delay-in,500ms);-webkit-animation-name:keyFrameScaleUp;animation-name:keyFrameScaleUp;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-duration:var(--simple-tooltip-duration-in,500ms);animation-duration:var(--simple-tooltip-duration-in,500ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.scale-down-animation{-webkit-transform:scale(1);transform:scale(1);opacity:1;opacity:var(--simple-tooltip-opacity,1);-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-delay:var(--simple-tooltip-delay-out,500ms);animation-delay:var(--simple-tooltip-delay-out,500ms);-webkit-animation-name:keyFrameScaleDown;animation-name:keyFrameScaleDown;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-duration:var(--simple-tooltip-duration-out,500ms);animation-duration:var(--simple-tooltip-duration-out,500ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.slide-down-animation{-webkit-transform:translateY(-2000px);transform:translateY(-2000px);opacity:0;-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-delay:var(--simple-tooltip-delay-out,500ms);animation-delay:var(--simple-tooltip-delay-out,500ms);-webkit-animation-name:keyFrameSlideDownIn;animation-name:keyFrameSlideDownIn;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1);-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-duration:var(--simple-tooltip-duration-out,500ms);animation-duration:var(--simple-tooltip-duration-out,500ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.slide-down-animation-out{-webkit-transform:translateY(0);transform:translateY(0);opacity:1;opacity:var(--simple-tooltip-opacity,1);-webkit-animation-delay:.5s;animation-delay:.5s;-webkit-animation-delay:var(--simple-tooltip-delay-out,500ms);animation-delay:var(--simple-tooltip-delay-out,500ms);-webkit-animation-name:keyFrameSlideDownOut;animation-name:keyFrameSlideDownOut;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:cubic-bezier(.4,0,1,1);animation-timing-function:cubic-bezier(.4,0,1,1);-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-duration:var(--simple-tooltip-duration-out,500ms);animation-duration:var(--simple-tooltip-duration-out,500ms);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.cancel-animation{-webkit-animation-delay:-30s!important;animation-delay:-30s!important}.hidden{display:none!important} /*# sourceMappingURL=pfe-absolute-position.min.css.map */</style>\n<slot></slot>"}},{key:"templateUrl",get:function(){return"pfe-absolute-position.html"}},{key:"styleUrl",get:function(){return"pfe-absolute-position.scss"}},{key:"target",get:function(){return this._target},set:function(t){return this._target=t,this._target}},{key:"_positions",get:function(){return this._target},set:function(t){return this.__positions=t,this.__positions}}],[{key:"version",get:function(){return"1.6.0"}},{key:"tag",get:function(){return"pfe-absolute-position"}},{key:"meta",get:function(){return{title:"Absolute position",description:"Make any element absolute positioned over another element."}}},{key:"properties",get:function(){return{auto:{type:Boolean,default:!1,observer:"_autoChanged"},fitToVisibleBounds:{type:Boolean,default:!1,observer:"updatePosition"},hidden:{type:Boolean,reflect:!0,observer:"updatePosition"},for:{type:String,reflect:!0,default:null,observer:"updatePosition"},offset:{type:Number,default:0,observer:"updatePosition"},position:{type:String,reflect:!0,default:"top",observer:"updatePosition"},positionAlign:{type:String,reflect:!0,default:"center",observer:"updatePosition"},mode:{type:String,default:"hover",observer:"updatePosition"}}}},{key:"PfeType",get:function(){return t.PfeTypes.Container}}]),e(m,[{key:"connectedCallback",value:function(){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"connectedCallback",this).call(this),this._autoChanged(null,this.auto)}},{key:"_autoChanged",value:function(t,e){this.auto&&this.setPosition(),!0===t&&this.auto&&(this.auto||this.unsetPosition())}},{key:"targetUpdated",value:function(t){this._target=t,this._addListeners()}},{key:"setPosition",value:function(){this.__observe=!0,this.__manager.loadElement(this)}},{key:"unsetPosition",value:function(){this.__observe=!1,this.__manager.unloadElement(this)}},{key:"updatePosition",value:function(){!0===this.__observe&&this.__manager.positionElement(this)}},{key:"disconnectedCallback",value:function(){this.unsetPosition(),this._removeListeners(),o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"disconnectedCallback",this).call(this)}},{key:"cancelAnimation",value:function(){this.shadowRoot.querySelector("#tooltip").classList.add("cancel-animation")}},{key:"_absolutePositionActiveChanged",value:function(t){t?this._show():this.hide()}},{key:"show",value:function(){this.__manager.activateElement(this)}},{key:"_show",value:function(){this._showing||(this._showing=!0,this.shadowRoot.querySelector("#tooltip").classList.remove("hidden"),this.shadowRoot.querySelector("#tooltip").classList.remove("cancel-animation"),this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("exit")),this.updatePosition(),this._animationPlaying=!0,this.shadowRoot.querySelector("#tooltip").classList.add(this._getAnimationType("entry")))}},{key:"hide",value:function(){var t=this;if(this._showing){if(this._animationPlaying)return this._showing=!1,void this._cancelAnimation();this._onAnimationFinish(),this._animationPlaying=!0,this._showing=!1,this.__manager.deactivateElement(this),clearTimeout(this.__debounceCancel),this.__debounceCancel=setTimeout(function(){t._cancelAnimation()},5e3)}}},{key:"toggle",value:function(){this._showing&&void 0!==this._showing?this.hide():this.show()}},{key:"_manualModeChanged",value:function(){this.manualMode?this._removeListeners():this._addListeners()}},{key:"_cancelAnimation",value:function(){this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("entry")),this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("exit")),this.shadowRoot.querySelector("#tooltip").classList.remove("cancel-animation"),this.shadowRoot.querySelector("#tooltip").classList.add("hidden")}},{key:"_onAnimationFinish",value:function(){this._showing&&(this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("entry")),this.shadowRoot.querySelector("#tooltip").classList.remove("cancel-animation"),this.shadowRoot.querySelector("#tooltip").classList.add(this._getAnimationType("exit")))}},{key:"_onAnimationEnd",value:function(){this._animationPlaying=!1,this._showing||(this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("exit")),this.shadowRoot.querySelector("#tooltip").classList.add("hidden"))}},{key:"_getAnimationType",value:function(t){return"entry"===t&&""!==this.animationEntry?this.animationEntry:"exit"===t&&""!==this.animationExit?this.animationExit:this.animationConfig[t]&&"string"==typeof this.animationConfig[t][0].name?(this.animationConfig[t][0].timing&&this.animationConfig[t][0].timing.delay&&0!==this.animationConfig[t][0].timing.delay&&(e=this.animationConfig[t][0].timing.delay,"entry"===t?document.documentElement.style.setProperty("--simple-tooltip-delay-in",e+"ms"):"exit"===t&&document.documentElement.style.setProperty("--simple-tooltip-delay-out",e+"ms")),this.animationConfig[t][0].name):void 0;var e}},{key:"_addListeners",value:function(){this.target&&("hover"===this.mode&&(this.target.addEventListener("mouseenter",this.show.bind(this)),this.target.addEventListener("focus",this.show.bind(this)),this.target.addEventListener("mouseleave",this.hide.bind(this)),this.target.addEventListener("blur",this.hide.bind(this)),this.target.addEventListener("tap",this.hide.bind(this))),"click"===this.mode&&(this.target.addEventListener("keydown",this._keydownHandler.bind(this)),this.target.addEventListener("click",this.show.bind(this)),this.target.addEventListener("tap",this.show.bind(this))))}},{key:"_removeListeners",value:function(){this.target&&("hover"===this.mode&&(this.target.removeEventListener("mouseenter",this.show.bind(this)),this.target.removeEventListener("focus",this.show.bind(this)),this.target.removeEventListener("mouseleave",this.hide.bind(this)),this.target.removeEventListener("blur",this.hide.bind(this)),this.target.removeEventListener("tap",this.hide.bind(this))),"click"===this.mode&&(this.target.removeEventListener("click",this.toggle.bind(this)),this.target.removeEventListener("keydown",this._keydownHandler.bind(this)),this.target.removeEventListener("tap",this.hide.bind(this))))}},{key:"_keydownHandler",value:function(t){switch(t.key||t.keyCode){case"Enter":this.show();break;case" ":this.show(),t.stopPropagation(),t.preventDefault()}}},{key:"_delayChange",value:function(t){500!==t&&document.documentElement.style.setProperty("--simple-tooltip-delay-in",t+"ms")}}]),e=m;function m(){i(this,m);var t=s(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,m,{type:m.PfeType}));return t._positions={},t.target=null,t.__observe=!1,t.__manager=window.AbsolutePositionStateManager.requestAvailability(),t.animationEntry="",t.animationExit="",t.animationConfig={entry:[{name:"fade-in-animation",node:t,timing:{delay:0}}],exit:[{name:"fade-out-animation",node:t}]},setTimeout(function(){t.addEventListener("webkitAnimationEnd",t._onAnimationEnd.bind(t))},0),t}return t.create(e),e});
//# sourceMappingURL=pfe-absolute-position.umd.min.js.map
