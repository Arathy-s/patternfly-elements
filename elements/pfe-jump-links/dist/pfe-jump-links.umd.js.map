{"version":3,"file":"pfe-jump-links.umd.js","sources":["../_temp/polyfills--pfe-jump-links.js","../_temp/pfe-jump-links-nav.js","../_temp/pfe-jump-links-panel.js","../_temp/pfe-jump-links.umd.js"],"sourcesContent":["// @POLYFILL  NodeList.prototype.forEach\n// https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach#Polyfill\nif (window.NodeList && !NodeList.prototype.forEach) {\n  NodeList.prototype.forEach = Array.prototype.forEach;\n}\n// @POLYFILL Number.prototype.isInteger\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger#polyfill\nif (window.Number && !Number.prototype.isInteger) {\n  Number.isInteger =\n    Number.isInteger ||\n    function(value) {\n      return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\n    };\n}\n\n// @POLYFILL Element.prototype.closest\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\nif (!Element.prototype.matches) {\n  Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n}\n\nif (!Element.prototype.closest) {\n  Element.prototype.closest = function(s) {\n    var el = this;\n\n    do {\n      if (Element.prototype.matches.call(el, s)) return el;\n      el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n    return null;\n  };\n}\n\n// @POLYFILL Object.prototype.keys\nif (!Object.keys) {\n  Object.keys = function(obj) {\n    if (obj !== Object(obj)) throw new TypeError(\"Object.keys called on a non-object\");\n    var k = [],\n      p;\n    for (p in obj) if (Object.prototype.hasOwnProperty.call(obj, p)) k.push(p);\n    return k;\n  };\n  Object.keys.forEach = Array.forEach;\n}\n","/*!\n * PatternFly Elements: PfeJumpLinks 1.9.0\n * @license\n * Copyright 2021 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../pfelement/dist/pfelement.js\";\n\nclass PfeJumpLinksNav extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.9.0\";\n  }\n\n  // Injected at build-time\n  get html() {\n    return `\n<style>:host([hide-label]) .pfe-jump-links-nav__heading>h3{position:absolute;overflow:hidden;clip:rect(0,0,0,0);height:1px;width:1px;margin:-1px;padding:0;border:0}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){:host{color:#151515!important}}:host{--context:var(--pfe-jump-links--context);-webkit-box-sizing:border-box;box-sizing:border-box;font-family:\"Red Hat Text\",RedHatText,Overpass,Overpass,Arial,sans-serif;font-family:var(--pfe-theme--font-family, \"Red Hat Text\", \"RedHatText\", \"Overpass\", Overpass, Arial, sans-serif);font-weight:400;font-weight:var(--pfe-theme--font-weight--normal,400);font-weight:400;display:block;position:sticky;top:1rem;top:var(--pfe-jump-links-nav--offset,var(--pfe-theme--container-spacer,1rem));padding-left:0;background-color:transparent;background-color:var(--pfe-jump-links--BackgroundColor,transparent);z-index:97;z-index:var(--pfe-theme--zindex--subnavigation,97)}@media (min-width:992px){:host{border:1px solid transparent;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) transparent;padding:0;padding:var(--pfe-jump-links__nav--Padding,0)}}:host([on=light]){--pfe-broadcasted--text:var(--pfe-theme--color--text, #151515);--pfe-broadcasted--link:var(--pfe-theme--color--link, #06c);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover, #004080);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus, #004080);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited, #6753ac);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration, none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover, underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus, underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited, none)}:host([on=dark]){--pfe-broadcasted--text:var(--pfe-theme--color--text--on-dark, #fff);--pfe-broadcasted--link:var(--pfe-theme--color--link--on-dark, #73bcf7);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover--on-dark, #bee1f4);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus--on-dark, #bee1f4);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited--on-dark, #bee1f4);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration--on-dark, none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover--on-dark, underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus--on-dark, underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited--on-dark, none)}:host([sticky=false]){position:relative}.pfe-jump-links-nav__heading>h3{font-family:\"Red Hat Display\",RedHatDisplay,Overpass,Overpass,Arial,sans-serif;font-family:var(--pfe-theme--font-family--heading, \"Red Hat Display\", \"RedHatDisplay\", \"Overpass\", Overpass, Arial, sans-serif);font-size:.875rem;font-size:var(--pf-c-title--m-sm--FontSize,var(--pf-global--FontSize--sm,.875rem));line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);font-weight:400;font-weight:var(--pfe-theme--font-weight--normal,400);color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42);text-transform:uppercase}.pfe-jump-links-nav__heading>h3:not(:last-child){margin-bottom:1rem;margin-bottom:var(--pfe-theme--content-spacer--heading--sm,1rem)}@media (max-width:991px){.pfe-jump-links-nav__heading>h3{visibility:hidden}}.pfe-jump-links-nav__heading>h3:not(:empty){padding-bottom:1rem;padding-bottom:var(--pfe-theme--container-padding,1rem);border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--surface--border,#d2d2d2)}nav{visibility:visible;margin:0;list-style:none;padding:0}ul{padding:0;border-left:1px solid #d2d2d2;border-left:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2)}li{border-left:4px solid transparent;border-left:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;display:block;text-decoration:none;margin-left:calc(1px * -1);margin-left:calc(var(--pfe-theme--surface--border-width,1px) * -1)}li[active]{border-left-color:#06c;border-left-color:var(--pfe-jump-links--BorderColor,var(--pfe-theme--color--ui-accent,#06c))}a{position:relative;display:table;color:#6a6e73;color:var(--pfe-theme--color--ui-disabled--text,#6a6e73);font-size:1rem;font-size:var(--pfe-jump-links--FontSize,var(--pf-global--FontSize--md,1rem));text-decoration:none;line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);padding-top:calc(calc(1.5rem / 6) * 2);padding-top:calc(var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) * 2);padding-right:calc(calc(1.5rem / 3) * 2);padding-right:calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2);padding-bottom:calc(calc(1.5rem / 6) * 2);padding-bottom:calc(var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) * 2);padding-left:calc(calc(1.5rem / 3) * 2);padding-left:calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2)}.has-sub-section>a{padding-bottom:calc(1.5rem / 6);padding-bottom:var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6))}.sub-section>a{margin-left:calc(1rem * .75);margin-left:calc(var(--pfe-theme--container-spacer,1rem) * .75);font-size:calc(1rem * .85);font-size:calc(var(--pfe-jump-links--FontSize,var(--pf-global--FontSize--md,1rem)) * .85);padding:calc(1.5rem / 6) calc(calc(1.5rem / 3) * 2);padding:var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2)}@media (min-width:992px){.sub-section>a{display:none}}.sub-section>a:last-child{padding-bottom:calc(1.5rem / 3);padding-bottom:var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3))}[aria-expanded=true] .sub-section>a{display:table;height:auto}a:focus{outline:0}a:focus::after{content:\"\";position:absolute;width:calc(100% - 4px);width:calc(100% - var(--pfe-theme--surface--border-width--heavy,4px));height:calc(100% - 4px);height:calc(100% - var(--pfe-theme--surface--border-width--heavy,4px));top:0;left:0;border-radius:3px;border-radius:var(--pfe-theme--surface--border-radius,3px);border:1px solid #06c;border:var(--pfe-theme--ui--focus-outline-width,1px) var(--pfe-theme--ui--focus-outline-style,solid) var(--pfe-broadcasted--link,#06c)}[active] a,a:hover{color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42)}ul ul{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:0;-ms-flex:0;flex:0;margin:0;padding:0;border-left:none!important;overflow-y:hidden;-webkit-transition:-webkit-box-flex 1s linear;transition:-webkit-box-flex 1s linear;transition:flex 1s linear;transition:flex 1s linear,-webkit-box-flex 1s linear,-ms-flex 1s linear}ul ul li{border-left:none!important}ul ul[aria-expanded=true]{-webkit-box-flex:1;-ms-flex:1;flex:1}:host{--pfe-accordion__panel-container--Padding:0}@media (max-width:767px){:host{--pfe-accordion__panel-container--Padding:20px}}pfe-accordion{z-index:97;z-index:var(--pfe-theme--zindex--subnavigation,97)}@media (max-width:991px){pfe-accordion{border:1px solid #d2d2d2;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2)}}pfe-accordion-header{--pfe-theme--color--surface--border:transparent;--pfe-theme--color--ui-base--on-dark:transparent;--pfe-theme--color--ui-base:transparent;position:sticky;top:0}@media (max-width:991px){pfe-accordion-header{background-color:#fff;background-color:var(--pfe-theme--color--surface--lightest,#fff);--context:var(--pfe-theme--color--surface--lightest--context, light)}}@media (min-width:992px){pfe-accordion-header{visibility:collapse!important;display:none}}pfe-accordion-panel{border-left-color:transparent;border-right:none}@media (min-width:992px){pfe-accordion-panel{visibility:collapse;display:none;opacity:1;display:block}pfe-accordion-panel>pfe-jump-links-nav{width:100%;display:block;visibility:visible}}:host([color=lightest]){background-color:#fff;background-color:var(--pfe-jump-links--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));--context:var(--pfe-theme--color--surface--lightest--context, light)}:host([color=darkest]){background-color:#151515;background-color:var(--pfe-jump-links--BackgroundColor,var(--pfe-theme--color--surface--darkest,#151515));--context:var(--pfe-theme--color--surface--darkest--context, dark);border:1px solid #6a6e73;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled--text,#6a6e73)}:host([horizontal]){padding:0;top:0;top:var(--pfe-jump-links-panel--offset,0);width:100%;z-index:98;z-index:var(--pfe-theme--zindex--navigation,98)}:host([horizontal]) nav{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;padding-left:calc(1rem * 2);padding-left:calc(var(--pfe-theme--container-spacer,1rem) * 2);padding-right:calc(1rem * 2);padding-right:calc(var(--pfe-theme--container-spacer,1rem) * 2)}@media (min-width:992px){:host([horizontal]) nav{padding-left:calc(1rem * 4);padding-left:calc(var(--pfe-theme--container-spacer,1rem) * 4);padding-right:calc(1rem * 4);padding-right:calc(var(--pfe-theme--container-spacer,1rem) * 4)}}:host([horizontal]) nav .pfe-jump-links-nav__heading>h3{-ms-flex-preferred-size:100%;flex-basis:100%;text-align:center}:host([horizontal]) nav ::slotted([slot=logo]){max-height:calc(1rem * 3.5);max-height:calc(var(--pfe-theme--container-spacer,1rem) * 3.5)}:host([horizontal]) nav ::slotted([slot=cta]),:host([horizontal]) nav ::slotted([slot=logo]){max-width:calc(1rem * 7);max-width:calc(var(--pfe-theme--container-spacer,1rem) * 7)}@media (min-width:992px){:host([horizontal]) nav ::slotted([slot=cta]),:host([horizontal]) nav ::slotted([slot=logo]){max-width:calc(1rem * 14);max-width:calc(var(--pfe-theme--container-spacer,1rem) * 14)}}:host([horizontal]) #container{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;justify-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}:host([horizontal]) ul{border:none;text-align:center;-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;padding:0;width:auto;margin:0 auto}:host([horizontal]) ul li{padding:0 calc(1rem * 1.5);padding:0 calc(var(--pfe-theme--container-spacer,1rem) * 1.5);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-top:4px solid transparent;border-top:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;border-bottom:4px solid transparent;border-bottom:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;border-left:none;border-right:none}:host([horizontal]) ul li[active]{border-top:4px solid #06c;border-top:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-accent,#06c)}:host([horizontal]) ul a{text-decoration:none;color:#6a6e73;color:var(--pfe-theme--color--ui-disabled--text,#6a6e73);padding-top:1rem;padding-top:var(--pfe-jump-links__link--vertical-spacer,var(--pfe-theme--container-spacer,1rem));padding-right:1rem;padding-right:var(--pfe-jump-links__link--horizontal-spacer,var(--pfe-theme--container-spacer,1rem));padding-bottom:1rem;padding-bottom:var(--pfe-jump-links__link--vertical-spacer,var(--pfe-theme--container-spacer,1rem));padding-left:1rem;padding-left:var(--pfe-jump-links__link--horizontal-spacer,var(--pfe-theme--container-spacer,1rem))}:host([horizontal]) ul a:hover,[active] :host([horizontal]) ul a{color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42)}@media (max-width:991px){:host([horizontal]) nav{min-height:calc(1rem * 5.5);min-height:calc(var(--pfe-theme--container-spacer,1rem) * 5.5);background-color:#f0f0f0;background-color:var(--pfe-theme--color--surface--lighter,#f0f0f0);--context:var(--pfe-theme--color--surface--lighter--context, light)}:host([horizontal]) .pfe-jump-links-nav{display:none}}:host([hidden]){display:none} /*# sourceMappingURL=pfe-jump-links-nav.min.css.map */</style>\n${this.horizontal ? `\n\n<nav>\n  <slot class=\"pfe-jump-links-nav__heading\" name=\"heading\">\n    <h3 id=\"heading\">${this.srText ? this.srText : \"Jump to section\"}</h3>\n  </slot>\n  <slot class=\"pfe-jump-links-nav__logo\" name=\"logo\"></slot>\n  <div id=\"container\"></div>\n  <slot class=\"pfe-jump-links-nav__cta\" name=\"cta\"></slot>\n</nav>\n` : `\n\n<pfe-accordion>\n  <pfe-accordion-header>\n    <h3>${this.srText ? this.srText : \"Jump to section\"}</h3>\n  </pfe-accordion-header>\n  <pfe-accordion-panel>\n    <nav>\n      <slot class=\"pfe-jump-links-nav__heading\" name=\"heading\">\n        <h3 id=\"heading\">${this.srText ? this.srText : \"Jump to section\"}</h3>\n      </slot>\n      <slot class=\"pfe-jump-links-nav__logo\" name=\"logo\"></slot>\n      <div id=\"container\"></div>\n      <slot class=\"pfe-jump-links-nav__cta\" name=\"cta\"></slot>\n    </nav>\n  </pfe-accordion-panel>\n</pfe-accordion>`}`;\n  }\n\n  static get tag() {\n    return \"pfe-jump-links-nav\";\n  }\n\n  get templateUrl() {\n    return \"pfe-jump-links-nav.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-jump-links-nav.scss\";\n  }\n\n  static get events() {\n    return {\n      upgrade: `${this.tag}:upgraded`\n    };\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  static get properties() {\n    return {\n      autobuild: {\n        title: \"Autobuild\",\n        type: Boolean\n      },\n      horizontal: {\n        title: \"Horizontal\",\n        type: Boolean,\n        observer: \"_horizontalHandler\"\n      },\n      srText: {\n        title: \"Navigation label\",\n        type: String,\n        default: \"Jump to section\"\n      },\n      color: {\n        title: \"Color\",\n        type: String,\n        values: [\"lightest\", \"lighter\", \"darkest\"]\n      },\n      hideLabel: {\n        title: \"Hide label\",\n        type: Boolean\n      },\n      nesting: {\n        title: \"Support nested headings\",\n        type: Boolean,\n        default: true\n      },\n      // @TODO: Deprecated in 2.0\n      oldAutobuild: {\n        alias: \"autobuild\",\n        attr: \"pfe-c-autobuild\"\n      },\n      // @TODO: Deprecated in 2.0\n      oldHorizontal: {\n        alias: \"horizontal\",\n        attr: \"pfe-c-horizontal\"\n      },\n      // @TODO: Deprecated in 2.0\n      oldColor: {\n        alias: \"color\",\n        attr: \"pfe-color\"\n      }\n    };\n  }\n\n  static get observerSettings() {\n    return {\n      childList: true,\n      subtree: true,\n      characterData: true\n    };\n  }\n\n  // Sets up backwards compatibility for tag prefixed slot names\n  get logo() {\n    return this.getSlot(\"logo\") || this.getSlot(`${this.tag}--logo`);\n  }\n\n  get cta() {\n    return this.getSlot(\"link\") || this.getSlot(`${this.tag}--link`);\n  }\n\n  get heading() {\n    return this.getSlot(\"heading\") || this.getSlot(`${this.tag}--heading`);\n  }\n\n  constructor() {\n    super(PfeJumpLinksNav, { type: PfeJumpLinksNav.PfeType, delayRender: true });\n\n    // Do not render this in IE11\n    if (this.isIE11) {\n      this.setAttribute(\"hidden\", \"\");\n      return;\n    }\n\n    // Global pointer to the associated panel\n    // If this is empty, we know that no panel exists for this nav\n    this.panel;\n\n    // Cache for build()\n    this._building;\n\n    // Global definition for link elements in the ShadowDOM\n    this.links;\n    this.panelRefs = [];\n    this.activeLinks = [];\n\n    // Public API\n    this.build = this.build.bind(this);\n    this.validateData = this.validateData.bind(this);\n    this.getLinkById = this.getLinkById.bind(this);\n    this.closeAccordion = this.closeAccordion.bind(this);\n    this.rebuild = this.rebuild.bind(this);\n    this.setActive = this.setActive.bind(this);\n    this.isActive = this.isActive.bind(this);\n    this.removeActive = this.removeActive.bind(this);\n    this.removeAllActive = this.removeAllActive.bind(this);\n    this.upgradeA11y = this.upgradeA11y.bind(this);\n    this.upgradeA11yListItem = this.upgradeA11yListItem.bind(this);\n    this.connectPanel = this.connectPanel.bind(this);\n\n    //-- Internal-only methods\n    this._buildItem = this._buildItem.bind(this);\n    this._isValidLightDom = this._isValidLightDom.bind(this);\n    this._copyListToShadow = this._copyListToShadow.bind(this);\n    this._connectLightDOM = this._connectLightDOM.bind(this);\n    // this._reportHeight = this._reportHeight.bind(this);\n    this._init = this._init.bind(this);\n\n    // Event handlers\n    this._clickHandler = this._clickHandler.bind(this);\n    this._upgradePanelHandler = this._upgradePanelHandler.bind(this);\n    this._activeItemHandler = this._activeItemHandler.bind(this);\n    this._horizontalHandler = this._horizontalHandler.bind(this);\n    this._observer = new MutationObserver(this._init);\n\n    // Note: We need the panel connection even if we're not using autobuild to determine where to scroll on click\n    // document.body.addEventListener(\"pfe-jump-links-panel:upgraded\", this._upgradePanelHandler);\n\n    // Start listening for if the panel has changed\n    // @TODO: add a specialized handler for the change event\n    // document.body.addEventListener(\"pfe-jump-links-panel:change\", this._init);\n\n    // If the active item changes, fire the handler\n    // document.body.addEventListener(\"pfe-jump-links-panel:active-navItem\", this._activeItemHandler);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // Do not render this in IE11\n    if (this.isIE11) {\n      this.setAttribute(\"hidden\", \"\");\n      return;\n    }\n\n    // Initialize the navigation\n    this._init();\n    this.render();\n\n    // Trigger the mutation observer\n    // if (!this.autobuild) this._observer.observe(this, PfeJumpLinksNav.observerSettings);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    // this._observer.disconnect();\n\n    // document.body.removeEventListener(\"pfe-jump-links-panel:upgraded\", this._upgradePanelHandler);\n    // document.body.removeEventListener(\"pfe-jump-links-panel:active-navItem\", this._activeItemHandler);\n    // document.body.removeEventListener(\"pfe-jump-links-panel:change\", this._init);\n\n    this.links.forEach(link => link.removeEventListener(\"click\", this._clickHandler));\n  }\n\n  getLinkById(id) {\n    if (!id) return;\n\n    let getLink = function(id) {\n      // Check if the shadow template contains links\n      const links = this.shadowRoot.querySelectorAll(\"#container li > a\");\n      if (!links) return;\n      const filter = [...links].filter(item => item.hash === `#${id}`);\n\n      if (filter.length <= 0) return;\n      // @TODO This is too noisy\n      // this.warn(`No link was found with #${id} in the navigation links.`);\n\n      return filter[0];\n    };\n\n    let link = getLink(id);\n\n    // @TODO Post-IE11; convert to async / await\n    if (this._building) {\n      this._building.then(() => {\n        link = getLink(id);\n      });\n    }\n\n    return link;\n  }\n\n  closeAccordion() {\n    this.shadowRoot.querySelector(\"pfe-accordion\").collapseAll();\n  }\n\n  rebuild(navset) {\n    // Capture sections from the panel if not provided\n    // This is helpful for when this is used as an API\n    // re: document.querySelector(\"pfe-jump-links-nav\").rebuild();\n    if (!navset) {\n      if (this.panel.tagName === \"pfe-jump-links-panel\") navset = this.panel.sectionRefs;\n      else return;\n    }\n\n    this.build(navset);\n  }\n\n  setActive(link) {\n    if (!link) return;\n\n    const listItem = link.closest(\"li\");\n\n    const checkForAncestors = item => {\n      item.setAttribute(\"active\", \"\");\n\n      // if (item.classList.contains(\"has-sub-section\")) {\n      //   item.querySelector(\":scope > ul\").setAttribute(\"aria-expanded\", \"true\");\n      // }\n\n      const parentItem = item.parentElement.closest(\"li\");\n      if (!parentItem || parentItem === item) return;\n\n      if (parentItem && item.classList.contains(\"sub-section\")) {\n        parentItem.setAttribute(\"active\", \"\");\n        parentItem.querySelector(\":scope > ul\").setAttribute(\"aria-expanded\", \"true\");\n        item.tabindex = \"0\";\n      }\n\n      checkForAncestors(parentItem);\n    };\n\n    checkForAncestors(listItem);\n  }\n\n  isActive(link) {\n    if (!link) return false;\n    const listItem = link.closest(\"li\");\n    return listItem.hasAttribute(\"active\");\n  }\n\n  removeActive(link) {\n    if (!link) return;\n\n    const listItem = link.closest(\"li\");\n    listItem.removeAttribute(\"active\");\n\n    const checkForAncestors = item => {\n      // parentElement ensures the query doesn't return itself!\n      const parentItem = item.parentElement.closest(\"li\");\n      if (!parentItem) return;\n\n      if (item.classList.contains(\"sub-section\")) {\n        // Only remove status from parent if all children are removed\n        const parentLink = parent.querySelector(\":scope > a\");\n        if (this.isActive(parentLink)) {\n          let activeChildren = false;\n          parent.querySelectorAll(\"ul > li > a\").forEach(link => {\n            if (this.isActive(link)) activeChildren = true;\n          });\n\n          // If none of the children are active, remove the active settings\n          if (!activeChildren) {\n            parent.removeAttribute(\"active\");\n            parent.setAttribute(\"aria-expanded\", \"false\");\n          }\n        }\n      } else if (item.classList.contains(\"has-sub-section\")) {\n        item.setAttribute(\"aria-expanded\", \"false\");\n      }\n\n      item.removeAttribute(\"active\");\n\n      if (item.classList.contains(\"has-sub-section\")) {\n        item.querySelector(\":scope > ul\").setAttribute(\"aria-expanded\", \"false\");\n      }\n\n      if (parentItem && item.classList.contains(\"sub-section\")) {\n        parentItem.removeAttribute(\"active\");\n        parentItem.closest(\"ul\").setAttribute(\"aria-expanded\", \"false\");\n        item.tabindex = \"-1\";\n      }\n\n      checkForAncestors(parentItem);\n    };\n\n    checkForAncestors(listItem);\n  }\n\n  removeAllActive() {\n    this.activeLinks.forEach(link => this.removeActive(link));\n    // Empty out the active links pointer\n    this.activeLinks = [];\n  }\n\n  // @TODO: add a link to the WCAG page about role=\"tree\"\n  upgradeA11yListItem(item, isSubSection = false) {\n    // Create the link to the section\n    const link = item.querySelector(\"a\");\n    link.classList.add(\"pfe-jump-links-nav__link\");\n\n    item.className = \"pfe-jump-links-nav__item\"; // Goes on the li tag\n    // List items get a role of \"treeitem\"\n    item.role = \"treeitem\";\n    // List items that are visible should be focusable\n    item.tabindex = \"0\";\n\n    if (isSubSection) {\n      item.classList.add(\"sub-section\");\n\n      // Subsections are not visible and thus should not be focusable\n      link.tabindex = \"-1\";\n    }\n\n    // If active links is initiated before the nav is upgrade, active the link\n    if (this.activeLinks.length > 0 && this.activeLinks.includes(link)) this.setActive(link);\n\n    // Build out the nested group\n    let nested = item.querySelector(\":scope > ul\");\n    if (nested) {\n      nested.role = \"group\";\n\n      const children = nested.querySelectorAll(\":scope > li\");\n      if (children.length > 0) {\n        item.classList.add(\"has-sub-section\");\n        item.setAttribute(\"aria-expanded\", \"false\");\n        children.forEach(child => this.upgradeA11yListItem(child, true));\n      }\n    }\n  }\n\n  upgradeA11y() {\n    // Turn off the observer while we update the DOM\n    // if (!this.autobuild) this._observer.disconnect();\n\n    // Get the light DOM\n    const parentList = this.querySelector(\"ul\") || this.querySelector(\"ol\");\n    if (!parentList) return;\n\n    // Loop through the markup and apply the appropriate tags\n    parentList.classList.add(\"pfe-jump-links-nav\");\n    // Note: only the first UL gets the tree role\n    parentList.role = \"tree\";\n\n    // Check to see if there is a heading tag preceeding this list\n    const label = parentList.closest(\"h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\");\n    if (label) parentList.setAttribute(\"aria-labelledby\", label.id);\n\n    // Iterate over each list item that is a direct child of the parentList\n    const listItems = parentList.querySelectorAll(\":scope > li\");\n    listItems.forEach(item => this.upgradeA11yListItem(item));\n\n    // Trigger the mutation observer\n    // if (!this.autobuild) this._observer.observe(this, PfeJumpLinksNav.observerSettings);\n  }\n\n  /**\n   * Connect the nav to it's associated panel after upgrade\n   * Note: this no longer has to be `pfe-jump-links-panel`\n   */\n  connectPanel(panel) {\n    this.panel = panel;\n\n    // If the panel does not have a scrolltarget attribute, go ahead and add it\n    if (!this.panel.hasAttribute(\"scrolltarget\")) this.panel.setAttribute(\"scrolltarget\", this.id);\n\n    // Set up a pointer to this nav element in the panel if it doesn't already exist\n    if (!this.panel.nav) this.panel.nav = this;\n\n    // Fire rebuild if autobuild is set\n    if (this.autobuild) this.rebuild();\n  }\n\n  /**\n   * Process the upgrade panel custom event to connect the panel to this navigation element\n   */\n  _upgradePanelHandler(evt) {\n    if (!evt && !evt.detail) return;\n\n    let panel = evt.detail.panel;\n\n    // If the target does not match the id of this nav\n    // Return but don't remove the event\n    if (!(panel && panel.scrolltarget === this.id)) return;\n\n    // Wire up the panel to this element\n    this.connectPanel(panel);\n\n    // Stop listening for the panel\n    document.body.removeEventListener(\"pfe-jump-links-panel:upgraded\", this._upgradePanelHandler);\n\n    // Stop the panel from listening for the nav upgrade (prevents duplication)\n    document.body.removeEventListener(PfeJumpLinksNav.events.upgrade, this.panel._connectToNav);\n  }\n\n  _horizontalHandler(oldVal, newVal) {\n    if (oldVal === newVal) return;\n\n    // @TODO await updateComplete re:lit\n    setTimeout(() => {\n      this.cssVariable(`${this.tag}--Height--actual`, `${this.clientHeight}px`, document.body);\n    }, 1000);\n  }\n\n  /*\n   * Build out a list item with the correct attributes and markup\n   * reference: https://www.w3.org/WAI/GL/wiki/Using_ARIA_trees\n   */\n  _buildItem(data) {\n    let item = document.createElement(\"li\");\n\n    // Create the link to the section\n    let link = document.createElement(\"a\");\n    link.href = `#${data.id}`;\n    link.textContent = data.label;\n\n    // Add the link to the list\n    item.appendChild(link);\n\n    return item;\n  }\n\n  _buildList(items, id = null) {\n    if (items.length <= 0) return;\n\n    let wrapper = document.createElement(\"ul\");\n    if (id) wrapper.setAttribute(\"aria-labelledby\", id);\n\n    // Loop through each item\n    items.forEach(item => {\n      // Pass the data object to the item builder\n      let result = this._buildItem(item);\n\n      // If there are children, set the result to the new list\n      // Otherwise, the result is the new list item\n      if (item.children && item.children.length > 0) {\n        // Pass the children array to a nested list call\n        let nested = this._buildList(item.children);\n        result.appendChild(nested);\n      }\n\n      wrapper.appendChild(result);\n    });\n\n    return wrapper;\n  }\n\n  /**\n   * Build out a navigation element based on data from the panel object\n   * @param {Array} set An array of section details\n   * @returns {Promise} When the navigation is done being built\n   * @TODO Post-IE11: convert to async / await\n   **/\n  build(set = this.data || []) {\n    // If there is no provided array and the global data pointer is empty, escape\n    if (!set) return;\n\n    let items = this.validateData(set);\n\n    // Create the list\n    let wrapper = this._buildList(items, `heading`);\n    console.log(wrapper);\n    if (!wrapper.outerHTML) return;\n\n    // Turn off the observer while we update the DOM\n    if (this._observer) this._observer.disconnect();\n\n    // Add the new content to the light DOM\n    this.innerHTML = wrapper.outerHTML;\n\n    // If it has not yet been rendered, fire it now\n    if (!this.rendered) this.render();\n\n    // Copy the light DOM to the shadow DOM\n    // Returns a NodeList of links in the shadow DOM navigation\n    this._copyListToShadow().then(links => this._connectLightDOM(links));\n\n    // Trigger the mutation observer\n    if (this._observer) this._observer.observe(this, PfeJumpLinksNav.observerSettings);\n  }\n\n  /**\n   * Validate the data array\n   * @param {Array} set\n   */\n  validateData(set = []) {\n    if (set.length === 0) return;\n\n    let items = [];\n    // Expect:\n    //-- id: \"sectionOne\" (required)\n    //-- label: \"Section 1\" (required)\n    //-- ref: h3#sectionOne.pfe-jump-links-panel__section (optional)\n    //-- isVisible: false (optional)\n    //-- childOf: null (optional)\n    Object.keys(set).forEach(key => {\n      let data = set[key];\n\n      if (!data.id && !data.ref) {\n        this.warn(`Objects requires at least an ID or a pointer to the heading element.`);\n        return;\n      }\n\n      if (!data.label) {\n        this.warn(`Objects requires a label for the heading link.`);\n        return;\n      }\n\n      // If the ID was provided but not a reference, capture it from the DOM\n      if (data.id && !data.ref) {\n        data.ref = document.querySelector(`#${data.id}`);\n      }\n\n      if (!data.ref) {\n        this.warn(\n          `If pointing to content inside a ShadowRoot, please provide the ref key with a pointer to that heading element.`\n        );\n        return;\n      }\n\n      if (data.childOf) {\n        if (!this.horizontal && !this.nesting) {\n          let lastItem = items[items.length - 1];\n          if (lastItem)\n            lastItem.children.push({\n              id: data.id,\n              ref: data.ref,\n              isVisible: data.isVisible || false,\n              label: data.label,\n              children: []\n            });\n        } else {\n          this.warn(`Horizontal jump links do not support nested sections. This item was skipped: #${data.id}`);\n        }\n      } else {\n        items.push({\n          id: data.id,\n          ref: data.ref,\n          isVisible: data.isVisible || false,\n          label: data.label,\n          children: []\n        });\n      }\n    });\n\n    return items;\n  }\n\n  /*\n   * Validate the light DOM provided for the manually coded navigation\n   */\n  _isValidLightDom() {\n    if (!this.hasLightDOM() || !(this.querySelector(\"ul\") || this.querySelector(\"ol\"))) {\n      this.warn(`You must have a <ul> or <ol> tag in the light DOM or use the autobuild attribute.`);\n      return false;\n    }\n\n    if ((this.logo || this.cta) && !this.horizontal) {\n      this.warn(`logo and link slots are %cnot%c supported in vertical jump links`, \"font-style: italic\", \"\");\n    }\n\n    return true;\n  }\n\n  /*\n   * Copy the light DOM list to the shadow DOM for control of styling\n   */\n  _copyListToShadow() {\n    return new Promise((resolve, reject) => {\n      const menu = this.querySelector(\"ul\") || this.querySelector(\"ol\");\n\n      if (!menu) reject(`No menu elements (ul or ol) could be foundin the light DOM.`);\n\n      // Upgrade the accessibility of the light DOM provided\n      // including attaching appropriate classes\n      this.upgradeA11y();\n\n      if (!this.rendered) this.render();\n\n      // Copy the menu into the shadow DOM\n      this.shadowRoot.querySelector(\"#container\").innerHTML = menu.outerHTML;\n\n      // Return a NodeList of the links\n      resolve(this.shadowRoot.querySelectorAll(\"#container li > a\"));\n    });\n  }\n\n  /*\n   * Initialize the navigation element\n   */\n  _init() {\n    // Set up backwards compatibility for slots with old tag-prefixed naming\n    [\"logo\", \"cta\", \"heading\"].forEach(region => {\n      this.getSlot(`${this.tag}--${region}`).forEach(slot => {\n        slot.setAttribute(\"slot\", region);\n      });\n    });\n\n    // If this is a manually build component but it doesn't have valid light DOM, return\n    // Note: The _isValidLightDOM function throws the necessary warnings, no warnings needed here\n    if (!this.autobuild && !this._isValidLightDom()) return;\n\n    // Capture the light DOM content from the panel\n    // passing that to the build navigation method to render the markup\n    if (this.autobuild) {\n      // @TODO Set up an API for this instead\n      if (this.panel) this.build(this.panel.sectionRefs);\n      else return;\n    }\n  }\n\n  _connectLightDOM(links) {\n    // Recapture the panel references; start by emptying it\n    this.panelRefs = [];\n\n    // Attach event listeners to each link in the shadow DOM\n    links.forEach(link => {\n      // Add a click event listener\n      link.addEventListener(\"click\", this._clickHandler);\n\n      // Capture the panel reference\n      if (this.panel) {\n        const ref = this.panel.getRefById(link.hash.replace(/^#/, \"\"));\n        if (ref) this.panelRefs.push(ref);\n      }\n\n      // Pass information back the panels when the navigation was manually built\n      // if (!this.autobuild) {\n      //   console.log(this.panelRefs);\n      // }\n    });\n\n    // Create a global pointer for the link elements\n    this.links = links;\n\n    // If the upgrade was successful, remove the hidden attribute\n    if (links.length > 0) this.removeAttribute(\"hidden\");\n  }\n\n  /*\n   * Handle on click events\n   */\n  _clickHandler(evt) {\n    evt.preventDefault();\n\n    let entry;\n\n    // Throw a warning if the returned value is using something other than px for units\n    const getValue = variableName => {\n      const value = this.cssVariable(variableName);\n      if (!value) return;\n      if (!Number.isInteger(Number(value)) && !value.match(/px$/)) {\n        this.warn(\n          `Using an integer with a unit (other than px) is not supported for custom property ${variableName}. Received ${value}. The component strips the unit using parseInt(). For example, 1rem would become 1 and behave as if you had entered 1px.`\n        );\n      }\n      return value;\n    };\n\n    // Note that the offset attribute will override a value stored in the offset CSS variable\n    let offsetInput = getValue(`${this.tag}--offset`) || 0;\n    // Capture the height of the navigation component\n    let navigation = getValue(`pfe-navigation--Height--actual`) || 0;\n    // Capture the height of the navigation for jump links, including the older, deprecated --pfe-jump-links--nav-height\n    let jumpLinksNav = getValue(`pfe-jump-links-nav--Height--actual`) || getValue(`pfe-jump-links--nav-height`) || 0;\n\n    // The total offset value is the user-provided offset plus the height of the navigation plus the height of the jump links navigation\n    let offset = parseInt(offsetInput) + parseInt(navigation) + parseInt(jumpLinksNav) + 8 || 200;\n\n    // Fire scroll event to the section referenced\n    if (!evt || !evt.path || !evt.path[0] || !evt.path[0].hash) return;\n\n    const id = evt.path[0].hash;\n    const key = id.replace(/^#/, \"\");\n\n    if (!id) return;\n\n    if (this.panel) {\n      const refs = this.panel.sectionRefs;\n      const capture = Object.values(refs).filter(data => data.id === key);\n      if (capture.length === 1) entry = capture[0].ref;\n\n      // Fallback to any ID reference from the panel light or shadow DOM\n      if (!entry) entry = this.panel.querySelector(id) || this.panel.shadowRoot.querySelector(id);\n    }\n\n    // Fallback to any ID reference from the document\n    if (!entry) entry = document.querySelector(id);\n\n    if (!entry) {\n      this.warn(`A corresponding panel was not found for ${id}`);\n      return;\n    }\n\n    // If there are no attached panels, let the default click behavior do it's thing\n    /* JavaScript MediaQueryList Interface */\n    let behavior = \"smooth\";\n    if (window.matchMedia(\"(prefers-reduced-motion)\").matches) behavior = \"auto\";\n\n    // Set up the scroll animation\n    if (this.panel) offset = this.panel.offsetValue;\n\n    window.scrollTo({\n      top: entry.getBoundingClientRect().top + window.pageYOffset - offset,\n      behavior: behavior\n    });\n\n    // @TODO: Create JSON tokens for media query breakpoints\n    // If the window is less than 992px, escape (do nothing)\n    if (window.matchMedia(\"(min-width: 992px)\").matches) return;\n\n    // Close the accordion after 750ms\n    setTimeout(this.closeAccordion, 750);\n  }\n\n  /*\n   * Sets a navigation item to active when event surfaced from panel\n   */\n  _activeItemHandler(evt) {\n    // Capture the panel that fired the event\n    const panel = evt.detail.panel;\n    // @TODO Use this array to highlight all visible items\n    const ids = evt.detail.activeIds;\n\n    // If it's not the right panel, get out of here!\n    if (!panel || (panel && panel.scrolltarget !== this.id)) return;\n\n    // This this is an autobuild component and the nav is complete, process the activation\n    if (!this.autobuild || (this.autobuild && this._building)) {\n      // If the array is empty, clear active state\n      if (!ids || ids.length === 0) {\n        this.removeAllActive();\n        return;\n      }\n\n      // Capture the first item in the set\n      const firstId = ids[0];\n\n      if (!firstId) return;\n\n      // Get the link by ID\n      const link = this.getLinkById(firstId);\n      const ref = panel.getRefById(firstId);\n\n      if (!link) return;\n\n      // If this is already an active link, do nothing\n      if (this.activeLinks.length > 0) {\n        if (this.activeLinks.filter(active => active === link).length > 0) return;\n\n        // If there are active links in the pointer, clear the array\n        this.removeAllActive();\n      }\n\n      // Set the activeLinks array to the new link element\n      this.activeLinks.push(link);\n\n      // const checkForAncestors = (ref) => {\n      //   if (!ref.childOf) return;\n\n      //   // Get the link for the parent element\n      //   const parentLink = this.getLinkById(ref.childOf);\n      //   this.activeLinks.unshift(parentLink);\n\n      //   // Get the reference to the parent\n      //   const parentRef = panel.getRefById(ref.childOf);\n      //   checkForAncestors(parentRef);\n      // };\n\n      // // Kick off the parent check\n      // if (ref) checkForAncestors(ref);\n\n      // Activate the link\n      this.activeLinks.map(link => this.setActive(link));\n    } else setTimeout(this._activeItemHandler(evt), 100);\n  }\n}\n\nexport default PfeJumpLinksNav;\n","/*!\n * PatternFly Elements: PfeJumpLinks 1.9.0\n * @license\n * Copyright 2021 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../pfelement/dist/pfelement.js\";\n\nclass PfeJumpLinksPanel extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.9.0\";\n  }\n\n  static get tag() {\n    return \"pfe-jump-links-panel\";\n  }\n\n  // No template or sass files because it's just a default slot\n  get html() {\n    return `<style>:host { display: block; } :host([hidden]) { display: none; }</style><slot></slot>`;\n  }\n\n  static get events() {\n    return {\n      change: `${this.tag}:change`,\n      activeNavItem: `${this.tag}:active-navItem`,\n      upgrade: `${this.tag}:upgraded`\n    };\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  static get properties() {\n    return {\n      offset: {\n        title: \"Offset\",\n        type: Number,\n        observer: \"_offsetChanged\"\n      },\n      scrolltarget: {\n        title: \"Scroll target\",\n        type: String\n      },\n      // @TODO: Deprecated in 1.0\n      oldOffset: {\n        alias: \"offset\",\n        attr: \"pfe-c-offset\"\n      },\n      // @TODO: Deprecated in 1.0\n      oldScrolltarget: {\n        alias: \"scrolltarget\",\n        attr: \"pfe-c-scrolltarget\"\n      }\n    };\n  }\n\n  static get observerSettings() {\n    return {\n      childList: true,\n      subtree: true,\n      characterData: true\n    };\n  }\n\n  get offsetValue() {\n    // Throw a warning if the returned value is using something other than px for units\n    const getValue = variableName => {\n      const value = this.cssVariable(variableName);\n      if (!value) return;\n      if (!Number.isInteger(Number(value)) && !value.match(/px$/)) {\n        this.warn(\n          `Using an integer with a unit (other than px) is not supported for custom property ${variableName}. Received ${value}. The component strips the unit using parseInt(). For example, 1rem would become 1 and behave as if you had entered 1px.`\n        );\n      }\n      return value;\n    };\n\n    // Note that the offset attribute will override a value stored in the offset CSS variable\n    let offsetInput = this.offset || getValue(`${this.tag}--offset`) || 0;\n    // Capture the height of the navigation component\n    let navigation = getValue(`pfe-navigation--Height--actual`) || 0;\n    // Capture the height of the navigation for jump links, including the older, deprecated --pfe-jump-links--nav-height\n    let jumpLinksNav = getValue(`pfe-jump-links-nav--Height--actual`) || getValue(`pfe-jump-links--nav-height`) || 0;\n\n    // The total offset value is the user-provided offset plus the height of the navigation plus the height of the jump links navigation\n    return parseInt(offsetInput) + parseInt(navigation) + parseInt(jumpLinksNav) + 8 || 200;\n  }\n\n  constructor() {\n    super(PfeJumpLinksPanel, { type: PfeJumpLinksPanel.PfeType });\n\n    // Global pointer to the associated navigation\n    // If this is empty, we know that no nav is attached to this panel yet\n    this.nav = undefined;\n\n    // Placeholders for the sections list and reference object\n    // This global variable stores a NodeList of all the sections\n    this.sections = [];\n    // This global variable stores an object using IDs as the keys\n    // for each section in the panel, these objects are built using `_sectionReference`\n    this.sectionRefs = {};\n\n    // Connect the internal only methods to the this context\n    this._connectToNav = this._connectToNav.bind(this);\n    this._sectionReference = this._sectionReference.bind(this);\n    this._parseSections = this._parseSections.bind(this);\n    this._init = this._init.bind(this);\n    this._attachIntersectionObservers = this._attachIntersectionObservers.bind(this);\n    this._intersectionCallback = this._intersectionCallback.bind(this);\n    this._resizeHandler = this._resizeHandler.bind(this);\n\n    // Define the observers\n    this._observer = new MutationObserver(this._init);\n    this._intersectionObserver = new IntersectionObserver(this._intersectionCallback, {\n      rootMargin: `${this.offsetValue}px 0px 0px 0px`,\n      // Threshold is an array of intervals that fire intersection observer event\n      // @TODO: Update this to be a dynamic property [0, 0.01, 0.02, 0.03, 0.04, ...]\n      threshold: Array(100)\n        .fill()\n        .map((_, i) => i / 100 || 0)\n    });\n    this._resizeObserver = new ResizeObserver(this._resizeHandler);\n\n    // Set up a listener for the paired navigation element, if one is not already attached\n    if (!this.nav) document.body.addEventListener(\"pfe-jump-links-nav:upgraded\", this._connectToNav);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // Fire the initalize method and when complete, announce the upgrade to the document\n    this._init();\n\n    // Once the upgrade is complete, emit an event announcing the panel upgrade\n    if (this.sections) {\n      this.emitEvent(PfeJumpLinksPanel.events.upgrade, {\n        detail: {\n          panel: this,\n          sections: this.sections,\n          navigation: this.sectionRefs\n        }\n      });\n    }\n\n    // Set up the mutation observer to watch the Jump Links Panel for updates\n    this._observer.observe(this, PfeJumpLinksPanel.observerSettings);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._observer.disconnect();\n    this._resizeObserver.disconnect();\n\n    this.querySelectorAll(\"[section-container]\").forEach(container => this._intersectionObserver.disconnect(container));\n\n    document.body.removeEventListener(\"pfe-jump-links-nav:upgraded\", this._connectToNav);\n  }\n\n  getRefById(id) {\n    let capture = Object.values(this.sectionRefs).filter(data => data.id === id);\n    return capture[0];\n  }\n\n  updateActiveState() {\n    const visible = Object.values(this.sectionRefs)\n      // We want only sections that are visible\n      .filter(section => section.isVisible);\n\n    // Sort the items by largest intersectionRatio which will be the item\n    // that is the most visible on the screen.\n    // @todo we could take into account other variables like how big the section is on the page\n    // .sort((a, b) => a.intersectionRatio - b.intersectionRatio)\n    // .reverse()\n\n    // Check if the first item has a large enough ratio visible; if not, remove it\n    if (visible.length > 2 && visible[0].intersectionRatio < 1 && visible[1].intersectionRatio > 0.5) {\n      visible.shift();\n    }\n\n    this.emitEvent(PfeJumpLinksPanel.events.activeNavItem, {\n      detail: {\n        panel: this,\n        activeIds: visible.map(item => item.id) // All we need is the section id\n      }\n    });\n  }\n\n  /**\n   * Connect the panel to it's associated navigation after upgrade\n   */\n  _connectToNav(evt) {\n    // If the target does not match the id of this panel\n    if (!(evt.detail && evt.detail.nav && evt.detail.nav.id === this.scrolltarget)) {\n      // Return but don't remove the event\n      return;\n    }\n\n    // Assign the pointer to the nav reference\n    this.nav = evt.detail.nav;\n\n    // If a nav element is already defined, return without additional parsing\n    if (this.nav) {\n      // Stop listening for the navigation\n      document.body.removeEventListener(\"pfe-jump-links-nav:upgraded\", this._connectToNav);\n\n      // Stop the nav from listening for the panel to prevent duplication\n      document.body.removeEventListener(PfeJumpLinksPanel.events.upgrade, this.nav._upgradePanelHandler);\n\n      // Add the offset variable to the navigation component\n      this.cssVariable(`--pfe-jump-links-nav--offset`, `${this.offsetValue}px`, this.nav);\n\n      // If the nav does not have a pointer to this panel yet, add one\n      if (!this.nav.panel) {\n        this.nav.connectPanel(this);\n\n        // Fire the intialization\n        this.nav._init();\n      } else {\n        // If the navigation is set to autobuild, fire the build\n        if (this.nav.autobuild) this.nav.rebuild(this.sectionRefs);\n      }\n    }\n  }\n\n  /**\n   * Build an object reference to a section\n   */\n  _sectionReference(section) {\n    return {\n      id: section.id,\n      ref: section,\n      isVisible: false,\n      // @TODO Document the nav-label in the README\n      label: (section.getAttribute(\"nav-label\") || section.textContent).trim(),\n      childOf: null\n    };\n  }\n\n  // Note: sections is type array\n  _parseSections(sections, sets = [], type = \"classes\", lastItem = {}) {\n    if (sections.length === 0) return sets;\n\n    const section = sections[0];\n\n    // If the section provided does not have the correct classes applied OR\n    // If this section does not use an h-tag or is missing an ID\n    // Remove it from the list without parsing it\n    if (\n      (type === \"classes\" && !section.classList.contains(\"pfe-jump-links-panel__section\")) ||\n      (type !== \"classes\" && !section.tagName.startsWith(\"H\"))\n    ) {\n      sections.shift();\n    }\n\n    // Set defaults for relationship\n    let isChild = false;\n    let isParent = false;\n\n    // Get details about the item\n    const sectionRef = this._sectionReference(section);\n\n    // If the section does not have an ID, add one now\n    if (!section.id)\n      if (sectionRef.label) {\n        section.id = sectionRef.label\n          .toLowerCase()\n          .replace(/\\./, \"\")\n          .split(\" \")\n          .map(word => `${word.slice(0, 1).toUpperCase()}${word.slice(1)}`)\n          .join(\"\");\n      } else section.id = this.randomId;\n\n    // If classes are present, determining sibling vs. child relationship\n    if (type === \"classes\") {\n      // If the last item has a sub-section class but this one does not, it's a parent element\n      // (unless it contains has-sub-section in which case isChild will override)\n      if (lastItem && lastItem.ref) {\n        isParent = lastItem.ref.classList.contains(\"sub-section\") && !section.classList.contains(\"sub-section\");\n        // If this item has a sub-section class but the last one did not, this is a child\n        isChild = lastItem.ref.classList.contains(\"has-sub-section\") && section.classList.contains(\"sub-section\");\n      }\n    } else {\n      // Level represents the h-tag level; this helps us determine depth and relationship\n      // when no classes are present\n      const newLevel = section.tagName.slice(1, 2);\n\n      // Initialize previous level at 0, use last-item to set this value\n      let previousLevel = 1;\n\n      // Capture the previous level from the lastItem in the set\n      if (lastItem.ref) previousLevel = lastItem.ref.tagName.slice(1, 2);\n\n      // If the new heading is greater than the previous one, this is a child object\n      isChild = newLevel > previousLevel;\n      // If the new heading is less than the previous one, this is a parent object\n      isParent = newLevel < previousLevel;\n    }\n\n    // Add the reference to the children of the lastItem\n    if (isChild) {\n      sectionRef.childOf = lastItem.id;\n    } else if (!isParent && lastItem.childOf) {\n      sectionRef.childOf = lastItem.childOf;\n    } else if (isParent) {\n      let parent;\n      const sibling = Object.values(sets).filter(item => item.id === lastItem.id);\n      if (sibling.length > 0 && sibling[0].childOf) {\n        parent = Object.values(sets).filter(item => item.id === sibling[0].childOf);\n        // Add the parent ID as the childOf for this element\n        if (parent.length > 0 && parent[0].childOf) {\n          sectionRef.childOf = parent[0].childOf;\n        }\n      }\n    }\n\n    // Add the sibling or parent to the array\n    sets.push(sectionRef);\n\n    // Remove the entry from the sections before looping\n    sections.shift();\n\n    // Recurse to see if this has siblings or children\n    return this._parseSections(sections, sets, type, sectionRef);\n  }\n\n  _init() {\n    // Fetch the light DOM sections via class name\n    this.sections = this.querySelectorAll(\".pfe-jump-links-panel__section\");\n\n    // If sections are found, parse the results and store the refs\n    if (this.sections.length > 0) {\n      this.sectionRefs = this._parseSections([...this.sections]);\n    }\n\n    if (this.sections.length <= 0) {\n      this.warn(\n        `No elements in ${this.tag} included the .${this.tag}__section class. Grepping instead for h-level tags as a fallback.`\n      );\n\n      // Search for sections using h-level tags with IDs (the IDs are critical to the navigation working)\n      this.sections = this.querySelectorAll(\"h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]\");\n      if (this.sections) this.sectionRefs = this._parseSections([...this.sections], [], \"markup\");\n    }\n\n    if (this.sectionRefs.length > 0) {\n      // If nav exists, pass the sections to it for building\n      if (this.nav) this.nav.buildNav(this.sectionRefs);\n    }\n\n    this.style.position = \"relative\";\n\n    // Attach the intersection observer for each section to determine if it's visible\n    this._attachIntersectionObservers();\n\n    // Set the offset value as a variable on the document for sticky nav elements to use\n    if (this.nav) this.cssVariable(`--pfe-jump-links-nav--offset`, `${this.offsetValue}px`, this.nav);\n\n    // Attach the resize observer\n    this._resizeObserver.observe(this);\n  }\n\n  _attachIntersectionObservers() {\n    // Attach the intersection observer for each section to determine if it's visible\n    this.sections.forEach(section => this._intersectionObserver.observe(section));\n  }\n\n  _resizeHandler(entries) {\n    // Disconnect the observer while we process\n    this._resizeObserver.disconnect();\n\n    this._attachIntersectionObservers();\n\n    // Attach the resize observer\n    this._resizeObserver.observe(this);\n  }\n\n  /**\n   * This handler processes the results of the intersection observer\n   */\n  _intersectionCallback(entries, observer) {\n    // Get all the sections that are visible in the viewport\n    entries.forEach(entry => {\n      let section = entry.target.parentNode;\n      if (section.id) {\n        // Find the targeted ID in the references\n        let ref = this.getRefById(section.id);\n        if (ref) {\n          (ref.isVisible = entry.isIntersecting), // && entry.intersectionRatio > 0.5 ? true : false;\n            (ref.intersectionRatio = entry.intersectionRatio);\n        }\n      }\n    });\n\n    this.updateActiveState();\n  }\n}\n\nexport default PfeJumpLinksPanel;\n","/*!\n * PatternFly Elements: PfeJumpLinks 1.9.0\n * @license\n * Copyright 2021 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\n// Import polyfills:\nimport \"./polyfills--pfe-jump-links.js\";\n\nimport PFElement from \"../../pfelement/dist/pfelement\";\n\nimport PfeJumpLinksNav from \"./pfe-jump-links-nav.js\";\nimport PfeJumpLinksPanel from \"./pfe-jump-links-panel.js\";\n\nPFElement.create(PfeJumpLinksPanel);\nPFElement.create(PfeJumpLinksNav);\n"],"names":["window","NodeList","prototype","forEach","Array","Number","isInteger","value","isFinite","Math","floor","Element","matches","msMatchesSelector","webkitMatchesSelector","closest","s","el","call","parentElement","parentNode","nodeType","Object","keys","obj","TypeError","k","p","hasOwnProperty","push","PfeJumpLinksNav","horizontal","srText","getSlot","tag","upgrade","PFElement","PfeTypes","Content","autobuild","title","type","Boolean","observer","String","default","color","values","hideLabel","nesting","oldAutobuild","alias","attr","oldHorizontal","oldColor","childList","subtree","characterData","PfeType","delayRender","isIE11","setAttribute","panel","_building","links","panelRefs","activeLinks","build","bind","validateData","getLinkById","closeAccordion","rebuild","setActive","isActive","removeActive","removeAllActive","upgradeA11y","upgradeA11yListItem","connectPanel","_buildItem","_isValidLightDom","_copyListToShadow","_connectLightDOM","_init","_clickHandler","_upgradePanelHandler","_activeItemHandler","_horizontalHandler","_observer","MutationObserver","render","link","removeEventListener","id","getLink","shadowRoot","querySelectorAll","filter","item","hash","length","then","querySelector","collapseAll","navset","tagName","sectionRefs","listItem","checkForAncestors","parentItem","classList","contains","tabindex","hasAttribute","removeAttribute","parentLink","parent","activeChildren","isSubSection","add","className","role","includes","nested","children","child","parentList","label","listItems","nav","evt","detail","scrolltarget","document","body","events","_connectToNav","oldVal","newVal","setTimeout","cssVariable","clientHeight","data","createElement","href","textContent","appendChild","items","wrapper","result","_buildList","set","console","log","outerHTML","disconnect","innerHTML","rendered","observe","observerSettings","key","ref","warn","childOf","lastItem","isVisible","hasLightDOM","logo","cta","Promise","resolve","reject","menu","region","slot","addEventListener","getRefById","replace","preventDefault","entry","getValue","variableName","match","offsetInput","navigation","jumpLinksNav","offset","parseInt","path","refs","capture","behavior","matchMedia","offsetValue","scrollTo","top","getBoundingClientRect","pageYOffset","ids","activeIds","firstId","active","map","PfeJumpLinksPanel","change","activeNavItem","oldOffset","oldScrolltarget","undefined","sections","_sectionReference","_parseSections","_attachIntersectionObservers","_intersectionCallback","_resizeHandler","_intersectionObserver","IntersectionObserver","rootMargin","threshold","fill","_","i","_resizeObserver","ResizeObserver","emitEvent","container","visible","section","intersectionRatio","shift","getAttribute","trim","sets","startsWith","isChild","isParent","sectionRef","toLowerCase","split","word","slice","toUpperCase","join","randomId","newLevel","previousLevel","sibling","buildNav","style","position","entries","target","isIntersecting","updateActiveState","create"],"mappings":"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"}