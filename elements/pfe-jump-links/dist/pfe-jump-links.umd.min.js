!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("../../pfelement/dist/pfelement.umd.min")):"function"==typeof define&&define.amd?define(["../../pfelement/dist/pfelement.umd.min"],t):t((e||self).PFElement)}(this,function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.Number&&!Number.prototype.isInteger&&(Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push(t);return i},Object.keys.forEach=Array.forEach);var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e};function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0!==n){if("value"in n)return n.value;n=n.get;return void 0!==n?n.call(i):void 0}if(null!==(e=Object.getPrototypeOf(e)))return a(e,t,i)}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=(r(c,e),i(c,[{key:"html",get:function(){return'\n<style>:host([hide-label]) .pfe-jump-links-nav__heading>h3{position:absolute;overflow:hidden;clip:rect(0,0,0,0);height:1px;width:1px;margin:-1px;padding:0;border:0}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){:host{color:#151515!important}}:host{--context:var(--pfe-jump-links--context);-webkit-box-sizing:border-box;box-sizing:border-box;font-family:"Red Hat Text",RedHatText,Overpass,Overpass,Arial,sans-serif;font-family:var(--pfe-theme--font-family, "Red Hat Text", "RedHatText", "Overpass", Overpass, Arial, sans-serif);font-weight:400;font-weight:var(--pfe-theme--font-weight--normal,400);font-weight:400;display:block;position:sticky;top:1rem;top:var(--pfe-jump-links-nav--offset,var(--pfe-theme--container-spacer,1rem));padding-left:0;background-color:transparent;background-color:var(--pfe-jump-links--BackgroundColor,transparent);z-index:97;z-index:var(--pfe-theme--zindex--subnavigation,97)}@media (min-width:992px){:host{border:1px solid transparent;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) transparent;padding:0;padding:var(--pfe-jump-links__nav--Padding,0)}}:host([on=light]){--pfe-broadcasted--text:var(--pfe-theme--color--text, #151515);--pfe-broadcasted--link:var(--pfe-theme--color--link, #06c);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover, #004080);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus, #004080);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited, #6753ac);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration, none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover, underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus, underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited, none)}:host([on=dark]){--pfe-broadcasted--text:var(--pfe-theme--color--text--on-dark, #fff);--pfe-broadcasted--link:var(--pfe-theme--color--link--on-dark, #73bcf7);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover--on-dark, #bee1f4);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus--on-dark, #bee1f4);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited--on-dark, #bee1f4);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration--on-dark, none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover--on-dark, underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus--on-dark, underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited--on-dark, none)}:host([sticky=false]){position:relative}.pfe-jump-links-nav__heading>h3{font-family:"Red Hat Display",RedHatDisplay,Overpass,Overpass,Arial,sans-serif;font-family:var(--pfe-theme--font-family--heading, "Red Hat Display", "RedHatDisplay", "Overpass", Overpass, Arial, sans-serif);font-size:.875rem;font-size:var(--pf-c-title--m-sm--FontSize,var(--pf-global--FontSize--sm,.875rem));line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);font-weight:400;font-weight:var(--pfe-theme--font-weight--normal,400);color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42);text-transform:uppercase}.pfe-jump-links-nav__heading>h3:not(:last-child){margin-bottom:1rem;margin-bottom:var(--pfe-theme--content-spacer--heading--sm,1rem)}@media (max-width:991px){.pfe-jump-links-nav__heading>h3{visibility:hidden}}.pfe-jump-links-nav__heading>h3:not(:empty){padding-bottom:1rem;padding-bottom:var(--pfe-theme--container-padding,1rem);border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--surface--border,#d2d2d2)}nav{visibility:visible;margin:0;list-style:none;padding:0}ul{padding:0;border-left:1px solid #d2d2d2;border-left:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2)}li{border-left:4px solid transparent;border-left:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;display:block;text-decoration:none;margin-left:calc(1px * -1);margin-left:calc(var(--pfe-theme--surface--border-width,1px) * -1)}li[active]{border-left-color:#06c;border-left-color:var(--pfe-jump-links--BorderColor,var(--pfe-theme--color--ui-accent,#06c))}a{position:relative;display:table;color:#6a6e73;color:var(--pfe-theme--color--ui-disabled--text,#6a6e73);font-size:1rem;font-size:var(--pfe-jump-links--FontSize,var(--pf-global--FontSize--md,1rem));text-decoration:none;line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);padding-top:calc(calc(1.5rem / 6) * 2);padding-top:calc(var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) * 2);padding-right:calc(calc(1.5rem / 3) * 2);padding-right:calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2);padding-bottom:calc(calc(1.5rem / 6) * 2);padding-bottom:calc(var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) * 2);padding-left:calc(calc(1.5rem / 3) * 2);padding-left:calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2)}.has-sub-section>a{padding-bottom:calc(1.5rem / 6);padding-bottom:var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6))}.sub-section>a{margin-left:calc(1rem * .75);margin-left:calc(var(--pfe-theme--container-spacer,1rem) * .75);font-size:calc(1rem * .85);font-size:calc(var(--pfe-jump-links--FontSize,var(--pf-global--FontSize--md,1rem)) * .85);padding:calc(1.5rem / 6) calc(calc(1.5rem / 3) * 2);padding:var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2)}@media (min-width:992px){.sub-section>a{display:none}}.sub-section>a:last-child{padding-bottom:calc(1.5rem / 3);padding-bottom:var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3))}[aria-expanded=true] .sub-section>a{display:table;height:auto}a:focus{outline:0}a:focus::after{content:"";position:absolute;width:calc(100% - 4px);width:calc(100% - var(--pfe-theme--surface--border-width--heavy,4px));height:calc(100% - 4px);height:calc(100% - var(--pfe-theme--surface--border-width--heavy,4px));top:0;left:0;border-radius:3px;border-radius:var(--pfe-theme--surface--border-radius,3px);border:1px solid #06c;border:var(--pfe-theme--ui--focus-outline-width,1px) var(--pfe-theme--ui--focus-outline-style,solid) var(--pfe-broadcasted--link,#06c)}[active] a,a:hover{color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42)}ul ul{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:0;-ms-flex:0;flex:0;margin:0;padding:0;border-left:none!important;overflow-y:hidden;-webkit-transition:-webkit-box-flex 1s linear;transition:-webkit-box-flex 1s linear;transition:flex 1s linear;transition:flex 1s linear,-webkit-box-flex 1s linear,-ms-flex 1s linear}ul ul li{border-left:none!important}ul ul[aria-expanded=true]{-webkit-box-flex:1;-ms-flex:1;flex:1}:host{--pfe-accordion__panel-container--Padding:0}@media (max-width:767px){:host{--pfe-accordion__panel-container--Padding:20px}}pfe-accordion{z-index:97;z-index:var(--pfe-theme--zindex--subnavigation,97)}@media (max-width:991px){pfe-accordion{border:1px solid #d2d2d2;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2)}}pfe-accordion-header{--pfe-theme--color--surface--border:transparent;--pfe-theme--color--ui-base--on-dark:transparent;--pfe-theme--color--ui-base:transparent;position:sticky;top:0}@media (max-width:991px){pfe-accordion-header{background-color:#fff;background-color:var(--pfe-theme--color--surface--lightest,#fff);--context:var(--pfe-theme--color--surface--lightest--context, light)}}@media (min-width:992px){pfe-accordion-header{visibility:collapse!important;display:none}}pfe-accordion-panel{border-left-color:transparent;border-right:none}@media (min-width:992px){pfe-accordion-panel{visibility:collapse;display:none;opacity:1;display:block}pfe-accordion-panel>pfe-jump-links-nav{width:100%;display:block;visibility:visible}}:host([color=lightest]){background-color:#fff;background-color:var(--pfe-jump-links--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));--context:var(--pfe-theme--color--surface--lightest--context, light)}:host([color=darkest]){background-color:#151515;background-color:var(--pfe-jump-links--BackgroundColor,var(--pfe-theme--color--surface--darkest,#151515));--context:var(--pfe-theme--color--surface--darkest--context, dark);border:1px solid #6a6e73;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled--text,#6a6e73)}:host([horizontal]){padding:0;top:0;top:var(--pfe-jump-links-panel--offset,0);width:100%;z-index:98;z-index:var(--pfe-theme--zindex--navigation,98)}:host([horizontal]) nav{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;padding-left:calc(1rem * 2);padding-left:calc(var(--pfe-theme--container-spacer,1rem) * 2);padding-right:calc(1rem * 2);padding-right:calc(var(--pfe-theme--container-spacer,1rem) * 2)}@media (min-width:992px){:host([horizontal]) nav{padding-left:calc(1rem * 4);padding-left:calc(var(--pfe-theme--container-spacer,1rem) * 4);padding-right:calc(1rem * 4);padding-right:calc(var(--pfe-theme--container-spacer,1rem) * 4)}}:host([horizontal]) nav .pfe-jump-links-nav__heading>h3{-ms-flex-preferred-size:100%;flex-basis:100%;text-align:center}:host([horizontal]) nav ::slotted([slot=logo]){max-height:calc(1rem * 3.5);max-height:calc(var(--pfe-theme--container-spacer,1rem) * 3.5)}:host([horizontal]) nav ::slotted([slot=cta]),:host([horizontal]) nav ::slotted([slot=logo]){max-width:calc(1rem * 7);max-width:calc(var(--pfe-theme--container-spacer,1rem) * 7)}@media (min-width:992px){:host([horizontal]) nav ::slotted([slot=cta]),:host([horizontal]) nav ::slotted([slot=logo]){max-width:calc(1rem * 14);max-width:calc(var(--pfe-theme--container-spacer,1rem) * 14)}}:host([horizontal]) #container{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;justify-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}:host([horizontal]) ul{border:none;text-align:center;-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;padding:0;width:auto;margin:0 auto}:host([horizontal]) ul li{padding:0 calc(1rem * 1.5);padding:0 calc(var(--pfe-theme--container-spacer,1rem) * 1.5);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-top:4px solid transparent;border-top:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;border-bottom:4px solid transparent;border-bottom:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;border-left:none;border-right:none}:host([horizontal]) ul li[active]{border-top:4px solid #06c;border-top:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-accent,#06c)}:host([horizontal]) ul a{text-decoration:none;color:#6a6e73;color:var(--pfe-theme--color--ui-disabled--text,#6a6e73);padding-top:1rem;padding-top:var(--pfe-jump-links__link--vertical-spacer,var(--pfe-theme--container-spacer,1rem));padding-right:1rem;padding-right:var(--pfe-jump-links__link--horizontal-spacer,var(--pfe-theme--container-spacer,1rem));padding-bottom:1rem;padding-bottom:var(--pfe-jump-links__link--vertical-spacer,var(--pfe-theme--container-spacer,1rem));padding-left:1rem;padding-left:var(--pfe-jump-links__link--horizontal-spacer,var(--pfe-theme--container-spacer,1rem))}:host([horizontal]) ul a:hover,[active] :host([horizontal]) ul a{color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42)}@media (max-width:991px){:host([horizontal]) nav{min-height:calc(1rem * 5.5);min-height:calc(var(--pfe-theme--container-spacer,1rem) * 5.5);background-color:#f0f0f0;background-color:var(--pfe-theme--color--surface--lighter,#f0f0f0);--context:var(--pfe-theme--color--surface--lighter--context, light)}:host([horizontal]) .pfe-jump-links-nav{display:none}}:host([hidden]){display:none} /*# sourceMappingURL=pfe-jump-links-nav.min.css.map */</style>\n'+(this.horizontal?'\n\n<nav>\n  <slot class="pfe-jump-links-nav__heading" name="heading">\n    <h3 id="heading">'+(this.srText||"Jump to section")+'</h3>\n  </slot>\n  <slot class="pfe-jump-links-nav__logo" name="logo"></slot>\n  <div id="container"></div>\n  <slot class="pfe-jump-links-nav__cta" name="cta"></slot>\n</nav>\n':"\n\n<pfe-accordion>\n  <pfe-accordion-header>\n    <h3>"+(this.srText||"Jump to section")+'</h3>\n  </pfe-accordion-header>\n  <pfe-accordion-panel>\n    <nav>\n      <slot class="pfe-jump-links-nav__heading" name="heading">\n        <h3 id="heading">'+(this.srText||"Jump to section")+'</h3>\n      </slot>\n      <slot class="pfe-jump-links-nav__logo" name="logo"></slot>\n      <div id="container"></div>\n      <slot class="pfe-jump-links-nav__cta" name="cta"></slot>\n    </nav>\n  </pfe-accordion-panel>\n</pfe-accordion>')}},{key:"templateUrl",get:function(){return"pfe-jump-links-nav.html"}},{key:"styleUrl",get:function(){return"pfe-jump-links-nav.scss"}},{key:"logo",get:function(){return this.getSlot("logo")||this.getSlot(this.tag+"--logo")}},{key:"cta",get:function(){return this.getSlot("link")||this.getSlot(this.tag+"--link")}},{key:"heading",get:function(){return this.getSlot("heading")||this.getSlot(this.tag+"--heading")}}],[{key:"version",get:function(){return"1.9.0"}},{key:"tag",get:function(){return"pfe-jump-links-nav"}},{key:"events",get:function(){return{upgrade:this.tag+":upgraded"}}},{key:"PfeType",get:function(){return e.PfeTypes.Content}},{key:"properties",get:function(){return{autobuild:{title:"Autobuild",type:Boolean},horizontal:{title:"Horizontal",type:Boolean,observer:"_horizontalHandler"},srText:{title:"Navigation label",type:String,default:"Jump to section"},color:{title:"Color",type:String,values:["lightest","lighter","darkest"]},hideLabel:{title:"Hide label",type:Boolean},nesting:{title:"Support nested headings",type:Boolean,default:!0},oldAutobuild:{alias:"autobuild",attr:"pfe-c-autobuild"},oldHorizontal:{alias:"horizontal",attr:"pfe-c-horizontal"},oldColor:{alias:"color",attr:"pfe-color"}}}},{key:"observerSettings",get:function(){return{childList:!0,subtree:!0,characterData:!0}}}]),i(c,[{key:"connectedCallback",value:function(){a(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"connectedCallback",this).call(this),this.isIE11?this.setAttribute("hidden",""):(this._init(),this.render())}},{key:"disconnectedCallback",value:function(){var t=this;a(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"disconnectedCallback",this).call(this),this.links.forEach(function(e){return e.removeEventListener("click",t._clickHandler)})}},{key:"getLinkById",value:function(e){if(e){var t=function(t){var e=this.shadowRoot.querySelectorAll("#container li > a");if(e){e=[].concat(o(e)).filter(function(e){return e.hash==="#"+t});if(!(e.length<=0))return e[0]}},i=t(e);return this._building&&this._building.then(function(){i=t(e)}),i}}},{key:"closeAccordion",value:function(){this.shadowRoot.querySelector("pfe-accordion").collapseAll()}},{key:"rebuild",value:function(e){if(!e){if("pfe-jump-links-panel"!==this.panel.tagName)return;e=this.panel.sectionRefs}this.build(e)}},{key:"setActive",value:function(e){e&&function e(t){t.setAttribute("active","");var i=t.parentElement.closest("li");i&&i!==t&&(i&&t.classList.contains("sub-section")&&(i.setAttribute("active",""),i.querySelector(":scope > ul").setAttribute("aria-expanded","true"),t.tabindex="0"),e(i))}(e.closest("li"))}},{key:"isActive",value:function(e){return!!e&&e.closest("li").hasAttribute("active")}},{key:"removeActive",value:function(e){var r=this;e&&((e=e.closest("li")).removeAttribute("active"),function e(t){var i,n,a=t.parentElement.closest("li");a&&(t.classList.contains("sub-section")?(i=parent.querySelector(":scope > a"),r.isActive(i)&&(n=!1,parent.querySelectorAll("ul > li > a").forEach(function(e){r.isActive(e)&&(n=!0)}),n||(parent.removeAttribute("active"),parent.setAttribute("aria-expanded","false")))):t.classList.contains("has-sub-section")&&t.setAttribute("aria-expanded","false"),t.removeAttribute("active"),t.classList.contains("has-sub-section")&&t.querySelector(":scope > ul").setAttribute("aria-expanded","false"),a&&t.classList.contains("sub-section")&&(a.removeAttribute("active"),a.closest("ul").setAttribute("aria-expanded","false"),t.tabindex="-1"),e(a))}(e))}},{key:"removeAllActive",value:function(){var t=this;this.activeLinks.forEach(function(e){return t.removeActive(e)}),this.activeLinks=[]}},{key:"upgradeA11yListItem",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.querySelector("a");n.classList.add("pfe-jump-links-nav__link"),e.className="pfe-jump-links-nav__item",e.role="treeitem",e.tabindex="0",i&&(e.classList.add("sub-section"),n.tabindex="-1"),0<this.activeLinks.length&&this.activeLinks.includes(n)&&this.setActive(n);n=e.querySelector(":scope > ul");n&&(n.role="group",0<(n=n.querySelectorAll(":scope > li")).length&&(e.classList.add("has-sub-section"),e.setAttribute("aria-expanded","false"),n.forEach(function(e){return t.upgradeA11yListItem(e,!0)})))}},{key:"upgradeA11y",value:function(){var e,t=this,i=this.querySelector("ul")||this.querySelector("ol");i&&(i.classList.add("pfe-jump-links-nav"),i.role="tree",(e=i.closest("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"))&&i.setAttribute("aria-labelledby",e.id),i.querySelectorAll(":scope > li").forEach(function(e){return t.upgradeA11yListItem(e)}))}},{key:"connectPanel",value:function(e){this.panel=e,this.panel.hasAttribute("scrolltarget")||this.panel.setAttribute("scrolltarget",this.id),this.panel.nav||(this.panel.nav=this),this.autobuild&&this.rebuild()}},{key:"_upgradePanelHandler",value:function(e){!e&&!e.detail||(e=e.detail.panel)&&e.scrolltarget===this.id&&(this.connectPanel(e),document.body.removeEventListener("pfe-jump-links-panel:upgraded",this._upgradePanelHandler),document.body.removeEventListener(c.events.upgrade,this.panel._connectToNav))}},{key:"_horizontalHandler",value:function(e,t){var i=this;e!==t&&setTimeout(function(){i.cssVariable(i.tag+"--Height--actual",i.clientHeight+"px",document.body)},1e3)}},{key:"_buildItem",value:function(e){var t=document.createElement("li"),i=document.createElement("a");return i.href="#"+e.id,i.textContent=e.label,t.appendChild(i),t}},{key:"_buildList",value:function(e){var i=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(!(e.length<=0)){var n=document.createElement("ul");return t&&n.setAttribute("aria-labelledby",t),e.forEach(function(e){var t=i._buildItem(e);e.children&&0<e.children.length&&(e=i._buildList(e.children),t.appendChild(e)),n.appendChild(t)}),n}}},{key:"build",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.data||[];e&&(e=this.validateData(e),e=this._buildList(e,"heading"),console.log(e),e.outerHTML&&(this._observer&&this._observer.disconnect(),this.innerHTML=e.outerHTML,this.rendered||this.render(),this._copyListToShadow().then(function(e){return t._connectLightDOM(e)}),this._observer&&this._observer.observe(this,c.observerSettings)))}},{key:"validateData",value:function(){var i=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(0!==n.length){var a=[];return Object.keys(n).forEach(function(e){var t=n[e];t.id||t.ref?t.label?(t.id&&!t.ref&&(t.ref=document.querySelector("#"+t.id)),t.ref?t.childOf?i.horizontal||i.nesting?i.warn("Horizontal jump links do not support nested sections. This item was skipped: #"+t.id):(e=a[a.length-1])&&e.children.push({id:t.id,ref:t.ref,isVisible:t.isVisible||!1,label:t.label,children:[]}):a.push({id:t.id,ref:t.ref,isVisible:t.isVisible||!1,label:t.label,children:[]}):i.warn("If pointing to content inside a ShadowRoot, please provide the ref key with a pointer to that heading element.")):i.warn("Objects requires a label for the heading link."):i.warn("Objects requires at least an ID or a pointer to the heading element.")}),a}}},{key:"_isValidLightDom",value:function(){return this.hasLightDOM()&&(this.querySelector("ul")||this.querySelector("ol"))?(!this.logo&&!this.cta||this.horizontal||this.warn("logo and link slots are %cnot%c supported in vertical jump links","font-style: italic",""),!0):(this.warn("You must have a <ul> or <ol> tag in the light DOM or use the autobuild attribute."),!1)}},{key:"_copyListToShadow",value:function(){var n=this;return new Promise(function(e,t){var i=n.querySelector("ul")||n.querySelector("ol");i||t("No menu elements (ul or ol) could be foundin the light DOM."),n.upgradeA11y(),n.rendered||n.render(),n.shadowRoot.querySelector("#container").innerHTML=i.outerHTML,e(n.shadowRoot.querySelectorAll("#container li > a"))})}},{key:"_init",value:function(){var e=this;["logo","cta","heading"].forEach(function(t){e.getSlot(e.tag+"--"+t).forEach(function(e){e.setAttribute("slot",t)})}),(this.autobuild||this._isValidLightDom())&&this.autobuild&&this.panel&&this.build(this.panel.sectionRefs)}},{key:"_connectLightDOM",value:function(e){var t=this;this.panelRefs=[],e.forEach(function(e){e.addEventListener("click",t._clickHandler),!t.panel||(e=t.panel.getRefById(e.hash.replace(/^#/,"")))&&t.panelRefs.push(e)}),0<(this.links=e).length&&this.removeAttribute("hidden")}},{key:"_clickHandler",value:function(e){var i=this;e.preventDefault();var t,n,a=void 0,r=function(e){var t=i.cssVariable(e);if(t)return Number.isInteger(Number(t))||t.match(/px$/)||i.warn("Using an integer with a unit (other than px) is not supported for custom property "+e+". Received "+t+". The component strips the unit using parseInt(). For example, 1rem would become 1 and behave as if you had entered 1px."),t},o=r(this.tag+"--offset")||0,s=r("pfe-navigation--Height--actual")||0,r=r("pfe-jump-links-nav--Height--actual")||r("pfe-jump-links--nav-height")||0,r=parseInt(o)+parseInt(s)+parseInt(r)+8||200;e&&e.path&&e.path[0]&&e.path[0].hash&&(e=e.path[0].hash,t=e.replace(/^#/,""),e&&(this.panel&&(n=this.panel.sectionRefs,a=(a=1===(n=Object.values(n).filter(function(e){return e.id===t})).length?n[0].ref:a)||this.panel.querySelector(e)||this.panel.shadowRoot.querySelector(e)),(a=a||document.querySelector(e))?(n="smooth",window.matchMedia("(prefers-reduced-motion)").matches&&(n="auto"),this.panel&&(r=this.panel.offsetValue),window.scrollTo({top:a.getBoundingClientRect().top+window.pageYOffset-r,behavior:n}),window.matchMedia("(min-width: 992px)").matches||setTimeout(this.closeAccordion,750)):this.warn("A corresponding panel was not found for "+e)))}},{key:"_activeItemHandler",value:function(e){var t=this,i=e.detail.panel,n=e.detail.activeIds;if(i&&(!i||i.scrolltarget===this.id))if(!this.autobuild||this.autobuild&&this._building)if(n&&0!==n.length){n=n[0];if(n){var a=this.getLinkById(n);i.getRefById(n);if(a){if(0<this.activeLinks.length){if(0<this.activeLinks.filter(function(e){return e===a}).length)return;this.removeAllActive()}this.activeLinks.push(a),this.activeLinks.map(function(e){return t.setActive(e)})}}}else this.removeAllActive();else setTimeout(this._activeItemHandler(e),100)}}]),c);function c(){t(this,c);var e=s(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,{type:c.PfeType,delayRender:!0}));return e.isIE11?(e.setAttribute("hidden",""),s(e)):(e.panel,e._building,e.links,e.panelRefs=[],e.activeLinks=[],e.build=e.build.bind(e),e.validateData=e.validateData.bind(e),e.getLinkById=e.getLinkById.bind(e),e.closeAccordion=e.closeAccordion.bind(e),e.rebuild=e.rebuild.bind(e),e.setActive=e.setActive.bind(e),e.isActive=e.isActive.bind(e),e.removeActive=e.removeActive.bind(e),e.removeAllActive=e.removeAllActive.bind(e),e.upgradeA11y=e.upgradeA11y.bind(e),e.upgradeA11yListItem=e.upgradeA11yListItem.bind(e),e.connectPanel=e.connectPanel.bind(e),e._buildItem=e._buildItem.bind(e),e._isValidLightDom=e._isValidLightDom.bind(e),e._copyListToShadow=e._copyListToShadow.bind(e),e._connectLightDOM=e._connectLightDOM.bind(e),e._init=e._init.bind(e),e._clickHandler=e._clickHandler.bind(e),e._upgradePanelHandler=e._upgradePanelHandler.bind(e),e._activeItemHandler=e._activeItemHandler.bind(e),e._horizontalHandler=e._horizontalHandler.bind(e),e._observer=new MutationObserver(e._init),e)}r(d,e),i(d,[{key:"html",get:function(){return"<style>:host { display: block; } :host([hidden]) { display: none; }</style><slot></slot>"}},{key:"offsetValue",get:function(){var i=this,e=function(e){var t=i.cssVariable(e);if(t)return Number.isInteger(Number(t))||t.match(/px$/)||i.warn("Using an integer with a unit (other than px) is not supported for custom property "+e+". Received "+t+". The component strips the unit using parseInt(). For example, 1rem would become 1 and behave as if you had entered 1px."),t},t=this.offset||e(this.tag+"--offset")||0,n=e("pfe-navigation--Height--actual")||0,e=e("pfe-jump-links-nav--Height--actual")||e("pfe-jump-links--nav-height")||0;return parseInt(t)+parseInt(n)+parseInt(e)+8||200}}],[{key:"version",get:function(){return"1.9.0"}},{key:"tag",get:function(){return"pfe-jump-links-panel"}},{key:"events",get:function(){return{change:this.tag+":change",activeNavItem:this.tag+":active-navItem",upgrade:this.tag+":upgraded"}}},{key:"PfeType",get:function(){return e.PfeTypes.Content}},{key:"properties",get:function(){return{offset:{title:"Offset",type:Number,observer:"_offsetChanged"},scrolltarget:{title:"Scroll target",type:String},oldOffset:{alias:"offset",attr:"pfe-c-offset"},oldScrolltarget:{alias:"scrolltarget",attr:"pfe-c-scrolltarget"}}}},{key:"observerSettings",get:function(){return{childList:!0,subtree:!0,characterData:!0}}}]),i(d,[{key:"connectedCallback",value:function(){a(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"connectedCallback",this).call(this),this._init(),this.sections&&this.emitEvent(d.events.upgrade,{detail:{panel:this,sections:this.sections,navigation:this.sectionRefs}}),this._observer.observe(this,d.observerSettings)}},{key:"disconnectedCallback",value:function(){var t=this;a(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"disconnectedCallback",this).call(this),this._observer.disconnect(),this._resizeObserver.disconnect(),this.querySelectorAll("[section-container]").forEach(function(e){return t._intersectionObserver.disconnect(e)}),document.body.removeEventListener("pfe-jump-links-nav:upgraded",this._connectToNav)}},{key:"getRefById",value:function(t){return Object.values(this.sectionRefs).filter(function(e){return e.id===t})[0]}},{key:"updateActiveState",value:function(){var e=Object.values(this.sectionRefs).filter(function(e){return e.isVisible});2<e.length&&e[0].intersectionRatio<1&&.5<e[1].intersectionRatio&&e.shift(),this.emitEvent(d.events.activeNavItem,{detail:{panel:this,activeIds:e.map(function(e){return e.id})}})}},{key:"_connectToNav",value:function(e){e.detail&&e.detail.nav&&e.detail.nav.id===this.scrolltarget&&(this.nav=e.detail.nav,this.nav&&(document.body.removeEventListener("pfe-jump-links-nav:upgraded",this._connectToNav),document.body.removeEventListener(d.events.upgrade,this.nav._upgradePanelHandler),this.cssVariable("--pfe-jump-links-nav--offset",this.offsetValue+"px",this.nav),this.nav.panel?this.nav.autobuild&&this.nav.rebuild(this.sectionRefs):(this.nav.connectPanel(this),this.nav._init())))}},{key:"_sectionReference",value:function(e){return{id:e.id,ref:e,isVisible:!1,label:(e.getAttribute("nav-label")||e.textContent).trim(),childOf:null}}},{key:"_parseSections",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"classes",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(0===e.length)return t;var a=e[0];("classes"===i&&!a.classList.contains("pfe-jump-links-panel__section")||"classes"!==i&&!a.tagName.startsWith("H"))&&e.shift();var r,o,s=!1,l=!1,c=this._sectionReference(a);return a.id||(c.label?a.id=c.label.toLowerCase().replace(/\./,"").split(" ").map(function(e){return""+e.slice(0,1).toUpperCase()+e.slice(1)}).join(""):a.id=this.randomId),"classes"===i?n&&n.ref&&(l=n.ref.classList.contains("sub-section")&&!a.classList.contains("sub-section"),s=n.ref.classList.contains("has-sub-section")&&a.classList.contains("sub-section")):(r=a.tagName.slice(1,2),a=1,s=(a=n.ref?n.ref.tagName.slice(1,2):a)<r,l=r<a),s?c.childOf=n.id:!l&&n.childOf?c.childOf=n.childOf:l&&(l=void 0,0<(o=Object.values(t).filter(function(e){return e.id===n.id})).length&&o[0].childOf&&0<(l=Object.values(t).filter(function(e){return e.id===o[0].childOf})).length&&l[0].childOf&&(c.childOf=l[0].childOf)),t.push(c),e.shift(),this._parseSections(e,t,i,c)}},{key:"_init",value:function(){this.sections=this.querySelectorAll(".pfe-jump-links-panel__section"),0<this.sections.length&&(this.sectionRefs=this._parseSections([].concat(o(this.sections)))),this.sections.length<=0&&(this.warn("No elements in "+this.tag+" included the ."+this.tag+"__section class. Grepping instead for h-level tags as a fallback."),this.sections=this.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),this.sections&&(this.sectionRefs=this._parseSections([].concat(o(this.sections)),[],"markup"))),0<this.sectionRefs.length&&this.nav&&this.nav.buildNav(this.sectionRefs),this.style.position="relative",this._attachIntersectionObservers(),this.nav&&this.cssVariable("--pfe-jump-links-nav--offset",this.offsetValue+"px",this.nav),this._resizeObserver.observe(this)}},{key:"_attachIntersectionObservers",value:function(){var t=this;this.sections.forEach(function(e){return t._intersectionObserver.observe(e)})}},{key:"_resizeHandler",value:function(e){this._resizeObserver.disconnect(),this._attachIntersectionObservers(),this._resizeObserver.observe(this)}},{key:"_intersectionCallback",value:function(e,t){var i=this;e.forEach(function(e){var t=e.target.parentNode;!t.id||(t=i.getRefById(t.id))&&(t.isVisible=e.isIntersecting,t.intersectionRatio=e.intersectionRatio)}),this.updateActiveState()}}]),i=d;function d(){t(this,d);var e=s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,d,{type:d.PfeType}));return e.nav=void 0,e.sections=[],e.sectionRefs={},e._connectToNav=e._connectToNav.bind(e),e._sectionReference=e._sectionReference.bind(e),e._parseSections=e._parseSections.bind(e),e._init=e._init.bind(e),e._attachIntersectionObservers=e._attachIntersectionObservers.bind(e),e._intersectionCallback=e._intersectionCallback.bind(e),e._resizeHandler=e._resizeHandler.bind(e),e._observer=new MutationObserver(e._init),e._intersectionObserver=new IntersectionObserver(e._intersectionCallback,{rootMargin:e.offsetValue+"px 0px 0px 0px",threshold:Array(100).fill().map(function(e,t){return t/100||0})}),e._resizeObserver=new ResizeObserver(e._resizeHandler),e.nav||document.body.addEventListener("pfe-jump-links-nav:upgraded",e._connectToNav),e}e.create(i),e.create(l)});
//# sourceMappingURL=pfe-jump-links.umd.min.js.map
