import e from"../../pfelement/dist/pfelement.min.js";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.Number&&!Number.prototype.isInteger&&(Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push(t);return i},Object.keys.forEach=Array.forEach)
/*!
 * PatternFly Elements: PfeJumpLinks 1.9.0
 * @license
 * Copyright 2021 Red Hat, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
*/;class t extends e{static get version(){return"1.9.0"}get html(){return'\n<style>:host([hide-label]) .pfe-jump-links-nav__heading>h3{position:absolute;overflow:hidden;clip:rect(0,0,0,0);height:1px;width:1px;margin:-1px;padding:0;border:0}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){:host{color:#151515!important}}:host{--context:var(--pfe-jump-links--context);-webkit-box-sizing:border-box;box-sizing:border-box;font-family:"Red Hat Text",RedHatText,Overpass,Overpass,Arial,sans-serif;font-family:var(--pfe-theme--font-family, "Red Hat Text", "RedHatText", "Overpass", Overpass, Arial, sans-serif);font-weight:400;font-weight:var(--pfe-theme--font-weight--normal,400);font-weight:400;display:block;position:sticky;top:1rem;top:var(--pfe-jump-links-nav--offset,var(--pfe-theme--container-spacer,1rem));padding-left:0;background-color:transparent;background-color:var(--pfe-jump-links--BackgroundColor,transparent);z-index:97;z-index:var(--pfe-theme--zindex--subnavigation,97)}@media (min-width:992px){:host{border:1px solid transparent;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) transparent;padding:0;padding:var(--pfe-jump-links__nav--Padding,0)}}:host([on=light]){--pfe-broadcasted--text:var(--pfe-theme--color--text, #151515);--pfe-broadcasted--link:var(--pfe-theme--color--link, #06c);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover, #004080);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus, #004080);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited, #6753ac);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration, none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover, underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus, underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited, none)}:host([on=dark]){--pfe-broadcasted--text:var(--pfe-theme--color--text--on-dark, #fff);--pfe-broadcasted--link:var(--pfe-theme--color--link--on-dark, #73bcf7);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover--on-dark, #bee1f4);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus--on-dark, #bee1f4);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited--on-dark, #bee1f4);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration--on-dark, none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover--on-dark, underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus--on-dark, underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited--on-dark, none)}:host([sticky=false]){position:relative}.pfe-jump-links-nav__heading>h3{font-family:"Red Hat Display",RedHatDisplay,Overpass,Overpass,Arial,sans-serif;font-family:var(--pfe-theme--font-family--heading, "Red Hat Display", "RedHatDisplay", "Overpass", Overpass, Arial, sans-serif);font-size:.875rem;font-size:var(--pf-c-title--m-sm--FontSize,var(--pf-global--FontSize--sm,.875rem));line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);font-weight:400;font-weight:var(--pfe-theme--font-weight--normal,400);color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42);text-transform:uppercase}.pfe-jump-links-nav__heading>h3:not(:last-child){margin-bottom:1rem;margin-bottom:var(--pfe-theme--content-spacer--heading--sm,1rem)}@media (max-width:991px){.pfe-jump-links-nav__heading>h3{visibility:hidden}}.pfe-jump-links-nav__heading>h3:not(:empty){padding-bottom:1rem;padding-bottom:var(--pfe-theme--container-padding,1rem);border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--surface--border,#d2d2d2)}nav{visibility:visible;margin:0;list-style:none;padding:0}ul{padding:0;border-left:1px solid #d2d2d2;border-left:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2)}li{border-left:4px solid transparent;border-left:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;display:block;text-decoration:none;margin-left:calc(1px * -1);margin-left:calc(var(--pfe-theme--surface--border-width,1px) * -1)}li[active]{border-left-color:#06c;border-left-color:var(--pfe-jump-links--BorderColor,var(--pfe-theme--color--ui-accent,#06c))}a{position:relative;display:table;color:#6a6e73;color:var(--pfe-theme--color--ui-disabled--text,#6a6e73);font-size:1rem;font-size:var(--pfe-jump-links--FontSize,var(--pf-global--FontSize--md,1rem));text-decoration:none;line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);padding-top:calc(calc(1.5rem / 6) * 2);padding-top:calc(var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) * 2);padding-right:calc(calc(1.5rem / 3) * 2);padding-right:calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2);padding-bottom:calc(calc(1.5rem / 6) * 2);padding-bottom:calc(var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) * 2);padding-left:calc(calc(1.5rem / 3) * 2);padding-left:calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2)}.has-sub-section>a{padding-bottom:calc(1.5rem / 6);padding-bottom:var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6))}.sub-section>a{margin-left:calc(1rem * .75);margin-left:calc(var(--pfe-theme--container-spacer,1rem) * .75);font-size:calc(1rem * .85);font-size:calc(var(--pfe-jump-links--FontSize,var(--pf-global--FontSize--md,1rem)) * .85);padding:calc(1.5rem / 6) calc(calc(1.5rem / 3) * 2);padding:var(--pfe-jump-links__link--vertical-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 6)) calc(var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3)) * 2)}@media (min-width:992px){.sub-section>a{display:none}}.sub-section>a:last-child{padding-bottom:calc(1.5rem / 3);padding-bottom:var(--pfe-jump-links__link--horizontal-spacer,calc(var(--pfe-theme--content-spacer,1.5rem)/ 3))}[aria-expanded=true] .sub-section>a{display:table;height:auto}a:focus{outline:0}a:focus::after{content:"";position:absolute;width:calc(100% - 4px);width:calc(100% - var(--pfe-theme--surface--border-width--heavy,4px));height:calc(100% - 4px);height:calc(100% - var(--pfe-theme--surface--border-width--heavy,4px));top:0;left:0;border-radius:3px;border-radius:var(--pfe-theme--surface--border-radius,3px);border:1px solid #06c;border:var(--pfe-theme--ui--focus-outline-width,1px) var(--pfe-theme--ui--focus-outline-style,solid) var(--pfe-broadcasted--link,#06c)}[active] a,a:hover{color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42)}ul ul{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:0;-ms-flex:0;flex:0;margin:0;padding:0;border-left:none!important;overflow-y:hidden;-webkit-transition:-webkit-box-flex 1s linear;transition:-webkit-box-flex 1s linear;transition:flex 1s linear;transition:flex 1s linear,-webkit-box-flex 1s linear,-ms-flex 1s linear}ul ul li{border-left:none!important}ul ul[aria-expanded=true]{-webkit-box-flex:1;-ms-flex:1;flex:1}:host{--pfe-accordion__panel-container--Padding:0}@media (max-width:767px){:host{--pfe-accordion__panel-container--Padding:20px}}pfe-accordion{z-index:97;z-index:var(--pfe-theme--zindex--subnavigation,97)}@media (max-width:991px){pfe-accordion{border:1px solid #d2d2d2;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled,#d2d2d2)}}pfe-accordion-header{--pfe-theme--color--surface--border:transparent;--pfe-theme--color--ui-base--on-dark:transparent;--pfe-theme--color--ui-base:transparent;position:sticky;top:0}@media (max-width:991px){pfe-accordion-header{background-color:#fff;background-color:var(--pfe-theme--color--surface--lightest,#fff);--context:var(--pfe-theme--color--surface--lightest--context, light)}}@media (min-width:992px){pfe-accordion-header{visibility:collapse!important;display:none}}pfe-accordion-panel{border-left-color:transparent;border-right:none}@media (min-width:992px){pfe-accordion-panel{visibility:collapse;display:none;opacity:1;display:block}pfe-accordion-panel>pfe-jump-links-nav{width:100%;display:block;visibility:visible}}:host([color=lightest]){background-color:#fff;background-color:var(--pfe-jump-links--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));--context:var(--pfe-theme--color--surface--lightest--context, light)}:host([color=darkest]){background-color:#151515;background-color:var(--pfe-jump-links--BackgroundColor,var(--pfe-theme--color--surface--darkest,#151515));--context:var(--pfe-theme--color--surface--darkest--context, dark);border:1px solid #6a6e73;border:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-disabled--text,#6a6e73)}:host([horizontal]){padding:0;top:0;top:var(--pfe-jump-links-panel--offset,0);width:100%;z-index:98;z-index:var(--pfe-theme--zindex--navigation,98)}:host([horizontal]) nav{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;padding-left:calc(1rem * 2);padding-left:calc(var(--pfe-theme--container-spacer,1rem) * 2);padding-right:calc(1rem * 2);padding-right:calc(var(--pfe-theme--container-spacer,1rem) * 2)}@media (min-width:992px){:host([horizontal]) nav{padding-left:calc(1rem * 4);padding-left:calc(var(--pfe-theme--container-spacer,1rem) * 4);padding-right:calc(1rem * 4);padding-right:calc(var(--pfe-theme--container-spacer,1rem) * 4)}}:host([horizontal]) nav .pfe-jump-links-nav__heading>h3{-ms-flex-preferred-size:100%;flex-basis:100%;text-align:center}:host([horizontal]) nav ::slotted([slot=logo]){max-height:calc(1rem * 3.5);max-height:calc(var(--pfe-theme--container-spacer,1rem) * 3.5)}:host([horizontal]) nav ::slotted([slot=cta]),:host([horizontal]) nav ::slotted([slot=logo]){max-width:calc(1rem * 7);max-width:calc(var(--pfe-theme--container-spacer,1rem) * 7)}@media (min-width:992px){:host([horizontal]) nav ::slotted([slot=cta]),:host([horizontal]) nav ::slotted([slot=logo]){max-width:calc(1rem * 14);max-width:calc(var(--pfe-theme--container-spacer,1rem) * 14)}}:host([horizontal]) #container{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;justify-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}:host([horizontal]) ul{border:none;text-align:center;-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;padding:0;width:auto;margin:0 auto}:host([horizontal]) ul li{padding:0 calc(1rem * 1.5);padding:0 calc(var(--pfe-theme--container-spacer,1rem) * 1.5);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-top:4px solid transparent;border-top:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;border-bottom:4px solid transparent;border-bottom:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;border-left:none;border-right:none}:host([horizontal]) ul li[active]{border-top:4px solid #06c;border-top:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--ui-accent,#06c)}:host([horizontal]) ul a{text-decoration:none;color:#6a6e73;color:var(--pfe-theme--color--ui-disabled--text,#6a6e73);padding-top:1rem;padding-top:var(--pfe-jump-links__link--vertical-spacer,var(--pfe-theme--container-spacer,1rem));padding-right:1rem;padding-right:var(--pfe-jump-links__link--horizontal-spacer,var(--pfe-theme--container-spacer,1rem));padding-bottom:1rem;padding-bottom:var(--pfe-jump-links__link--vertical-spacer,var(--pfe-theme--container-spacer,1rem));padding-left:1rem;padding-left:var(--pfe-jump-links__link--horizontal-spacer,var(--pfe-theme--container-spacer,1rem))}:host([horizontal]) ul a:hover,[active] :host([horizontal]) ul a{color:#3c3f42;color:var(--pfe-broadcasted--text,#3c3f42)}@media (max-width:991px){:host([horizontal]) nav{min-height:calc(1rem * 5.5);min-height:calc(var(--pfe-theme--container-spacer,1rem) * 5.5);background-color:#f0f0f0;background-color:var(--pfe-theme--color--surface--lighter,#f0f0f0);--context:var(--pfe-theme--color--surface--lighter--context, light)}:host([horizontal]) .pfe-jump-links-nav{display:none}}:host([hidden]){display:none} /*# sourceMappingURL=pfe-jump-links-nav.min.css.map */</style>\n'+(this.horizontal?`\n\n<nav>\n  <slot class="pfe-jump-links-nav__heading" name="heading">\n    <h3 id="heading">${this.srText?this.srText:"Jump to section"}</h3>\n  </slot>\n  <slot class="pfe-jump-links-nav__logo" name="logo"></slot>\n  <div id="container"></div>\n  <slot class="pfe-jump-links-nav__cta" name="cta"></slot>\n</nav>\n`:`\n\n<pfe-accordion>\n  <pfe-accordion-header>\n    <h3>${this.srText?this.srText:"Jump to section"}</h3>\n  </pfe-accordion-header>\n  <pfe-accordion-panel>\n    <nav>\n      <slot class="pfe-jump-links-nav__heading" name="heading">\n        <h3 id="heading">${this.srText?this.srText:"Jump to section"}</h3>\n      </slot>\n      <slot class="pfe-jump-links-nav__logo" name="logo"></slot>\n      <div id="container"></div>\n      <slot class="pfe-jump-links-nav__cta" name="cta"></slot>\n    </nav>\n  </pfe-accordion-panel>\n</pfe-accordion>`)}static get tag(){return"pfe-jump-links-nav"}get templateUrl(){return"pfe-jump-links-nav.html"}get styleUrl(){return"pfe-jump-links-nav.scss"}static get events(){return{upgrade:this.tag+":upgraded"}}static get PfeType(){return e.PfeTypes.Content}static get properties(){return{autobuild:{title:"Autobuild",type:Boolean},horizontal:{title:"Horizontal",type:Boolean,observer:"_horizontalHandler"},srText:{title:"Navigation label",type:String,default:"Jump to section"},color:{title:"Color",type:String,values:["lightest","lighter","darkest"]},hideLabel:{title:"Hide label",type:Boolean},nesting:{title:"Support nested headings",type:Boolean,default:!0},oldAutobuild:{alias:"autobuild",attr:"pfe-c-autobuild"},oldHorizontal:{alias:"horizontal",attr:"pfe-c-horizontal"},oldColor:{alias:"color",attr:"pfe-color"}}}static get observerSettings(){return{childList:!0,subtree:!0,characterData:!0}}get logo(){return this.getSlot("logo")||this.getSlot(this.tag+"--logo")}get cta(){return this.getSlot("link")||this.getSlot(this.tag+"--link")}get heading(){return this.getSlot("heading")||this.getSlot(this.tag+"--heading")}constructor(){super(t,{type:t.PfeType,delayRender:!0}),this.isIE11?this.setAttribute("hidden",""):(this.panel,this._building,this.links,this.panelRefs=[],this.activeLinks=[],this.build=this.build.bind(this),this.validateData=this.validateData.bind(this),this.getLinkById=this.getLinkById.bind(this),this.closeAccordion=this.closeAccordion.bind(this),this.rebuild=this.rebuild.bind(this),this.setActive=this.setActive.bind(this),this.isActive=this.isActive.bind(this),this.removeActive=this.removeActive.bind(this),this.removeAllActive=this.removeAllActive.bind(this),this.upgradeA11y=this.upgradeA11y.bind(this),this.upgradeA11yListItem=this.upgradeA11yListItem.bind(this),this.connectPanel=this.connectPanel.bind(this),this._buildItem=this._buildItem.bind(this),this._isValidLightDom=this._isValidLightDom.bind(this),this._copyListToShadow=this._copyListToShadow.bind(this),this._connectLightDOM=this._connectLightDOM.bind(this),this._init=this._init.bind(this),this._clickHandler=this._clickHandler.bind(this),this._upgradePanelHandler=this._upgradePanelHandler.bind(this),this._activeItemHandler=this._activeItemHandler.bind(this),this._horizontalHandler=this._horizontalHandler.bind(this),this._observer=new MutationObserver(this._init))}connectedCallback(){super.connectedCallback(),this.isIE11?this.setAttribute("hidden",""):(this._init(),this.render())}disconnectedCallback(){super.disconnectedCallback(),this.links.forEach(e=>e.removeEventListener("click",this._clickHandler))}getLinkById(e){if(!e)return;let t=function(e){const t=this.shadowRoot.querySelectorAll("#container li > a");if(!t)return;const i=[...t].filter(t=>t.hash==="#"+e);return i.length<=0?void 0:i[0]},i=t(e);return this._building&&this._building.then(()=>{i=t(e)}),i}closeAccordion(){this.shadowRoot.querySelector("pfe-accordion").collapseAll()}rebuild(e){if(!e){if("pfe-jump-links-panel"!==this.panel.tagName)return;e=this.panel.sectionRefs}this.build(e)}setActive(e){if(!e)return;const t=e.closest("li"),i=e=>{e.setAttribute("active","");const t=e.parentElement.closest("li");t&&t!==e&&(t&&e.classList.contains("sub-section")&&(t.setAttribute("active",""),t.querySelector(":scope > ul").setAttribute("aria-expanded","true"),e.tabindex="0"),i(t))};i(t)}isActive(e){if(!e)return!1;return e.closest("li").hasAttribute("active")}removeActive(e){if(!e)return;const t=e.closest("li");t.removeAttribute("active");const i=e=>{const t=e.parentElement.closest("li");if(t){if(e.classList.contains("sub-section")){const e=parent.querySelector(":scope > a");if(this.isActive(e)){let e=!1;parent.querySelectorAll("ul > li > a").forEach(t=>{this.isActive(t)&&(e=!0)}),e||(parent.removeAttribute("active"),parent.setAttribute("aria-expanded","false"))}}else e.classList.contains("has-sub-section")&&e.setAttribute("aria-expanded","false");e.removeAttribute("active"),e.classList.contains("has-sub-section")&&e.querySelector(":scope > ul").setAttribute("aria-expanded","false"),t&&e.classList.contains("sub-section")&&(t.removeAttribute("active"),t.closest("ul").setAttribute("aria-expanded","false"),e.tabindex="-1"),i(t)}};i(t)}removeAllActive(){this.activeLinks.forEach(e=>this.removeActive(e)),this.activeLinks=[]}upgradeA11yListItem(e,t=!1){const i=e.querySelector("a");i.classList.add("pfe-jump-links-nav__link"),e.className="pfe-jump-links-nav__item",e.role="treeitem",e.tabindex="0",t&&(e.classList.add("sub-section"),i.tabindex="-1"),this.activeLinks.length>0&&this.activeLinks.includes(i)&&this.setActive(i);let a=e.querySelector(":scope > ul");if(a){a.role="group";const t=a.querySelectorAll(":scope > li");t.length>0&&(e.classList.add("has-sub-section"),e.setAttribute("aria-expanded","false"),t.forEach(e=>this.upgradeA11yListItem(e,!0)))}}upgradeA11y(){const e=this.querySelector("ul")||this.querySelector("ol");if(!e)return;e.classList.add("pfe-jump-links-nav"),e.role="tree";const t=e.closest("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]");t&&e.setAttribute("aria-labelledby",t.id);e.querySelectorAll(":scope > li").forEach(e=>this.upgradeA11yListItem(e))}connectPanel(e){this.panel=e,this.panel.hasAttribute("scrolltarget")||this.panel.setAttribute("scrolltarget",this.id),this.panel.nav||(this.panel.nav=this),this.autobuild&&this.rebuild()}_upgradePanelHandler(e){if(!e&&!e.detail)return;let i=e.detail.panel;i&&i.scrolltarget===this.id&&(this.connectPanel(i),document.body.removeEventListener("pfe-jump-links-panel:upgraded",this._upgradePanelHandler),document.body.removeEventListener(t.events.upgrade,this.panel._connectToNav))}_horizontalHandler(e,t){e!==t&&setTimeout(()=>{this.cssVariable(this.tag+"--Height--actual",this.clientHeight+"px",document.body)},1e3)}_buildItem(e){let t=document.createElement("li"),i=document.createElement("a");return i.href="#"+e.id,i.textContent=e.label,t.appendChild(i),t}_buildList(e,t=null){if(e.length<=0)return;let i=document.createElement("ul");return t&&i.setAttribute("aria-labelledby",t),e.forEach(e=>{let t=this._buildItem(e);if(e.children&&e.children.length>0){let i=this._buildList(e.children);t.appendChild(i)}i.appendChild(t)}),i}build(e=this.data||[]){if(!e)return;let i=this.validateData(e),a=this._buildList(i,"heading");console.log(a),a.outerHTML&&(this._observer&&this._observer.disconnect(),this.innerHTML=a.outerHTML,this.rendered||this.render(),this._copyListToShadow().then(e=>this._connectLightDOM(e)),this._observer&&this._observer.observe(this,t.observerSettings))}validateData(e=[]){if(0===e.length)return;let t=[];return Object.keys(e).forEach(i=>{let a=e[i];if(a.id||a.ref)if(a.label)if(a.id&&!a.ref&&(a.ref=document.querySelector("#"+a.id)),a.ref)if(a.childOf)if(this.horizontal||this.nesting)this.warn("Horizontal jump links do not support nested sections. This item was skipped: #"+a.id);else{let e=t[t.length-1];e&&e.children.push({id:a.id,ref:a.ref,isVisible:a.isVisible||!1,label:a.label,children:[]})}else t.push({id:a.id,ref:a.ref,isVisible:a.isVisible||!1,label:a.label,children:[]});else this.warn("If pointing to content inside a ShadowRoot, please provide the ref key with a pointer to that heading element.");else this.warn("Objects requires a label for the heading link.");else this.warn("Objects requires at least an ID or a pointer to the heading element.")}),t}_isValidLightDom(){return this.hasLightDOM()&&(this.querySelector("ul")||this.querySelector("ol"))?(!this.logo&&!this.cta||this.horizontal||this.warn("logo and link slots are %cnot%c supported in vertical jump links","font-style: italic",""),!0):(this.warn("You must have a <ul> or <ol> tag in the light DOM or use the autobuild attribute."),!1)}_copyListToShadow(){return new Promise((e,t)=>{const i=this.querySelector("ul")||this.querySelector("ol");i||t("No menu elements (ul or ol) could be foundin the light DOM."),this.upgradeA11y(),this.rendered||this.render(),this.shadowRoot.querySelector("#container").innerHTML=i.outerHTML,e(this.shadowRoot.querySelectorAll("#container li > a"))})}_init(){if(["logo","cta","heading"].forEach(e=>{this.getSlot(`${this.tag}--${e}`).forEach(t=>{t.setAttribute("slot",e)})}),(this.autobuild||this._isValidLightDom())&&this.autobuild){if(!this.panel)return;this.build(this.panel.sectionRefs)}}_connectLightDOM(e){this.panelRefs=[],e.forEach(e=>{if(e.addEventListener("click",this._clickHandler),this.panel){const t=this.panel.getRefById(e.hash.replace(/^#/,""));t&&this.panelRefs.push(t)}}),this.links=e,e.length>0&&this.removeAttribute("hidden")}_clickHandler(e){let t;e.preventDefault();const i=e=>{const t=this.cssVariable(e);if(t)return Number.isInteger(Number(t))||t.match(/px$/)||this.warn(`Using an integer with a unit (other than px) is not supported for custom property ${e}. Received ${t}. The component strips the unit using parseInt(). For example, 1rem would become 1 and behave as if you had entered 1px.`),t};let a=i(this.tag+"--offset")||0,s=i("pfe-navigation--Height--actual")||0,r=i("pfe-jump-links-nav--Height--actual")||i("pfe-jump-links--nav-height")||0,n=parseInt(a)+parseInt(s)+parseInt(r)+8||200;if(!(e&&e.path&&e.path[0]&&e.path[0].hash))return;const o=e.path[0].hash,l=o.replace(/^#/,"");if(!o)return;if(this.panel){const e=this.panel.sectionRefs,i=Object.values(e).filter(e=>e.id===l);1===i.length&&(t=i[0].ref),t||(t=this.panel.querySelector(o)||this.panel.shadowRoot.querySelector(o))}if(t||(t=document.querySelector(o)),!t)return void this.warn("A corresponding panel was not found for "+o);let c="smooth";window.matchMedia("(prefers-reduced-motion)").matches&&(c="auto"),this.panel&&(n=this.panel.offsetValue),window.scrollTo({top:t.getBoundingClientRect().top+window.pageYOffset-n,behavior:c}),window.matchMedia("(min-width: 992px)").matches||setTimeout(this.closeAccordion,750)}_activeItemHandler(e){const t=e.detail.panel,i=e.detail.activeIds;if(t&&(!t||t.scrolltarget===this.id))if(!this.autobuild||this.autobuild&&this._building){if(!i||0===i.length)return void this.removeAllActive();const e=i[0];if(!e)return;const a=this.getLinkById(e);t.getRefById(e);if(!a)return;if(this.activeLinks.length>0){if(this.activeLinks.filter(e=>e===a).length>0)return;this.removeAllActive()}this.activeLinks.push(a),this.activeLinks.map(e=>this.setActive(e))}else setTimeout(this._activeItemHandler(e),100)}}
/*!
 * PatternFly Elements: PfeJumpLinks 1.9.0
 * @license
 * Copyright 2021 Red Hat, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
*/class i extends e{static get version(){return"1.9.0"}static get tag(){return"pfe-jump-links-panel"}get html(){return"<style>:host { display: block; } :host([hidden]) { display: none; }</style><slot></slot>"}static get events(){return{change:this.tag+":change",activeNavItem:this.tag+":active-navItem",upgrade:this.tag+":upgraded"}}static get PfeType(){return e.PfeTypes.Content}static get properties(){return{offset:{title:"Offset",type:Number,observer:"_offsetChanged"},scrolltarget:{title:"Scroll target",type:String},oldOffset:{alias:"offset",attr:"pfe-c-offset"},oldScrolltarget:{alias:"scrolltarget",attr:"pfe-c-scrolltarget"}}}static get observerSettings(){return{childList:!0,subtree:!0,characterData:!0}}get offsetValue(){const e=e=>{const t=this.cssVariable(e);if(t)return Number.isInteger(Number(t))||t.match(/px$/)||this.warn(`Using an integer with a unit (other than px) is not supported for custom property ${e}. Received ${t}. The component strips the unit using parseInt(). For example, 1rem would become 1 and behave as if you had entered 1px.`),t};let t=this.offset||e(this.tag+"--offset")||0,i=e("pfe-navigation--Height--actual")||0,a=e("pfe-jump-links-nav--Height--actual")||e("pfe-jump-links--nav-height")||0;return parseInt(t)+parseInt(i)+parseInt(a)+8||200}constructor(){super(i,{type:i.PfeType}),this.nav=void 0,this.sections=[],this.sectionRefs={},this._connectToNav=this._connectToNav.bind(this),this._sectionReference=this._sectionReference.bind(this),this._parseSections=this._parseSections.bind(this),this._init=this._init.bind(this),this._attachIntersectionObservers=this._attachIntersectionObservers.bind(this),this._intersectionCallback=this._intersectionCallback.bind(this),this._resizeHandler=this._resizeHandler.bind(this),this._observer=new MutationObserver(this._init),this._intersectionObserver=new IntersectionObserver(this._intersectionCallback,{rootMargin:this.offsetValue+"px 0px 0px 0px",threshold:Array(100).fill().map((e,t)=>t/100||0)}),this._resizeObserver=new ResizeObserver(this._resizeHandler),this.nav||document.body.addEventListener("pfe-jump-links-nav:upgraded",this._connectToNav)}connectedCallback(){super.connectedCallback(),this._init(),this.sections&&this.emitEvent(i.events.upgrade,{detail:{panel:this,sections:this.sections,navigation:this.sectionRefs}}),this._observer.observe(this,i.observerSettings)}disconnectedCallback(){super.disconnectedCallback(),this._observer.disconnect(),this._resizeObserver.disconnect(),this.querySelectorAll("[section-container]").forEach(e=>this._intersectionObserver.disconnect(e)),document.body.removeEventListener("pfe-jump-links-nav:upgraded",this._connectToNav)}getRefById(e){return Object.values(this.sectionRefs).filter(t=>t.id===e)[0]}updateActiveState(){const e=Object.values(this.sectionRefs).filter(e=>e.isVisible);e.length>2&&e[0].intersectionRatio<1&&e[1].intersectionRatio>.5&&e.shift(),this.emitEvent(i.events.activeNavItem,{detail:{panel:this,activeIds:e.map(e=>e.id)}})}_connectToNav(e){e.detail&&e.detail.nav&&e.detail.nav.id===this.scrolltarget&&(this.nav=e.detail.nav,this.nav&&(document.body.removeEventListener("pfe-jump-links-nav:upgraded",this._connectToNav),document.body.removeEventListener(i.events.upgrade,this.nav._upgradePanelHandler),this.cssVariable("--pfe-jump-links-nav--offset",this.offsetValue+"px",this.nav),this.nav.panel?this.nav.autobuild&&this.nav.rebuild(this.sectionRefs):(this.nav.connectPanel(this),this.nav._init())))}_sectionReference(e){return{id:e.id,ref:e,isVisible:!1,label:(e.getAttribute("nav-label")||e.textContent).trim(),childOf:null}}_parseSections(e,t=[],i="classes",a={}){if(0===e.length)return t;const s=e[0];("classes"===i&&!s.classList.contains("pfe-jump-links-panel__section")||"classes"!==i&&!s.tagName.startsWith("H"))&&e.shift();let r=!1,n=!1;const o=this._sectionReference(s);if(s.id||(o.label?s.id=o.label.toLowerCase().replace(/\./,"").split(" ").map(e=>`${e.slice(0,1).toUpperCase()}${e.slice(1)}`).join(""):s.id=this.randomId),"classes"===i)a&&a.ref&&(n=a.ref.classList.contains("sub-section")&&!s.classList.contains("sub-section"),r=a.ref.classList.contains("has-sub-section")&&s.classList.contains("sub-section"));else{const e=s.tagName.slice(1,2);let t=1;a.ref&&(t=a.ref.tagName.slice(1,2)),r=e>t,n=e<t}if(r)o.childOf=a.id;else if(!n&&a.childOf)o.childOf=a.childOf;else if(n){let e;const i=Object.values(t).filter(e=>e.id===a.id);i.length>0&&i[0].childOf&&(e=Object.values(t).filter(e=>e.id===i[0].childOf),e.length>0&&e[0].childOf&&(o.childOf=e[0].childOf))}return t.push(o),e.shift(),this._parseSections(e,t,i,o)}_init(){this.sections=this.querySelectorAll(".pfe-jump-links-panel__section"),this.sections.length>0&&(this.sectionRefs=this._parseSections([...this.sections])),this.sections.length<=0&&(this.warn(`No elements in ${this.tag} included the .${this.tag}__section class. Grepping instead for h-level tags as a fallback.`),this.sections=this.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),this.sections&&(this.sectionRefs=this._parseSections([...this.sections],[],"markup"))),this.sectionRefs.length>0&&this.nav&&this.nav.buildNav(this.sectionRefs),this.style.position="relative",this._attachIntersectionObservers(),this.nav&&this.cssVariable("--pfe-jump-links-nav--offset",this.offsetValue+"px",this.nav),this._resizeObserver.observe(this)}_attachIntersectionObservers(){this.sections.forEach(e=>this._intersectionObserver.observe(e))}_resizeHandler(e){this._resizeObserver.disconnect(),this._attachIntersectionObservers(),this._resizeObserver.observe(this)}_intersectionCallback(e,t){e.forEach(e=>{let t=e.target.parentNode;if(t.id){let i=this.getRefById(t.id);i&&(i.isVisible=e.isIntersecting,i.intersectionRatio=e.intersectionRatio)}}),this.updateActiveState()}}
/*!
 * PatternFly Elements: PfeJumpLinks 1.9.0
 * @license
 * Copyright 2021 Red Hat, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
*/e.create(i),e.create(t);
//# sourceMappingURL=pfe-jump-links.min.js.map
