!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.PFElement=t()}(this,function(){"use strict";var n=function(){return null};function o(){n("[reveal] web components ready"),n("[reveal] elements ready, revealing the body"),window.document.body.removeAttribute("unresolved")}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},c="pfe-",e=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,HTMLElement),e(a,[{key:"cssVariable",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this;return e="--"!==e.substr(0,2)?"--"+e:e,t&&n.style.setProperty(e,t),window.getComputedStyle(n).getPropertyValue(e).trim()}},{key:"has_slot",value:function(e){return this.querySelector("[slot='"+e+"']")}},{key:"has_slots",value:function(e){return[].concat(l(this.querySelectorAll("[slot='"+e+"']")))}},{key:"context_update",value:function(){var e=this.querySelectorAll("[pfelement]"),t=this.cssVariable("theme");this.hasAttribute("pfe-theme")&&(t=this.getAttribute("pfe-theme"),this.cssVariable("theme",t)),this.context_set(t),[].concat(l(e)).map(function(e){e.connected&&e.context_set(t)})}},{key:"context_set",value:function(e){var t=this.cssVariable("theme");(t=!(t=t||this.getAttribute("pfe-theme"))&&e?e:t)&&this.hasAttribute("pfelement")&&this.setAttribute("on",t)}},{key:"randomId",get:function(){return"pfe-"+Math.random().toString(36).substr(2,9)}},{key:"version",get:function(){return this._pfeClass.version}},{key:"pfeType",get:function(){return this.getAttribute(c+"type")},set:function(e){this.setAttribute(c+"type",e)}}],[{key:"create",value:function(e){window.customElements.define(e.tag,e)}},{key:"debugLog",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return null!==e&&(a._debugLog=!!e),a._debugLog}},{key:"log",value:function(){var e;a.debugLog()&&(e=console).log.apply(e,arguments)}},{key:"PfeTypes",get:function(){return{Container:"container",Content:"content",Combo:"combo"}}},{key:"version",get:function(){return"{{version}}"}},{key:"observedAttributes",get:function(){return["pfe-theme"]}}]),e(a,[{key:"connectedCallback",value:function(){this.connected=!0,this.log("Connecting..."),window.ShadyCSS&&(this.log("Styling..."),window.ShadyCSS.styleElement(this),this.log("Styled.")),!this.hasAttribute("pfelement")&&this.hasAttribute("on")&&console.warn(this.tag+(this.id?"[#"+this.id+"]":"")+': The "on" attribute is protected and should not be manually added to a component. The base class will manage this value for you on upgrade.'),this.classList.add("PFElement"),this.setAttribute("pfelement",""),"object"===u(this.props)&&(this._mapSchemaToProperties(this.tag,this.props),this.log("Properties attached.")),"object"===u(this.slots)&&(this._mapSchemaToSlots(this.tag,this.slots),this.log("Slots attached.")),this._queue.length&&this._processQueue(),this.context_update(),this.log("Connected.")}},{key:"disconnectedCallback",value:function(){this.log("Disconnecting..."),this.connected=!1,this.log("Disconnected.")}},{key:"attributeChangedCallback",value:function(e,t,n){var o;this._pfeClass.cascadingAttributes&&((o=this._pfeClass.cascadingAttributes[e])&&this._copyAttribute(e,o),"pfe-theme"===e&&this.context_update())}},{key:"_copyAttribute",value:function(e,t){var n=[].concat(l(this.querySelectorAll(t)),l(this.shadowRoot.querySelectorAll(t))),o=this.getAttribute(e),i=null==o?"removeAttribute":"setAttribute",r=!0,s=!1,t=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)a.value[i](e,o)}catch(e){s=!0,t=e}finally{try{!r&&u.return&&u.return()}finally{if(s)throw t}}}},{key:"_mapSchemaToProperties",value:function(r,s){var a=this;this.log("Mapping properties..."),Object.keys(s).forEach(function(e){var t,n,o,i=s[e];"object"===(void 0===i?"undefined":u(i))&&(o=!0,a[t=e]=i,a[e].value=null,void 0!==a[e].prefixed&&(o=a[e].prefixed),a.hasAttribute(t=o?c+e:t)?a[e].value=a.getAttribute(t):i.default&&(n=a._hasDependency(r,i.options),o=!i.options||i.options&&!i.options.dependencies.length,(n||o)&&(a.setAttribute(t,i.default),a[e].value=i.default)))}),this.log("Properties mapped.")}},{key:"_hasDependency",value:function(e,t){for(var n=t?t.dependencies:[],o=!1,i=0;i<n.length;i+=1){var r="slot"===n[i].type&&0<this.has_slots(e+"--"+n[i].id).length,s="attribute"===n[i].type&&this.getAttribute(c+n[i].id);if(r||s){o=!0;break}}return o}},{key:"_mapSchemaToSlots",value:function(i,r){var s=this;this.log("Validate slots..."),Object.keys(r).forEach(function(e){var t,n,o=r[e];"object"===(void 0===o?"undefined":u(o))&&(t=!1,n=[],o.namedSlot?(0<(n=s.has_slots(i+"--"+e)).length&&(o.nodes=n,t=!0),0<(n=s.has_slots(""+e)).length&&(o.nodes=n,t=!0)):0<(n=[].concat(l(s.children)).filter(function(e){return!e.hasAttribute("slot")})).length&&(o.nodes=n,t=!0),t?s.setAttribute("has_"+e,""):s.removeAttribute("has_"+e))}),this.log("Slots validated.")}},{key:"_queueAction",value:function(e){this._queue.push(e)}},{key:"_processQueue",value:function(){var t=this;this._queue.forEach(function(e){t["_"+e.type](e.data)}),this._queue=[]}},{key:"_setProperty",value:function(e){var t=e.name,e=e.value;this[t]=e}},{key:"var",value:function(e){return a.var(e,this)}},{key:"render",value:function(){this.shadowRoot.innerHTML="",this.template.innerHTML=this.html,window.ShadyCSS&&window.ShadyCSS.prepareTemplate(this.template,this.tag),this.shadowRoot.appendChild(this.template.content.cloneNode(!0))}},{key:"log",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.log.apply(a,["["+this.tag+"]"].concat(t))}},{key:"emitEvent",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.bubbles,o=void 0===n||n,i=t.cancelable,n=void 0!==i&&i,i=t.composed,i=void 0!==i&&i,t=t.detail,t=void 0===t?{}:t;this.log("Custom event: "+e),this.dispatchEvent(new CustomEvent(e,{bubbles:o,cancelable:n,composed:i,detail:t}))}}],[{key:"var",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;return window.getComputedStyle(t).getPropertyValue(e).trim()}}]),a);function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.type,o=void 0===n?null:n,n=t.delayRender,t=void 0!==n&&n;i(this,a);n=s(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return n.connected=!1,n._pfeClass=e,n.tag=e.tag,n.props=e.properties,n.slots=e.slots,n._queue=[],n.template=document.createElement("template"),n.log("Constructing..."),n.attachShadow({mode:"open"}),o&&n._queueAction({type:"setProperty",data:{name:"pfeType",value:o}}),t||(n.log("Render..."),n.render(),n.log("Rendered.")),n.log("Constructed."),n}return function(e){n=e;var t=window.WebComponents,e=t&&window.WebComponents.ready;!t||e?o():window.addEventListener("WebComponentsReady",o)}(e.log),e});
//# sourceMappingURL=pfelement.umd.min.js.map
