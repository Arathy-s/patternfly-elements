{"version":3,"file":"pfe-accordion.umd.js","sources":["pfe-accordion.js"],"sourcesContent":["import PFElement from '../pfelement/pfelement.js';\n\n/*\n * Copyright 2019 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\nif (!Array.prototype.findIndex) {\n  Object.defineProperty(Array.prototype, \"findIndex\", {\n    value: function(predicate) {\n      // 1. Let O be ? ToObject(this value).\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n\n      var o = Object(this);\n\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n      var len = o.length >>> 0;\n\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n      if (typeof predicate !== \"function\") {\n        throw new TypeError(\"predicate must be a function\");\n      }\n\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n      var thisArg = arguments[1];\n\n      // 5. Let k be 0.\n      var k = 0;\n\n      // 6. Repeat, while k < len\n      while (k < len) {\n        // a. Let Pk be ! ToString(k).\n        // b. Let kValue be ? Get(O, Pk).\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n        // d. If testResult is true, return k.\n        var kValue = o[k];\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return k;\n        }\n        // e. Increase k by 1.\n        k++;\n      }\n\n      // 7. Return -1.\n      return -1;\n    }\n  });\n}\n\nfunction generateId() {\n  return Math.random()\n    .toString(36)\n    .substr(2, 9);\n}\n\nclass PfeAccordion extends PFElement {\n  get html() {\n    return `<style>:host {\n  display: block;\n  position: relative;\n  overflow: hidden;\n  margin: 0;\n  color: var(--pfe-broadcasted--color--text); }\n\n:host([on=\"dark\"]) {\n  --pfe-broadcasted--color--text:               var(--pfe-theme--color--text--on-dark, #fff);\n  --pfe-broadcasted--color--ui-link:            var(--pfe-theme--color--ui-link--on-dark, #99ccff);\n  --pfe-broadcasted--color--ui-link--visited:   var(--pfe-theme--color--ui-link--on-dark--visited, #b38cd9);\n  --pfe-broadcasted--color--ui-link--hover:     var(--pfe-theme--color--ui-link--on-dark--hover, #cce6ff);\n  --pfe-broadcasted--color--ui-link--focus:     var(--pfe-theme--color--ui-link--on-dark--focus, #cce6ff); }\n\n:host([on=\"light\"]) {\n  --pfe-broadcasted--color--text:               var(--pfe-theme--color--text, #333);\n  --pfe-broadcasted--color--ui-link:            var(--pfe-theme--color--ui-link, #06c);\n  --pfe-broadcasted--color--ui-link--visited:   var(--pfe-theme--color--ui-link--visited, rebeccapurple);\n  --pfe-broadcasted--color--ui-link--hover:     var(--pfe-theme--color--ui-link--hover, #003366);\n  --pfe-broadcasted--color--ui-link--focus:     var(--pfe-theme--color--ui-link--focus, #003366); }</style>\n<slot></slot>`;\n  }\n\n  static get tag() {\n    return \"pfe-accordion\";\n  }\n\n  get styleUrl() {\n    return \"pfe-accordion.scss\";\n  }\n\n  get templateUrl() {\n    return \"pfe-accordion.html\";\n  }\n\n  static get observedAttributes() {\n    return [\"theme\", \"color\", \"on\"];\n  }\n\n  static get cascadingAttributes() {\n    return {\n      color: \"pfe-accordion-header, pfe-accordion-panel\",\n      on: \"pfe-accordion-header, pfe-accordion-panel\"\n    };\n  }\n\n  constructor() {\n    super(PfeAccordion);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.setAttribute(\"role\", \"presentation\");\n    this.setAttribute(\"defined\", \"\");\n\n    this.addEventListener(`${PfeAccordion.tag}:change`, this._changeHandler);\n    this.addEventListener(\"keydown\", this._keydownHandler);\n\n    Promise.all([\n      customElements.whenDefined(PfeAccordionHeader.tag),\n      customElements.whenDefined(PfeAccordionPanel.tag)\n    ]).then(this._linkPanels());\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(`${PfeAccordion.tag}:change`, this._changeHandler);\n    this.removeEventListener(\"keydown\", this._keydownHandler);\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    super.attributeChangedCallback(attr, oldVal, newVal);\n\n    if (attr === \"color\") {\n      const headers = this.querySelectorAll(PfeAccordionHeader.tag);\n\n      if (newVal === \"striped\") {\n        [...headers].forEach((header, index) => {\n          const headerClass = index % 2 ? \"even\" : \"odd\";\n          header.classList.add(headerClass);\n        });\n      } else {\n        [...headers].forEach((header, index) => {\n          header.classList.remove(\"even\", \"odd\");\n        });\n      }\n    }\n  }\n\n  toggle(index) {\n    const headers = this._allHeaders();\n    const panels = this._allPanels();\n    const header = headers[index];\n    const panel = panels[index];\n\n    if (!header || !panel) {\n      return;\n    }\n\n    if (!header.expanded) {\n      this._expandHeader(header);\n      this._expandPanel(panel);\n    } else {\n      this._collapseHeader(header);\n      this._collapsePanel(panel);\n    }\n  }\n\n  expand(index) {\n    const headers = this._allHeaders();\n    const panels = this._allPanels();\n    const header = headers[index];\n    const panel = panels[index];\n\n    if (!header || !panel) {\n      return;\n    }\n\n    this._expandHeader(header);\n    this._expandPanel(panel);\n  }\n\n  expandAll() {\n    const headers = this._allHeaders();\n    const panels = this._allPanels();\n\n    headers.forEach(header => this._expandHeader(header));\n    panels.forEach(panel => this._expandPanel(panel));\n  }\n\n  collapse(index) {\n    const headers = this._allHeaders();\n    const panels = this._allPanels();\n    const header = headers[index];\n    const panel = panels[index];\n\n    if (!header || !panel) {\n      return;\n    }\n\n    this._collapseHeader(header);\n    this._collapsePanel(panel);\n  }\n\n  collapseAll() {\n    const headers = this._allHeaders();\n    const panels = this._allPanels();\n\n    headers.forEach(header => this._collapseHeader(header));\n    panels.forEach(panel => this._collapsePanel(panel));\n  }\n\n  _linkPanels() {\n    const headers = this._allHeaders();\n    headers.forEach(header => {\n      const panel = this._panelForHeader(header);\n\n      header.setAttribute(\"aria-controls\", panel.pfeId);\n      panel.setAttribute(\"aria-labelledby\", header.pfeId);\n    });\n  }\n\n  _changeHandler(evt) {\n    if (this.classList.contains(\"animating\")) {\n      return;\n    }\n\n    const header = evt.target;\n    const panel = evt.target.nextElementSibling;\n\n    if (evt.detail.expanded) {\n      this._expandHeader(header);\n      this._expandPanel(panel);\n    } else {\n      this._collapseHeader(header);\n      this._collapsePanel(panel);\n    }\n  }\n\n  _toggle(header, panel) {}\n\n  _expandHeader(header) {\n    header.expanded = true;\n  }\n\n  _expandPanel(panel) {\n    if (panel.expanded) {\n      return;\n    }\n\n    panel.expanded = true;\n\n    const height = panel.getBoundingClientRect().height;\n    this._animate(panel, 0, height);\n  }\n\n  _collapseHeader(header) {\n    header.expanded = false;\n  }\n\n  _collapsePanel(panel) {\n    if (!panel.expanded) {\n      return;\n    }\n\n    const height = panel.getBoundingClientRect().height;\n    panel.expanded = false;\n\n    this._animate(panel, height, 0);\n  }\n\n  _animate(panel, start, end) {\n    panel.classList.add(\"animating\");\n    panel.style.height = `${start}px`;\n\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        panel.style.height = `${end}px`;\n        panel.classList.add(\"animating\");\n        panel.addEventListener(\"transitionend\", this._transitionEndHandler);\n      });\n    });\n  }\n\n  _keydownHandler(evt) {\n    const currentHeader = evt.target;\n\n    if (!this._isHeader(currentHeader)) {\n      return;\n    }\n\n    let newHeader;\n\n    switch (evt.key) {\n      case \"ArrowDown\":\n      case \"Down\":\n      case \"ArrowRight\":\n      case \"Right\":\n        newHeader = this._nextHeader();\n        break;\n      case \"ArrowUp\":\n      case \"Up\":\n      case \"ArrowLeft\":\n      case \"Left\":\n        newHeader = this._previousHeader();\n        break;\n      case \"Home\":\n        newHeader = this._firstHeader();\n        break;\n      case \"End\":\n        newHeader = this._lastHeader();\n        break;\n      default:\n        return;\n    }\n\n    newHeader.shadowRoot.querySelector(\"button\").focus();\n  }\n\n  _transitionEndHandler(evt) {\n    evt.target.style.height = \"\";\n    evt.target.classList.remove(\"animating\");\n    evt.target.removeEventListener(\"transitionend\", this._transitionEndHandler);\n  }\n\n  _allHeaders() {\n    return [...this.querySelectorAll(PfeAccordionHeader.tag)];\n  }\n\n  _allPanels() {\n    return [...this.querySelectorAll(PfeAccordionPanel.tag)];\n  }\n\n  _panelForHeader(header) {\n    const next = header.nextElementSibling;\n\n    if (next.tagName.toLowerCase() !== PfeAccordionPanel.tag) {\n      console.error(\n        `${PfeAccordion.tag}: Sibling element to a header needs to be a panel`\n      );\n      return;\n    }\n\n    return next;\n  }\n\n  _previousHeader() {\n    const headers = this._allHeaders();\n    let newIndex =\n      headers.findIndex(header => header === document.activeElement) - 1;\n    return headers[(newIndex + headers.length) % headers.length];\n  }\n\n  _nextHeader() {\n    const headers = this._allHeaders();\n    let newIndex =\n      headers.findIndex(header => header === document.activeElement) + 1;\n    return headers[newIndex % headers.length];\n  }\n\n  _firstHeader() {\n    const headers = this._allHeaders();\n    return headers[0];\n  }\n\n  _lastHeader() {\n    const headers = this._allHeaders();\n    return headers[headers.length - 1];\n  }\n\n  _isHeader(element) {\n    return element.tagName.toLowerCase() === PfeAccordionHeader.tag;\n  }\n}\n\nclass PfeAccordionHeader extends PFElement {\n  get html() {\n    return `<style>:host {\n  display: block; }\n  :host > * {\n    margin: 0; }\n  :host button {\n    --pfe-accordion--main:         transparent;\n    --pfe-accordion--aux:          var(--pfe-theme--color--surface--lightest--text, #333);\n    --pfe-accordion--BorderLeft:  var(--pfe-theme--surface--border-width-heavy, ) var(--pfe-theme--surface--border-style, solid) transparent;\n    --pfe-accordion--BorderRight: var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) transparent;\n    --pfe-accordion--BorderBottom: var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--border--lightest, #ececec);\n    --pfe-accordion--BorderLeftColor--focus: var(--pfe-theme--color--surface--lightest--link, #06c);\n    -webkit-appearance: button;\n    margin: 0;\n    width: 100%;\n    height: auto;\n    font-family: inherit;\n    font-weight: var(--pfe-theme--font-weight--bold, 700);\n    text-align: left;\n    cursor: pointer;\n    z-index: 1;\n    position: relative;\n    font-size: calc(var(--pfe-theme--font-size, 16px) * 1.1);\n    line-height: var(--pfe-theme--line-height, 1.5);\n    color: var(--pfe-accordion--aux);\n    background-color: var(--pfe-accordion--main);\n    border-left: var(--pfe-accordion--BorderLeft);\n    border-right: var(--pfe-accordion--BorderRight);\n    border-bottom: var(--pfe-accordion--BorderBottom);\n    border-top: 0;\n    padding: var(--pfe-theme--container-spacer, 1rem) 50px var(--pfe-theme--container-spacer, 1rem) calc(var(--pfe-theme--container-spacer, 1rem) * 1.5); }\n    :host button:hover {\n      outline: none;\n      border-left-color: var(--pfe-accordion--BorderLeftColor--focus);\n      z-index: 2; }\n    :host button:focus {\n      outline: none;\n      z-index: 2;\n      text-decoration: underline;\n      text-decoration-color: var(--pfe-theme--color--surface--border--darker, #c6c6c6); }\n    :host button::-moz-focus-inner {\n      border: 0; }\n    :host button[aria-expanded=\"true\"] {\n      --pfe-accordion--main:              var(--pfe-theme--color--surface--lightest, #fff);\n      --pfe-accordion--aux:               var(--pfe-theme--color--surface--lightest--text, #333);\n      --pfe-accordion--focus:             var(--pfe-theme--color--surface--lightest--link, #06c);\n      --pfe-accordion--BorderLeft:        var(--pfe-theme--surface--border-width-heavy, ) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--lightest--link, #06c);\n      --pfe-accordion--BorderRight:       var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--border--lightest, #ececec);\n      position: relative;\n      display: block;\n      border-bottom: 0; }\n      :host button[aria-expanded=\"true\"]::after {\n        content: \"\";\n        position: absolute;\n        top: calc((var(--pfe-theme--container-spacer, 1rem) * 0.75) + 0.55em);\n        display: block;\n        border-style: var(--pfe-theme--surface--border-style, solid);\n        height: 0.4em;\n        width: 0.4em;\n        text-align: center;\n        transition: transform 0.15s;\n        border-width: 0.1em 0.1em 0 0;\n        border-bottom: 0;\n        transform: rotate(-45deg);\n        right: calc(var(--pfe-theme--container-spacer, 1rem) * 1.5); }\n    :host button[aria-expanded=\"false\"]::after {\n      content: \"\";\n      position: absolute;\n      top: calc((var(--pfe-theme--container-spacer, 1rem) * 0.75) + 0.55em);\n      display: block;\n      border-style: var(--pfe-theme--surface--border-style, solid);\n      height: 0.4em;\n      width: 0.4em;\n      text-align: center;\n      transition: transform 0.15s;\n      border-width: 0 0.1em 0.1em 0;\n      transform: rotate(45deg);\n      right: calc(var(--pfe-theme--container-spacer, 1rem) * 1.5); }\n\n:host(:first-child) button {\n  border-top: var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--border--lightest, #ececec); }\n\n:host(:last-of-type) button[aria-expanded=\"false\"] {\n  border-bottom: var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--border--lightest, #ececec); }\n\n:host(.animating) {\n  transition: transform 0.3s var(--pfe-theme--animation-timing, cubic-bezier(0.465, 0.183, 0.153, 0.946)); }\n\n:host([on=\"dark\"]) button {\n  --pfe-accordion--main:         transparent;\n  --pfe-accordion--aux:          var(--pfe-theme--color--surface--darkest--text, #fff);\n  --pfe-accordion--BorderLeftColor--focus: var(--pfe-theme--color--surface--lightest, #fff); }\n  :host([on=\"dark\"]) button[aria-expanded=\"true\"] {\n    --pfe-accordion--main:         var(--pfe-theme--color--surface--darker, #464646);\n    --pfe-accordion--aux:          var(--pfe-theme--color--surface--darkest--text, #fff);\n    --pfe-accordion--BorderLeft:   var(--pfe-theme--surface--border-width-heavy, ) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--border-darkest, );\n    --pfe-accordion--BorderRight:  var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--border-darkest, );\n    --pfe-accordion--BorderLeftColor--focus: var(--pfe-theme--color--surface--lightest, #fff); }</style>\n<button aria-expanded=\"false\" role=\"tab\"></button>`;\n  }\n\n  static get tag() {\n    return \"pfe-accordion-header\";\n  }\n\n  get styleUrl() {\n    return \"pfe-accordion-header.scss\";\n  }\n\n  get templateUrl() {\n    return \"pfe-accordion-header.html\";\n  }\n\n  get pfeId() {\n    return this.getAttribute(\"pfe-id\");\n  }\n\n  set pfeId(id) {\n    if (!id) {\n      return;\n    }\n\n    this.setAttribute(\"pfe-id\", id);\n  }\n\n  static get observedAttributes() {\n    return [\"aria-expanded\"];\n  }\n\n  constructor() {\n    super(PfeAccordionHeader);\n    this._clickHandler = this._clickHandler.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.hasAttribute(\"role\")) {\n      this.setAttribute(\"role\", \"header\");\n    }\n\n    if (!this.pfeId) {\n      this.pfeId = `${PfeAccordionHeader.tag}-${generateId()}`;\n    }\n\n    this.button = this.shadowRoot.querySelector(\"button\");\n\n    const child = this.children[0];\n    let isHeaderTag = false;\n\n    if (child) {\n      switch (child.tagName) {\n        case \"H1\":\n        case \"H2\":\n        case \"H3\":\n        case \"H4\":\n        case \"H5\":\n        case \"H6\":\n          isHeaderTag = true;\n          break;\n      }\n\n      const wrapperTag = document.createElement(child.tagName);\n      this.button.innerText = child.innerText;\n\n      wrapperTag.appendChild(this.button);\n      this.shadowRoot.appendChild(wrapperTag);\n    } else {\n      this.button.innerText = this.textContent.trim();\n    }\n\n    if (!isHeaderTag) {\n      console.warn(\n        `${\n          PfeAccordionHeader.tag\n        }: The first child in the light DOM must be a Header level tag (h1, h2, h3, h4, h5, or h6)`\n      );\n    }\n\n    this.addEventListener(\"click\", this._clickHandler);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"click\", this._clickHandler);\n  }\n\n  get expanded() {\n    return this.hasAttribute(\"aria-expanded\");\n  }\n\n  set expanded(val) {\n    val = Boolean(val);\n\n    if (val) {\n      this.setAttribute(\"aria-expanded\", true);\n      this.button.setAttribute(\"aria-expanded\", true);\n    } else {\n      this.removeAttribute(\"aria-expanded\");\n      this.button.setAttribute(\"aria-expanded\", false);\n    }\n  }\n\n  _clickHandler(event) {\n    this.dispatchEvent(\n      new CustomEvent(`${PfeAccordion.tag}:change`, {\n        detail: { expanded: !this.expanded },\n        bubbles: true\n      })\n    );\n  }\n}\n\nclass PfeAccordionPanel extends PFElement {\n  get html() {\n    return `<style>:host {\n  display: none;\n  overflow: hidden;\n  will-change: height;\n  border-color: transparent; }\n\n:host([expanded]) {\n  display: block;\n  position: relative;\n  border-right: var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) transparent;\n  border-left: var(--pfe-theme--surface--border-width--heavy, 3px) var(--pfe-theme--surface--border-style, solid) transparent;\n  box-shadow: 0 5px var(--pfe-theme--surface--border-width--heavy, 3px) rgba(140, 140, 140, 0.35);\n  border-left-color: var(--pfe-theme--color--surface--lightest--link, #06c);\n  background-color: var(--pfe-theme--color--surface--lightest, #fff);\n  border-right-color: var(--pfe-theme--color--surface--border--lightest, #ececec);\n  border-bottom: var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--border--lightest, #ececec); }\n\n:host([on=\"dark\"][expanded]) {\n  --pfe-broadcasted--color--text:               var(--pfe-theme--color--text--on-dark, #fff);\n  --pfe-broadcasted--color--ui-link:            var(--pfe-theme--color--ui-link--on-dark, #99ccff);\n  --pfe-broadcasted--color--ui-link--visited:   var(--pfe-theme--color--ui-link--on-dark--visited, #b38cd9);\n  --pfe-broadcasted--color--ui-link--hover:     var(--pfe-theme--color--ui-link--on-dark--hover, #cce6ff);\n  --pfe-broadcasted--color--ui-link--focus:     var(--pfe-theme--color--ui-link--on-dark--focus, #cce6ff);\n  border-right: var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) transparent;\n  border-left: var(--pfe-theme--surface--border-width--heavy, 3px) var(--pfe-theme--surface--border-style, solid) transparent;\n  box-shadow: none;\n  background-color: var(--pfe-theme--color--surface--darker, #464646);\n  border-left-color: var(--pfe-theme--color--surface--darkest--text, #fff);\n  border-right-color: var(--pfe-theme--color--surface--darkest--text, #fff); }\n\n:host(.animating) {\n  display: block;\n  transition: height 0.3s ease-in-out; }\n\n.container {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0 3em var(--pfe-theme--container-spacer, 1rem) calc(var(--pfe-theme--container-spacer, 1rem) * 1.5); }\n\n:host(:last-of-type[expanded]) {\n  margin-bottom: 0; }</style>\n<div tabindex=\"-1\" role=\"tabpanel\">\n  <div class=\"container\">\n    <slot></slot>\n  </div>\n</div>`;\n  }\n\n  static get tag() {\n    return \"pfe-accordion-panel\";\n  }\n\n  get styleUrl() {\n    return \"pfe-accordion-panel.scss\";\n  }\n\n  get templateUrl() {\n    return \"pfe-accordion-panel.html\";\n  }\n\n  get pfeId() {\n    return this.getAttribute(\"pfe-id\");\n  }\n\n  set pfeId(id) {\n    if (!id) {\n      return;\n    }\n\n    this.setAttribute(\"pfe-id\", id);\n  }\n\n  constructor() {\n    super(PfeAccordionPanel);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.hasAttribute(\"role\")) {\n      this.setAttribute(\"role\", \"region\");\n    }\n\n    if (!this.pfeId) {\n      this.pfeId = `${PfeAccordionPanel.tag}-${generateId()}`;\n    }\n  }\n\n  get expanded() {\n    return this.hasAttribute(\"expanded\");\n  }\n\n  set expanded(val) {\n    const value = Boolean(val);\n\n    if (value) {\n      this.setAttribute(\"expanded\", \"\");\n    } else {\n      this.removeAttribute(\"expanded\");\n    }\n  }\n}\n\nPFElement.create(PfeAccordionHeader);\nPFElement.create(PfeAccordionPanel);\nPFElement.create(PfeAccordion);\n\nexport default PfeAccordion;\n//# sourceMappingURL=pfe-accordion.js.map\n"],"names":["Array","prototype","findIndex","Object","defineProperty","value","predicate","TypeError","o","len","length","thisArg","arguments","k","kValue","call","generateId","Math","random","toString","substr","PfeAccordion","color","on","setAttribute","addEventListener","tag","_changeHandler","_keydownHandler","Promise","all","customElements","whenDefined","PfeAccordionHeader","PfeAccordionPanel","then","_linkPanels","removeEventListener","attr","oldVal","newVal","headers","querySelectorAll","forEach","header","index","headerClass","classList","add","remove","_allHeaders","panels","_allPanels","panel","expanded","_expandHeader","_expandPanel","_collapseHeader","_collapsePanel","_panelForHeader","pfeId","evt","contains","target","nextElementSibling","detail","height","getBoundingClientRect","_animate","start","end","style","requestAnimationFrame","_transitionEndHandler","currentHeader","_isHeader","newHeader","key","_nextHeader","_previousHeader","_firstHeader","_lastHeader","shadowRoot","querySelector","focus","next","tagName","toLowerCase","console","error","newIndex","document","activeElement","element","PFElement","getAttribute","id","_clickHandler","bind","hasAttribute","button","child","children","isHeaderTag","wrapperTag","createElement","innerText","appendChild","textContent","trim","warn","event","dispatchEvent","CustomEvent","bubbles","val","Boolean","removeAttribute","create"],"mappings":"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"}