{"version":3,"file":"pfe-navigation.umd.js","sources":["pfe-navigation.js"],"sourcesContent":["import PFElement from '../pfelement/pfelement.js';\nimport '../pfe-accordion/pfe-accordion.js';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar es5 = createCommonjsModule(function (module) {\nvar isES5 = (function(){\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n});\nvar es5_1 = es5.freeze;\nvar es5_2 = es5.defineProperty;\nvar es5_3 = es5.getDescriptor;\nvar es5_4 = es5.keys;\nvar es5_5 = es5.names;\nvar es5_6 = es5.getPrototypeOf;\nvar es5_7 = es5.isArray;\nvar es5_8 = es5.isES5;\nvar es5_9 = es5.propertyIsWritable;\n\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof commonjsGlobal !== \"undefined\" ? commonjsGlobal :\n    commonjsGlobal !== undefined ? commonjsGlobal : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj instanceof Error ||\n        (obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\");\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nvar util = ret;\n\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = commonjsGlobal.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(commonjsGlobal, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nvar schedule_1 = schedule;\n\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nvar queue = Queue;\n\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\n\n\n\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new queue(16);\n    this._normalQueue = new queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule_1;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nfunction _drainQueue(queue$$1) {\n    while (queue$$1.length() > 0) {\n        _drainQueueStep(queue$$1);\n    }\n}\n\nfunction _drainQueueStep(queue$$1) {\n    var fn = queue$$1.shift();\n    if (typeof fn !== \"function\") {\n        fn._settlePromises();\n    } else {\n        var receiver = queue$$1.shift();\n        var arg = queue$$1.shift();\n        fn.call(receiver, arg);\n    }\n}\n\nAsync.prototype._drainQueues = function () {\n    _drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    _drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nvar async = Async;\nvar firstLineError_1 = firstLineError;\nasync.firstLineError = firstLineError_1;\n\nvar Objectfreeze = es5.freeze;\n\nvar inherits$1 = util.inherits;\nvar notEnumerableProp$1 = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp$1(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp$1(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits$1(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp$1(this, \"name\", \"OperationalError\");\n    notEnumerableProp$1(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp$1(this, \"message\", message.message);\n        notEnumerableProp$1(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits$1(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nvar errors = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\nvar thenables = function(Promise, INTERNAL) {\nvar util$$1 = util;\nvar errorObj = util$$1.errorObj;\nvar isObject = util$$1.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util$$1.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\nvar promise_array = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util$$1 = util;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil$$1.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util$$1.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util$$1.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\nvar context = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\nvar debuggability = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = errors.Warning;\nvar util$$1 = util;\nvar es5$$1 = es5;\nvar canAttachTrace = util$$1.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util$$1.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (util$$1.env(\"BLUEBIRD_DEBUG\") ||\n                         util$$1.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util$$1.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util$$1.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util$$1.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util$$1.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util$$1.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util$$1.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    var self = this;\n    setTimeout(function() {\n        self._notifyUnhandledRejection();\n    }, 1);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util$$1.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util$$1.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        var Promise_dereferenceTrace = Promise.prototype._dereferenceTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Promise.prototype._dereferenceTrace = Promise_dereferenceTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Promise.prototype._dereferenceTrace = longStackTracesDereferenceTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util$$1.global.dispatchEvent(event);\n            return function(name, event) {\n                var eventData = {\n                    detail: event,\n                    cancelable: true\n                };\n                es5$$1.defineProperty(\n                    eventData, \"promise\", {value: event.promise});\n                es5$$1.defineProperty(eventData, \"reason\", {value: event.reason});\n                var domEvent = new CustomEvent(name.toLowerCase(), eventData);\n                return !util$$1.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util$$1.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                es5$$1.defineProperty(domEvent, \"promise\", {value: event.promise});\n                es5$$1.defineProperty(domEvent, \"reason\", {value: event.reason});\n                return !util$$1.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util$$1.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util$$1.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util$$1.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util$$1.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util$$1.global[methodName];\n            if (!method) return false;\n            method.apply(util$$1.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util$$1.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._dereferenceTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util$$1.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util$$1.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util$$1.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util$$1.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction longStackTracesDereferenceTrace() {\n    this._trace = undefined;\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util$$1.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util$$1.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil$$1.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util$$1.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util$$1.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util$$1.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util$$1.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\nvar catch_filter = function(NEXT_FILTER) {\nvar util$$1 = util;\nvar getKeys = es5.keys;\nvar tryCatch = util$$1.tryCatch;\nvar errorObj = util$$1.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util$$1.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\nvar _finally = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util$$1 = util;\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util$$1.errorObj;\nvar catchFilter = catch_filter(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util$$1.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util$$1.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\nvar maybeWrapAsError$1 = util.maybeWrapAsError;\n\nvar OperationalError$1 = errors.OperationalError;\n\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError$1(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError$1(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0)); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];}            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nvar nodeback = nodebackForPromise;\n\nvar method =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util$$1 = util;\nvar tryCatch = util$$1.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util$$1.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util$$1.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util$$1.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util$$1.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\nvar bind = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\nvar cancel = function(Promise, PromiseArray, apiRejection, debug) {\nvar util$$1 = util;\nvar tryCatch = util$$1.tryCatch;\nvar errorObj = util$$1.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util$$1.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\nvar direct_resolve = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\nvar synchronous_inspection = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\nvar join =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util$$1 = util;\nvar canEvaluate = util$$1.canEvaluate;\nvar tryCatch = util$$1.tryCatch;\nvar errorObj = util$$1.errorObj;\nvar reject;\n\n{\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util$$1.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var $_len = arguments.length;var args = new Array($_len); for(var $_i = 0; $_i < $_len; ++$_i) {args[$_i] = arguments[$_i];}    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\nvar map = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util$$1 = util;\nvar tryCatch = util$$1.tryCatch;\nvar errorObj = util$$1.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util$$1.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil$$1.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util$$1.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util$$1.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util$$1.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nvar call_get = function(Promise) {\nvar util$$1 = util;\nvar canEvaluate = util$$1.canEvaluate;\nvar isIdentifier = util$$1.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\n{\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util$$1.classString(obj) + \" has no method '\" +\n            util$$1.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0)); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];}    {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\nvar using = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util$$1 = util;\n    var TypeError = errors.TypeError;\n    var inherits = util.inherits;\n    var errorObj = util$$1.errorObj;\n    var tryCatch = util$$1.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util$$1.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\nvar timers = function(Promise, INTERNAL, debug) {\nvar util$$1 = util;\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util$$1.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\nvar generators = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors$$1 = errors;\nvar TypeError = errors$$1.TypeError;\nvar util$$1 = util;\nvar errorObj = util$$1.errorObj;\nvar tryCatch = util$$1.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil$$1.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util$$1.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\nvar nodeify = function(Promise) {\nvar util$$1 = util;\nvar async = Promise._async;\nvar tryCatch = util$$1.tryCatch;\nvar errorObj = util$$1.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util$$1.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\nvar promisify = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util$$1 = util;\nvar nodebackForPromise = nodeback;\nvar withAppended = util$$1.withAppended;\nvar maybeWrapAsError = util$$1.maybeWrapAsError;\nvar canEvaluate = util$$1.canEvaluate;\nvar TypeError = errors.TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util$$1.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util$$1.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util$$1.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\n{\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util$$1.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util$$1.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util$$1.tryCatch,\n                    util$$1.errorObj,\n                    util$$1.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util$$1.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util$$1.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util$$1.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util$$1.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util$$1.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util$$1.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util$$1.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util$$1.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\nvar props = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util$$1 = util;\nvar isObject = util$$1.isObject;\nvar es5$$1 = es5;\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5$$1.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil$$1.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\nvar race = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util$$1 = util;\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util$$1.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util$$1.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\nvar reduce = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util$$1 = util;\nvar tryCatch = util$$1.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util$$1.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil$$1.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util$$1.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\nvar settle =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util$$1 = util;\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil$$1.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\nvar some =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util$$1 = util;\nvar RangeError = errors.RangeError;\nvar AggregateError = errors.AggregateError;\nvar isArray = util$$1.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil$$1.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\nvar filter = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\nvar each = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\nvar any = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\nvar promise = createCommonjsModule(function (module) {\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util$$1 = util;\n\nvar getDomain;\nif (util$$1.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil$$1.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5$$1 = es5;\nvar Async = async;\nvar async$$1 = new Async();\nes5$$1.defineProperty(Promise, \"_async\", {value: async$$1});\nvar errors$$1 = errors;\nvar TypeError = Promise.TypeError = errors$$1.TypeError;\nPromise.RangeError = errors$$1.RangeError;\nvar CancellationError = Promise.CancellationError = errors$$1.CancellationError;\nPromise.TimeoutError = errors$$1.TimeoutError;\nPromise.OperationalError = errors$$1.OperationalError;\nPromise.RejectionError = errors$$1.OperationalError;\nPromise.AggregateError = errors$$1.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = thenables(Promise, INTERNAL);\nvar PromiseArray =\n    promise_array(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = context(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = debuggability(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _finally(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = catch_filter(NEXT_FILTER);\nvar nodebackForPromise = nodeback;\nvar errorObj = util$$1.errorObj;\nvar tryCatch = util$$1.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util$$1.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util$$1.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util$$1.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util$$1.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util$$1.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util$$1.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util$$1.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util$$1.classString(fn));\n    }\n    return async$$1.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async$$1.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util$$1.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async$$1.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util$$1.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util$$1.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util$$1.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util$$1.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util$$1.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util$$1.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util$$1.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async$$1.settlePromises(this);\n        }\n        this._dereferenceTrace();\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async$$1.fatalError(reason, util$$1.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async$$1.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil$$1.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\nmethod(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\nbind(Promise, INTERNAL, tryConvertToPromise, debug);\ncancel(Promise, PromiseArray, apiRejection, debug);\ndirect_resolve(Promise);\nsynchronous_inspection(Promise);\njoin(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async$$1, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.3\";\nmap(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\ncall_get(Promise);\nusing(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\ntimers(Promise, INTERNAL, debug);\ngenerators(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\nnodeify(Promise);\npromisify(Promise, INTERNAL);\nprops(Promise, PromiseArray, tryConvertToPromise, apiRejection);\nrace(Promise, INTERNAL, tryConvertToPromise, apiRejection);\nreduce(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\nsettle(Promise, PromiseArray, debug);\nsome(Promise, PromiseArray, apiRejection);\nfilter(Promise, INTERNAL);\neach(Promise, INTERNAL);\nany(Promise);\n                                                         \n    util$$1.toFastProperties(Promise);                                          \n    util$$1.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util$$1.lastLineError);               \n    return Promise;                                                          \n\n};\n});\n\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = promise();\nbluebird.noConflict = noConflict;\n\n/*!\n * PatternFly Elements: PfeNavigation 1.0.0-prerelease.19\n * @license\n * Copyright 2019 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nif (!(\"path\" in Event.prototype)) {\n  Object.defineProperty(Event.prototype, \"path\", {\n    get: function() {\n      var path = [];\n      var currentElem = this.target;\n      while (currentElem) {\n        path.push(currentElem);\n        currentElem = currentElem.parentElement;\n      }\n      if (path.indexOf(window) === -1 && path.indexOf(document) === -1)\n        path.push(document);\n      if (path.indexOf(window) === -1)\n        path.push(window);\n      return path;\n    }\n  });\n}\n\nclass PfeNavigationItem extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.19\";\n  }\n\n  get html() {\n    return `<style>:host{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}::slotted([slot=tray][hidden]),:host([hidden]:not([pfe-icon=menu])){display:none;visibility:hidden}::slotted([slot=trigger]){--pfe-theme--link--text-decoration:none;--pfe-theme--link--text-decoration--hover:none;--pfe-theme--link--text-decoration--focus:none;--pfe-broadcasted--color--text:var(--pfe-navigation--Color, #fff);--pfe-broadcasted--color--ui-link:var(--pfe-navigation--Color, #fff);--pfe-broadcasted--color--ui-link--hover:var(--pfe-navigation--Color, #fff);--pfe-broadcasted--color--ui-link--visited:var(--pfe-navigation--Color, #fff);--pfe-broadcasted--color--ui-link--focus:var(--pfe-navigation--Color, #fff);--pfe-theme--font-size--alpha:var(--pfe-navigation--FontSize, 14px);--pfe-theme--font-weight--alpha:var(--pfe-navigation--FontWeight, 14px);--pfe-theme--font-size--beta:var(--pfe-navigation--FontSize, 14px);--pfe-theme--font-weight--beta:var(--pfe-navigation--FontWeight, 14px);--pfe-theme--font-size--gamma:var(--pfe-navigation--FontSize, 14px);--pfe-theme--font-weight--gamma:var(--pfe-navigation--FontWeight, 14px);font-family:Overpass,Overpass,Helvetica,helvetica,arial,sans-serif;font-family:var(--pfe-theme--font-family, \"Overpass\", Overpass, Helvetica, helvetica, arial, sans-serif);font-size:14px;font-size:var(--pfe-navigation--FontSize,14px);font-weight:14px;font-weight:var(--pfe-navigation--FontWeight,14px);color:#fff;color:var(--pfe-navigation--Color,#fff);margin:0}@media screen and (max-width:1199px){:host([is_nested]) ::slotted([slot=trigger]){--pfe-navigation--Color:var(--pfe-theme--color--text, #333)}}::slotted([slot=tray]){--pfe-navigation--Color:var(--pfe-theme--color--text, #333);--pfe-navigation--FontWeight:var(--pfe-theme--color--text, #333);-webkit-transition:all cubic-bezier(.465,.183,.153,.946);transition:all cubic-bezier(.465,.183,.153,.946);-webkit-transition:all var(--pfe-theme--animation-timing,cubic-bezier(.465,.183,.153,.946));transition:all var(--pfe-theme--animation-timing,cubic-bezier(.465,.183,.153,.946));-webkit-box-sizing:border-box;box-sizing:border-box}:host([pfe-icon=menu][hidden]) ::slotted([slot=tray]){display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;visibility:visible}:host(:not([pfe-icon=menu]):not([is_nested])) ::slotted([slot=tray]),:host([is_nested][parent_hidden]) ::slotted([slot=tray]),:host([pfe-icon=menu]:not([hidden])) ::slotted([slot=tray]){position:absolute;top:100%;left:0;background-color:#fff;background-color:var(--pfe-theme--color--surface--lightest,#fff);color:var(--pfe-navigation--Color);padding:var(--pfe-navigation__tray--Padding);width:100%;max-height:calc(100vh - 84px);max-height:calc(100vh - var(--pfe-navigation--Height,84px));overflow-x:hidden;overflow-y:scroll}@media screen and (max-width:1199px){:host([is_nested]:not([parent_hidden])) ::slotted([slot=tray]){--pfe-navigation--Padding:calc(var(--pfe-navigation--Padding--vertical) / 2) var(--pfe-navigation--Padding--horizontal);position:relative;display:block;width:100%;padding:calc(var(--pfe-navigation--Padding--vertical)/ 2) var(--pfe-navigation--Padding--horizontal)}}@media screen and (max-width:1199px) and (min-width:576px){:host([is_nested]:not([parent_hidden])) ::slotted([slot=tray]){padding:var(--pfe-navigation--Padding)}}.pfe-navigation-item__trigger{--pfe-navigation--Color:var(--pfe-theme--color--text--on-dark, #fff);border-top:4px solid var(--pfe-navigation--BorderTopColor);border-top:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) var(--pfe-navigation--BorderTopColor);border-right:1px dashed var(--pfe-navigation--BorderColor);border-right:var(--pfe-theme--surface--border-width,1px) dashed var(--pfe-navigation--BorderColor);border-bottom:1px dashed var(--pfe-navigation--BorderColor);border-bottom:var(--pfe-theme--surface--border-width,1px) dashed var(--pfe-navigation--BorderColor);border-left:1px dashed var(--pfe-navigation--BorderColor);border-left:var(--pfe-theme--surface--border-width,1px) dashed var(--pfe-navigation--BorderColor);position:relative;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;--pfe-theme--link--text-decoration:none;--pfe-theme--link--text-decoration--hover:none;--pfe-theme--link--text-decoration--focus:none;text-align:center;white-space:nowrap;margin-bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:all cubic-bezier(.465,.183,.153,.946);transition:all cubic-bezier(.465,.183,.153,.946);-webkit-transition:all var(--pfe-theme--animation-timing,cubic-bezier(.465,.183,.153,.946));transition:all var(--pfe-theme--animation-timing,cubic-bezier(.465,.183,.153,.946));margin:0;outline:0;background-color:var(--pfe-navigation--BackgroundColor);padding:calc(16px / 2) 16px;padding:calc(var(--pfe-theme--container-padding,16px)/ 2) var(--pfe-theme--container-padding,16px)}.pfe-navigation-item__trigger:hover{cursor:pointer}.pfe-navigation-item__trigger :host([aria-current=location]),.pfe-navigation-item__trigger:hover{--pfe-navigation--BorderTopColor:var(--pfe-theme--color--surface--accent, #fe460d)}.pfe-navigation-item__trigger:focus{--pfe-navigation--BorderTopColor:var(--pfe-theme--color--surface--accent, #fe460d);--pfe-navigation--BorderColor:var(--pfe-theme--color--surface--lightest, #fff)}.pfe-navigation-item__trigger:focus:not(:focus-visible){outline:0}.expanded .pfe-navigation-item__trigger,.pfe-navigation-item__trigger[aria-expanded=true]{--pfe-navigation--Color:var(--pfe-theme--color--text, #333);--pfe-navigation--BackgroundColor:var(--pfe-theme--color--surface--lightest, #fff);--pfe-navigation--BorderTopColor:var(--pfe-theme--color--surface--accent, #fe460d)}@media screen and (max-width:1199px){:host([is_nested]) .pfe-navigation-item__trigger:hover{border-left:4px solid var(--pfe-navigation--BorderLeftColor--focus);border-left:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) var(--pfe-navigation--BorderLeftColor--focus)}:host([is_nested]) .pfe-navigation-item__trigger[aria-expanded=true],:host([is_nested].expanded) .pfe-navigation-item__trigger{position:relative;display:block;border-bottom:0}}@media screen and (min-width:1200px){:host([pfe-icon=menu]) .pfe-navigation-item__trigger{display:none}}:host([pfe-icon]) .pfe-navigation-item__trigger{--pfe-navigation__trigger--FontSize:14px}.pfe-navigation-item__trigger--icon{visibility:hidden}:host([has_tray]:not([pfe-icon]):not([is_nested])) [aria-expanded=false]:hover .pfe-navigation-item__trigger--icon{visibility:visible;border-top-color:var(--pfe-navigation--Color)}@media screen and (min-width:1200px){:host([has_tray]:not([pfe-icon])) [aria-expanded=false]:hover .pfe-navigation-item__trigger--icon{visibility:visible}}:host [aria-expanded=true] .pfe-navigation-item__trigger--icon{visibility:visible}:host(:not([pfe-icon])) .pfe-navigation-item__trigger--icon{border-style:solid;border-style:var(--pfe-theme--surface--border-style,solid);border-width:6px 6px 0;border-color:transparent;border-top-color:#606060;border-top-color:var(--pfe-theme--color--feedback--default,#606060);-webkit-transform:rotate(0);transform:rotate(0);position:absolute;bottom:16px;bottom:var(--pfe-theme--container-spacer,16px)}@media screen and (max-width:1199px){:host([is_nested]) [aria-expanded=false] .pfe-navigation-item__trigger--icon{visibility:visible;content:\"\";position:absolute;top:calc((16px * .75) + .55em);top:calc((var(--pfe-theme--container-spacer,16px) * .75) + .55em);display:block;border-style:solid;border-style:var(--pfe-theme--surface--border-style,solid);height:.4em;width:.4em;text-align:center;-webkit-transition:-webkit-transform .15s;transition:-webkit-transform .15s;transition:transform .15s;transition:transform .15s,-webkit-transform .15s;border-width:0 .1em .1em 0;-webkit-transform:rotate(45deg);transform:rotate(45deg);right:calc(16px * 1.5);right:calc(var(--pfe-theme--container-spacer,16px) * 1.5)}:host([is_nested]) [aria-expanded=true] .pfe-navigation-item__trigger--icon{visibility:visible;content:\"\";position:absolute;top:calc((16px * .75) + .55em);top:calc((var(--pfe-theme--container-spacer,16px) * .75) + .55em);display:block;border-style:solid;border-style:var(--pfe-theme--surface--border-style,solid);height:.4em;width:.4em;text-align:center;-webkit-transition:-webkit-transform .15s;transition:-webkit-transform .15s;transition:transform .15s;transition:transform .15s,-webkit-transform .15s;border-width:.1em .1em 0 0;border-bottom:0;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:calc(16px * 1.5);right:calc(var(--pfe-theme--container-spacer,16px) * 1.5)}:host([is_nested]:not([has_tray])) .pfe-navigation-item__trigger--icon{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}}:host([pfe-icon]) .pfe-navigation-item__trigger--icon{visibility:visible;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background:var(--pfe-navigation--icon) no-repeat;background-size:contain;background-position:center;width:21px;height:21px;margin-bottom:calc(16px / 2);margin-bottom:calc(var(--pfe-theme--container-spacer,16px)/ 2)}:host(:not([pfe-icon],[is_nested])) [aria-expanded=false] .pfe-navigation-item__trigger--icon{visibility:hidden}@media screen and (max-width:1199px){:host([is_nested]) .pfe-navigation-item__tray{display:none;overflow:hidden;will-change:height;border-color:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%}:host([is_nested]) .pfe-navigation-item__tray[aria-expanded=true],:host([is_nested].expanded) .pfe-navigation-item__tray{display:block;position:relative;border-right:1px solid transparent;border-right:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) transparent;border-left:4px solid transparent;border-left:var(--pfe-theme--surface--border-width--heavy,4px) var(--pfe-theme--surface--border-style,solid) transparent;-webkit-box-shadow:0 5px 4px rgba(140,140,140,.35);box-shadow:0 5px 4px rgba(140,140,140,.35);-webkit-box-shadow:0 5px var(--pfe-theme--surface--border-width--heavy,4px) rgba(140,140,140,.35);box-shadow:0 5px var(--pfe-theme--surface--border-width--heavy,4px) rgba(140,140,140,.35);border-left-color:#06c;border-left-color:var(--pfe-theme--color--surface--lightest--link,#06c);background-color:#fff;background-color:var(--pfe-theme--color--surface--lightest,#fff);border-right-color:#d2d2d2;border-right-color:var(--pfe-theme--color--surface--border,#d2d2d2);border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--surface--border,#d2d2d2)}}@media screen and (min-width:1200px){:host([pfe-icon=menu]) .pfe-navigation-item__tray{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1}}:host(.animating){-webkit-transition:-webkit-transform .3s cubic-bezier(.465,.183,.153,.946);transition:-webkit-transform .3s cubic-bezier(.465,.183,.153,.946);transition:transform .3s cubic-bezier(.465,.183,.153,.946);transition:transform .3s cubic-bezier(.465,.183,.153,.946),-webkit-transform .3s cubic-bezier(.465,.183,.153,.946);-webkit-transition:-webkit-transform .3s var(--pfe-theme--animation-timing,cubic-bezier(.465,.183,.153,.946));transition:-webkit-transform .3s var(--pfe-theme--animation-timing,cubic-bezier(.465,.183,.153,.946));transition:transform .3s var(--pfe-theme--animation-timing,cubic-bezier(.465,.183,.153,.946));transition:transform .3s var(--pfe-theme--animation-timing,cubic-bezier(.465,.183,.153,.946)),-webkit-transform .3s var(--pfe-theme--animation-timing,cubic-bezier(.465,.183,.153,.946))}@media screen and (max-width:1199px){:host([is_nested]){--pfe-navigation__trigger--FontSize:16px;--pfe-navigation--BackgroundColor:var(--pfe-theme--surface--lightest);--pfe-navigation--Color:var(--pfe-theme--surface--lightest--text);--pfe-navigation--main:transparent;--pfe-navigation--aux:var(--pfe-theme--color--surface--lightest--text, #333);--pfe-navigation--BorderLeft:var(--pfe-theme--surface--border-width--heavy, 4px) var(--pfe-theme--surface--border-style, solid) transparent;--pfe-navigation--BorderRight:var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) transparent;--pfe-navigation--BorderBottom:var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--border, #d2d2d2);--pfe-navigation--BorderLeftColor--focus:var(--pfe-theme--color--surface--lightest--link, #06c)}:host([is_nested]) .pfe-navigation-item__trigger{margin:0;width:100%;height:auto;font-family:inherit;font-weight:700;font-weight:var(--pfe-theme--font-weight--bold,700);text-align:left;cursor:pointer;z-index:1;position:relative;font-size:calc(16px * 1.1);font-size:calc(var(--pfe-theme--font-size,16px) * 1.1);line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);color:var(--pfe-navigation--aux);background-color:var(--pfe-navigation--main);border-left:var(--pfe-navigation--BorderLeft);border-right:var(--pfe-navigation--BorderRight);border-bottom:var(--pfe-navigation--BorderBottom);border-top:0;padding:16px 50px 16px calc(16px * 1.5);padding:var(--pfe-theme--container-spacer,16px) 50px var(--pfe-theme--container-spacer,16px) calc(var(--pfe-theme--container-spacer,16px) * 1.5);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch}:host([is_nested]) .pfe-navigation-item__trigger:hover{outline:0;border-left-color:var(--pfe-navigation--BorderLeftColor--focus);z-index:2}:host([is_nested]) .pfe-navigation-item__trigger:focus{outline:0;z-index:2;text-decoration:underline;-webkit-text-decoration-color:#c6c6c6;text-decoration-color:#c6c6c6;-webkit-text-decoration-color:var(--pfe-theme--color--surface--border--darker,#c6c6c6);text-decoration-color:var(--pfe-theme--color--surface--border--darker,#c6c6c6)}:host([is_nested]) .pfe-navigation-item__trigger::-moz-focus-inner{border:0}:host([is_nested]) .pfe-navigation-item__trigger[aria-expanded=true]{--pfe-navigation--main:var(--pfe-theme--color--surface--lightest, #fff);--pfe-navigation--aux:var(--pfe-theme--color--surface--lightest--text, #333);--pfe-navigation--focus:var(--pfe-theme--color--surface--lightest--link, #06c);--pfe-navigation--BorderLeft:var(--pfe-theme--surface--border-width--heavy, 4px) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--lightest--link, #06c);--pfe-navigation--BorderRight:var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) var(--pfe-theme--color--surface--border, #d2d2d2)}:host([is_nested][first]){border-top:1px solid #d2d2d2;border-top:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--surface--border,#d2d2d2)}:host([is_nested][last]) [aria-expanded=false]{border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-theme--surface--border-width,1px) var(--pfe-theme--surface--border-style,solid) var(--pfe-theme--color--surface--border,#d2d2d2)}}</style><div class=\"pfe-navigation-item__trigger\" aria-expanded=\"false\" tabindex=\"0\">\n    ${this.hasIcon ? `<span class=\"pfe-navigation-item__trigger--icon\"></span>` : \"\"}\n    <slot name=\"trigger\" class=\"pfe-navigation-item__trigger--slot\"></slot>\n    ${!this.hasIcon ? `<span class=\"pfe-navigation-item__trigger--icon\"></span>` : \"\"}\n</div>\n<div class=\"pfe-navigation-item__tray\">\n    <slot name=\"tray\"></slot>\n</div>`;\n  }\n\n  static get properties() {\n    return {\"icon\":{\"title\":\"Icon name\",\"type\":\"string\",\"enum\":[\"bento\",\"user\",\"globe\",\"search\",\"menu\"],\"prefixed\":true}};\n  }\n\n  static get slots() {\n    return {\"trigger\":{\"title\":\"Navigation trigger\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"raw\"}]}},\"tray\":{\"title\":\"Navigation tray\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"raw\"}]}}};\n  }\n  static get tag() {\n    return \"pfe-navigation-item\";\n  }\n\n  get templateUrl() {\n    return \"pfe-navigation-item.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-navigation-item.scss\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-navigation-item.json\";\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Container;\n  }\n\n  // Used in the template to determine where to print the icon\n  get hasIcon() {\n    return this.hasAttribute(\"pfe-icon\");\n  }\n\n  static get observedAttributes() {\n    return [\"pfe-icon\"];\n  }\n\n  get nested() {\n    return this.hasAttribute(\"is_nested\");\n  }\n\n  set nested(isNested) {\n    isNested = Boolean(isNested);\n\n    if (isNested) {\n      this.setAttribute(\"is_nested\", \"\");\n    } else {\n      this.removeAttribute(\"is_nested\");\n    }\n  }\n\n  get expanded() {\n    return this.classList.contains(\"expanded\");\n  }\n\n  set expanded(isExpanded) {\n    isExpanded = Boolean(isExpanded);\n\n    if (isExpanded) {\n      this.classList.add(\"expanded\");\n\n      if (this._trigger) {\n        this._trigger.setAttribute(\"aria-expanded\", true);\n      }\n\n      if (this.tray) {\n        this.tray.removeAttribute(\"hidden\");\n      }\n\n      if (this._tray) {\n        this._tray.setAttribute(\"aria-expanded\", true);\n      }\n    } else {\n      this.classList.remove(\"expanded\");\n\n      if (this._trigger) {\n        this._trigger.setAttribute(\"aria-expanded\", false);\n      }\n\n      if (this.tray) {\n        this.tray.setAttribute(\"hidden\", \"\");\n      }\n\n      if (this._tray) {\n        this._tray.setAttribute(\"aria-expanded\", false);\n      }\n    }\n  }\n\n  get visible() {\n    return !this.hasAttribute(\"hidden\");\n  }\n\n  set visible(isVisible) {\n    isVisible = Boolean(isVisible);\n\n    if (isVisible) {\n      this.removeAttribute(\"hidden\");\n    } else {\n      this.setAttribute(\"hidden\", \"\");\n    }\n  }\n\n  open(event) {\n    if (event) event.preventDefault();\n\n    this.dispatchEvent(\n      new CustomEvent(`${this.tag}:toggle`, {\n        detail: {\n          navigationItem: this,\n          action: \"open\"\n        },\n        bubbles: true,\n        composed: true\n      })\n    );\n  }\n\n  close(event) {\n    if (event) event.preventDefault();\n\n    this.dispatchEvent(\n      new CustomEvent(`${this.tag}:toggle`, {\n        detail: {\n          navigationItem: this,\n          action: \"close\"\n        },\n        bubbles: true,\n        composed: true\n      })\n    );\n  }\n\n  toggle(event) {\n    if (event) event.preventDefault();\n\n    this.dispatchEvent(\n      new CustomEvent(`${this.tag}:toggle`, {\n        detail: {\n          navigationItem: this\n        },\n        bubbles: true,\n        composed: true\n      })\n    );\n  }\n\n  constructor() {\n    super(PfeNavigationItem);\n\n    this.nested = false;\n    this.expanded = false;\n    this.trigger = null;\n    this.tray = null;\n    this.directLink = null;\n    this.linkUrl = null;\n\n    this._trigger = this.shadowRoot.querySelector(`.${this.tag}__trigger`);\n    this._tray = this.shadowRoot.querySelector(`.${this.tag}__tray`);\n    this._icon = this.shadowRoot.querySelector(`.${this.tag}__trigger--icon`);\n\n    // Externally accessible events\n    this.close = this.close.bind(this);\n    this.open = this.open.bind(this);\n    this.toggle = this.toggle.bind(this);\n    \n    this._init = this._init.bind(this);\n    this._keydownHandler = this._keydownHandler.bind(this);\n    this._suppressLink = this._suppressLink.bind(this);\n    this._navigateToUrl = this._navigateToUrl.bind(this);\n    this._directLinkHandler = this._directLinkHandler.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // If no slots have been assigned, assign it to the trigger slot\n    const unassigned = [...this.children].filter(child => !child.hasAttribute(\"slot\"));\n    unassigned.map(item => item.setAttribute(\"slot\", \"trigger\"));\n\n    // Get the LightDOM trigger & tray content\n    this.trigger = this.querySelector(`[slot=\"trigger\"]`);\n    this.tray = this.querySelector(`[slot=\"tray\"]`);\n\n    // Check for any nested navigation items\n    this.nestedItems = [];\n    \n    // If a light DOM tray exists, check for descendents\n    if (this.tray) {\n      this.nestedItems = this.nestedItems.concat([...this.tray.querySelectorAll(`${this.tag}`)]);\n      this.nestedItems = this.nestedItems.concat([...this.tray.querySelectorAll(\"slot\")].map(slot => {\n        return slot.assignedElements().map(node => {\n          return [...node.querySelectorAll(`${this.tag}`)];\n        });\n      }).flat(3));\n    }\n\n    this._init();\n\n    // Add a slotchange listener to the lightDOM trigger\n    this.trigger.addEventListener(\"slotchange\", this._init);\n  }\n\n  attributeChangedCallback(attr, oldValue, newValue) {\n    super.attributeChangedCallback(attr, oldValue, newValue);\n  }\n\n  disconnectedCallback() {\n    this.trigger.removeEventListener(\"slotchange\", this._init);\n\n    if (this.tray) {\n      this.removeEventListener(\"keydown\", this._keydownHandler);\n\n      this._trigger.removeEventListener(\"click\", this.toggle);\n      if (this.directLink) {\n        this.directLink.removeEventListener(\"click\", this._suppressLink);\n      }\n    } else {\n      this._trigger.removeEventListener(\"click\", this._navigateToUrl);\n      this._trigger.removeEventListener(\"keydown\", this._directLinkHandler);\n    }\n  }\n\n  _init() {\n    this.directLink = this.trigger.querySelector(\"a\");\n\n    // If there is a tray element, add click events\n    if (this.tray) {\n      // Toggle the navigation when the trigger is clicked\n      this._trigger.addEventListener(\"click\", this.toggle);\n      // Attaching to the parent element allows the exit key to work inside the tray too\n      this.addEventListener(\"keydown\", this._keydownHandler);\n\n      // Turn off the fallback link\n      if (this.directLink) {\n        this.directLink.setAttribute(\"tabindex\", \"-1\");\n        this.directLink.addEventListener(\"click\", this._suppressLink);\n      }\n    } else {\n      this.linkUrl = this.directLink ? this.directLink.href : \"#\";\n      this._trigger.addEventListener(\"click\", this._navigateToUrl);\n      this._trigger.addEventListener(\"keydown\", this._directLinkHandler);\n    }\n  }\n\n  _suppressLink(event) {\n    event.preventDefault();\n  }\n\n  _navigateToUrl(event) {\n    event.preventDefault();\n    window.location.href = this.linkUrl;\n  }\n\n  _directLinkHandler(event) {\n    switch (event.key) {\n      case \"Spacebar\":\n      case \"Enter\":\n      case \" \":\n        this._navigateToUrl(event);\n        break;\n      default:\n        return;\n    }\n  }\n\n  _keydownHandler(event) {\n    // @TODO need to add fallback key mappings for other browsers\n    switch (event.key) {\n      case \"Spacebar\":\n      case \"Enter\":\n      case \" \":\n        // Check that the event is on the trigger element\n        if (event && event.path && event.path[0] && event.path[0].classList.contains(`${this.tag}__trigger`)) {\n          this.toggle(event);\n        }\n        break;\n      case \"Esc\":\n      case \"Escape\":\n        this.close(event);\n        this.focus();\n        break;\n      default:\n        return;\n    }\n  }\n}\n\nclass PfeNavigationMain extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.19\";\n  }\n\n  get html() {\n    return `<style>:host{display:block;height:100%}::slotted(*){margin:0;padding:0;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;-ms-flex-flow:column nowrap;flex-flow:column nowrap}:host([show_content]) ::slotted(*){-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch}::slotted(ul){list-style-type:none}:host([show_content]) ::slotted(ul){display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap}</style><slot></slot>`;\n  }\n\n  static get properties() {\n    return {\"sticky\":{\"title\":\"Sticky navigation\",\"type\":\"boolean\",\"default\":true,\"prefixed\":true},\"close-on-click\":{\"title\":\"Close navigation on click event\",\"type\":\"string\",\"enum\":[\"external\"],\"default\":\"external\",\"prefixed\":true}};\n  }\n\n  static get slots() {\n    return {\"skip\":{\"title\":\"Skip navigation\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"raw\"}]}},\"logo\":{\"title\":\"Logo\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"raw\"}]}},\"search\":{\"title\":\"Search\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"pfe-navigation-item\"}]}},\"mobile-search\":{\"title\":\"Mobile search functionality\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"raw\"}]}},\"main\":{\"title\":\"Main navigation\",\"type\":\"array\",\"namedSlot\":false,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"nav\"},{\"$ref\":\"raw\"}]}},\"language\":{\"title\":\"Language switcher\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"pfe-navigation-item\"}]}},\"mobile-language\":{\"title\":\"Mobile link to language page\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"a\"}]}},\"login\":{\"title\":\"Log in\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"pfe-navigation-item\"}]}},\"mobile-login\":{\"title\":\"Mobile link to log in page\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"a\"}]}},\"site-switcher\":{\"title\":\"Site switcher\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"pfe-navigation-item\"}]}}};\n  }\n  static get tag() {\n    return \"pfe-navigation-main\";\n  }\n\n  get templateUrl() {\n    return \"pfe-navigation-main.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-navigation-main.scss\";\n  }\n\n  static get PfeType() {\n    return PFElement.PfeTypes.Container;\n  }\n\n  static get observedAttributes() {\n    return [\"show_content\"];\n  }\n\n  constructor() {\n    super(PfeNavigationMain);\n\n    // Get all the nested navigation items\n    this.navItems = this.querySelectorAll(\"pfe-navigation-item\");\n    // Find the first nested element\n    this.first = this.navItems.item(0);\n    // Find the last nested element\n    this.last = this.navItems.item(this.navItems.length - 1);\n\n    this._init = this._init.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._init();\n\n    // Add a slotchange listener to the lightDOM trigger\n    this.addEventListener(\"slotchange\", this._init);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"slotchange\", this._init);\n  }\n\n  _init() {\n    // Ensure the necessary a11y is set\n    this.setAttribute(\"role\", \"navigation\");\n    this.setAttribute(\"aria-label\", \"Main\");\n\n    // For each nested navigation item, tag it with context\n    this.navItems.forEach(item => {\n      item.nested = true;\n    });\n\n    // Tag the first and last navigation items for styling in mobile\n    if (this.first) this.first.setAttribute(\"first\", \"\");\n    if (this.last) this.last.setAttribute(\"last\", \"\");\n  }\n}\n\nclass PfeNavigation extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.19\";\n  }\n\n  get html() {\n    return `<style>:host{--pfe-navigation--Padding--vertical:var(--pfe-theme--container-padding, 16px);--pfe-navigation--Padding--horizontal:var(--pfe-theme--container-padding, 16px);--pfe-navigation--Padding:0 var(--pfe-navigation--Padding--horizontal);--pfe-navigation--BackgroundColor:var(--pfe-theme--color--surface--darkest, #131313);--pfe-navigation--Color:var(--pfe-theme--color--surface--darkest--text, #fff);--pfe-navigation--BorderTopColor:transparent;--pfe-navigation--BorderColor:transparent;--pfe-navigation--Border:var(--pfe-theme--surface--border-width, 1px) var(--pfe-theme--surface--border-style, solid) var(--pfe-navigation--BorderColor);--pfe-navigation--MinHeight:72px;--pfe-navigation--icon:none;--pfe-navigation__overlay--BackgroundColor:var(--pfe-theme--overlay--BackgroundColor, rgba(37, 37, 37, 0.5));--pfe-navigation__trigger--FontWeight:100;--pfe-navigation__tray--Padding:var(--pfe-theme--container-padding, 16px);display:block;z-index:0;z-index:var(--pfe-theme--zindex--content,0);width:100%}@media print{:host{--pfe-navigation--Padding:calc(var(--pfe-navigation--Padding--vertical) / 2) var(--pfe-navigation--Padding--horizontal)}}@media screen and (min-width:576px){:host{--pfe-navigation--Padding--horizontal:calc(var(--pfe-theme--container-padding, 16px) * 2)}}@media screen and (min-width:992px){:host{--pfe-navigation--Padding--horizontal:calc(var(--pfe-theme--container-padding, 16px) / 2);--pfe-navigation__tray--Padding:calc(var(--pfe-theme--container-padding, 16px) * 2)}}@media screen and (min-width:1200px){:host{--pfe-navigation--Padding--horizontal:var(--pfe-theme--container-padding, 16px)}}:host(.sticky){position:-webkit-sticky;position:sticky;top:0;left:0;width:100vw;z-index:99;z-index:var(--pfe-theme--zindex--navigation,99)}::slotted([slot=logo]){margin:0;max-height:var(--pfe-navigation--MinHeight)}::slotted([slot=mobile-language]),::slotted([slot=mobile-login]){color:#06c;color:var(--pfe-broadcasted--color--ui-link,#06c);text-decoration:underline;-webkit-text-decoration:var(--pfe-broadcasted--link--text-decoration,underline);text-decoration:var(--pfe-broadcasted--link--text-decoration,underline)}::slotted([slot=mobile-menu--label]){font-family:Overpass,Overpass,Helvetica,helvetica,arial,sans-serif;font-family:var(--pfe-theme--font-family, \"Overpass\", Overpass, Helvetica, helvetica, arial, sans-serif);font-size:var(--pfe-navigation--FontSize);font-weight:var(--pfe-navigation--FontWeight);color:var(--pfe-navigation--Color);margin-bottom:0}::slotted([pfe-icon=bento]),[pfe-icon=bento]{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"19px\" height=\"19px\" viewBox=\"0 0 19 19\" xml:space=\"preserve\"><g stroke=\"none\" stroke-width=\"1\" fill=\"white\" fill-rule=\"evenodd\"><g><rect x=\"14\" y=\"14\" width=\"5\" height=\"5\"></rect><rect x=\"7\" y=\"14\" width=\"5\" height=\"5\"></rect><rect x=\"0\" y=\"14\" width=\"5\" height=\"5\"></rect><rect x=\"14\" y=\"7\" width=\"5\" height=\"5\"></rect><rect x=\"7\" y=\"7\" width=\"5\" height=\"5\"></rect><rect x=\"0\" y=\"7\" width=\"5\" height=\"5\"></rect><rect x=\"14\" y=\"0\" width=\"5\" height=\"5\"></rect><rect x=\"7\" y=\"0\" width=\"5\" height=\"5\"></rect><rect x=\"0\" y=\"0\" width=\"5\" height=\"5\"></rect></g></g></svg>')}::slotted([pfe-icon=bento].expanded),[pfe-icon=bento].expanded{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"19px\" height=\"19px\" viewBox=\"0 0 19 19\" xml:space=\"preserve\"><g stroke=\"none\" stroke-width=\"1\" fill=\"black\" fill-rule=\"evenodd\"><g><rect x=\"14\" y=\"14\" width=\"5\" height=\"5\"></rect><rect x=\"7\" y=\"14\" width=\"5\" height=\"5\"></rect><rect x=\"0\" y=\"14\" width=\"5\" height=\"5\"></rect><rect x=\"14\" y=\"7\" width=\"5\" height=\"5\"></rect><rect x=\"7\" y=\"7\" width=\"5\" height=\"5\"></rect><rect x=\"0\" y=\"7\" width=\"5\" height=\"5\"></rect><rect x=\"14\" y=\"0\" width=\"5\" height=\"5\"></rect><rect x=\"7\" y=\"0\" width=\"5\" height=\"5\"></rect><rect x=\"0\" y=\"0\" width=\"5\" height=\"5\"></rect></g></g></svg>')}::slotted([pfe-icon=user]),[pfe-icon=user]{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"21px\" height=\"20px\" viewBox=\"0 -1 21 20\" xml:space=\"preserve\"><g stroke=\"white\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\"><g><path d=\"M0,19 C0,13.75 4.25,9.5 9.5,9.5 C14.75,9.5 19,13.75 19,19\"></path><circle cx=\"9.5\" cy=\"4.75\" r=\"4.75\"></circle></g></g></svg>')}::slotted([pfe-icon=user].expanded),[pfe-icon=user].expanded{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"21px\" height=\"20px\" viewBox=\"0 -1 21 20\" xml:space=\"preserve\"><g stroke=\"black\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\"><g><path d=\"M0,19 C0,13.75 4.25,9.5 9.5,9.5 C14.75,9.5 19,13.75 19,19\"></path><circle cx=\"9.5\" cy=\"4.75\" r=\"4.75\"></circle></g></g></svg>')}::slotted([pfe-icon=globe]),[pfe-icon=globe]{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"21px\" height=\"21px\" viewBox=\"-1 -1 21 21\" xml:space=\"preserve\"><g stroke=\"white\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g><circle cx=\"9.5\" cy=\"9.5\" r=\"9.5\"></circle><ellipse cx=\"9.5\" cy=\"9.5\" rx=\"4.75\" ry=\"9.5\"></ellipse><path d=\"M9.5,0 L9.5,19\"></path><path d=\"M1,14 L18,14\"></path><path d=\"M0,9.5 L19,9.5\"></path><path d=\"M1,5 L18,5\"></path></g></g></svg>')}::slotted([pfe-icon=globe].expanded),[pfe-icon=globe].expanded{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"21px\" height=\"21px\" viewBox=\"-1 -1 21 21\" xml:space=\"preserve\"><g stroke=\"black\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g><circle cx=\"9.5\" cy=\"9.5\" r=\"9.5\"></circle><ellipse cx=\"9.5\" cy=\"9.5\" rx=\"4.75\" ry=\"9.5\"></ellipse><path d=\"M9.5,0 L9.5,19\"></path><path d=\"M1,14 L18,14\"></path><path d=\"M0,9.5 L19,9.5\"></path><path d=\"M1,5 L18,5\"></path></g></g></svg>')}::slotted([pfe-icon=search]),[pfe-icon=search]{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"20px\" height=\"20px\" viewBox=\"-1 -1 21 21\" xml:space=\"preserve\"><g stroke=\"white\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g><path d=\"M12,13 L18,19\" stroke-linecap=\"round\"></path><ellipse cx=\"7\" cy=\"7.5\" rx=\"7\" ry=\"7.5\"></ellipse></g></g></svg>')}::slotted([pfe-icon=search].expanded),[pfe-icon=search].expanded{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"20px\" height=\"20px\" viewBox=\"-1 -1 21 21\" xml:space=\"preserve\"><g stroke=\"black\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g><path d=\"M12,13 L18,19\" stroke-linecap=\"round\"></path><ellipse cx=\"7\" cy=\"7.5\" rx=\"7\" ry=\"7.5\"></ellipse></g></g></svg>')}::slotted([pfe-icon=menu]),[pfe-icon=menu]{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"23px\" height=\"18px\" viewBox=\"0 0 23 18\" xml:space=\"preserve\"><g stroke=\"white\" stroke-width=\"1\" fill=\"white\" fill-rule=\"evenodd\"><g><rect x=\"0.5\" y=\"14.5\" width=\"22\" height=\"3\"></rect><rect x=\"0.5\" y=\"7.5\" width=\"22\" height=\"3\"></rect><rect x=\"0.5\" y=\"0.5\" width=\"22\" height=\"3\"></rect></g></g></svg>')}::slotted([pfe-icon=menu].expanded),[pfe-icon=menu].expanded{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"32\" height=\"32\" viewBox=\"-11 11 22 23\"><path fill=\"black\" d=\"M30 16.669v-1.331c0-0.363-0.131-0.675-0.394-0.938s-0.575-0.394-0.938-0.394h-10.669v-10.65c0-0.362-0.131-0.675-0.394-0.938s-0.575-0.394-0.938-0.394h-1.331c-0.363 0-0.675 0.131-0.938 0.394s-0.394 0.575-0.394 0.938v10.644h-10.675c-0.362 0-0.675 0.131-0.938 0.394s-0.394 0.575-0.394 0.938v1.331c0 0.363 0.131 0.675 0.394 0.938s0.575 0.394 0.938 0.394h10.669v10.644c0 0.363 0.131 0.675 0.394 0.938 0.262 0.262 0.575 0.394 0.938 0.394h1.331c0.363 0 0.675-0.131 0.938-0.394s0.394-0.575 0.394-0.938v-10.637h10.669c0.363 0 0.675-0.131 0.938-0.394 0.269-0.262 0.4-0.575 0.4-0.938z\" transform=\"rotate(45)\"/></svg>')}.pfe-navigation__wrapper{position:relative;z-index:99;z-index:var(--pfe-theme--navigation,99);background-color:#131313;background-color:var(--pfe-navigation--BackgroundColor);color:var(--pfe-navigation--Color);min-height:var(--pfe-navigation--MinHeight)}.pfe-navigation__container{margin:0 auto;padding:0 var(--pfe-navigation--Padding--horizontal);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}@media screen and (min-width:768px){.pfe-navigation__container{--pfe-navigation--Width:calc(768px - calc(var(--pfe-navigation--Padding--horizontal) * 2));width:calc(768px - 2rem);width:var(--pfe-navigation--Width)}}@media screen and (min-width:992px){.pfe-navigation__container{--pfe-navigation--Width:calc(992px - calc(var(--pfe-navigation--Padding--horizontal) * 2));width:calc(992px - 2rem);width:var(--pfe-navigation--Width)}}@media screen and (min-width:1200px){.pfe-navigation__container{--pfe-navigation--Width:calc(1200px - calc(var(--pfe-navigation--Padding--horizontal) * 2));width:calc(1200px - 2rem);width:var(--pfe-navigation--Width)}}@media (min-width:992px){.pfe-navigation__container{padding:0}}.pfe-navigation__overlay{display:block;background-color:rgba(37,37,37,.5);background-color:var(--pfe-navigation__overlay--BackgroundColor,rgba(37,37,37,.5));position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:98;z-index:var(--pfe-theme--zindex--overlay,98)}.pfe-navigation__overlay[hidden]{display:none}.pfe-navigation__logo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-top:var(--pfe-navigation--Padding--vertical);padding-right:16px;padding-right:var(--pfe-theme--container-padding,16px);padding-bottom:var(--pfe-navigation--Padding--vertical)}.pfe-navigation__skip{position:absolute;overflow:hidden;clip:rect(0,0,0,0);height:1px;width:1px;margin:-1px;padding:0;border:0}.pfe-navigation__main{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}@media (min-width:1200px){.pfe-navigation__main{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}}.pfe-navigation__main--mobile{display:grid;grid-gap:16px;grid-gap:var(--pfe-theme--container-spacer,16px);height:100%}@media (min-width:992px){.pfe-navigation__main--mobile-search{display:none}}.pfe-navigation__main--mobile--columns{display:grid;grid-gap:16px;grid-gap:var(--pfe-theme--container-spacer,16px);grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}@media (min-width:768px){.pfe-navigation__main--mobile--columns{display:none}}.pfe-navigation__main--mobile--item[pfe-icon=user]{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"21px\" height=\"20px\" viewBox=\"0 -1 21 20\" xml:space=\"preserve\"><g stroke=\"royalblue\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\"><g><path d=\"M0,19 C0,13.75 4.25,9.5 9.5,9.5 C14.75,9.5 19,13.75 19,19\"></path><circle cx=\"9.5\" cy=\"4.75\" r=\"4.75\"></circle></g></g></svg>')}.pfe-navigation__main--mobile--item[pfe-icon=globe]{--pfe-navigation--icon:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"21px\" height=\"21px\" viewBox=\"-1 -1 21 21\" xml:space=\"preserve\"><g stroke=\"royalblue\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g><circle cx=\"9.5\" cy=\"9.5\" r=\"9.5\"></circle><ellipse cx=\"9.5\" cy=\"9.5\" rx=\"4.75\" ry=\"9.5\"></ellipse><path d=\"M9.5,0 L9.5,19\"></path><path d=\"M1,14 L18,14\"></path><path d=\"M0,9.5 L19,9.5\"></path><path d=\"M1,5 L18,5\"></path></g></g></svg>')}.pfe-navigation__main--icon{display:inline-block;background:var(--pfe-navigation--icon) no-repeat;background-size:contain;background-position:center;width:1em;height:1em;margin-right:calc(16px / 2);margin-right:calc(var(--pfe-theme--container-spacer,16px)/ 2)}.pfe-navigation__utility{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}</style><div class=\"pfe-navigation__wrapper\">\n  <div class=\"pfe-navigation__container\">\n    <div class=\"pfe-navigation__logo\">\n      <slot name=\"logo\"></slot>\n    </div>\n    <div class=\"pfe-navigation__skip\">\n      <slot name=\"skip\"></slot>\n    </div>\n    <div class=\"pfe-navigation__main\">\n      <pfe-navigation-item pfe-icon=\"menu\">\n        <span slot=\"trigger\">\n          <slot name=\"mobile-menu--label\" class=\"pfe-navigation__main--menu-label\"></slot>\n        </span>\n        <div slot=\"tray\" hidden>\n          <div class=\"pfe-navigation__main--mobile\">\n            <slot name=\"mobile-search\" class=\"pfe-navigation__main--mobile-search\"></slot>\n            <slot></slot>\n            <div class=\"pfe-navigation__main--mobile--columns\">\n              <span class=\"pfe-navigation__main--mobile--item\" pfe-icon=\"user\">\n                <span class=\"pfe-navigation__main--icon\"></span>\n                <slot name=\"mobile-login\"></slot>\n              </span>\n              <span class=\"pfe-navigation__main--mobile--item\" pfe-icon=\"globe\">\n                <span class=\"pfe-navigation__main--icon\"></span>\n                <slot name=\"mobile-language\"></slot>\n              </span>\n            </div>\n          </div>\n        </div>\n      </pfe-navigation-item>\n    </div>\n    <div class=\"pfe-navigation__utility\">\n      <slot name=\"language\"></slot>\n      <slot name=\"search\"></slot>\n      <slot name=\"login\"></slot>\n      <slot name=\"site-switcher\"></slot>\n    </div>\n  </div>\n  <div class=\"pfe-navigation__end\" hidden tabindex=\"-1\"></div>\n</div>\n<div class=\"pfe-navigation__overlay\" hidden></div>`;\n  }\n\n  static get properties() {\n    return {\"sticky\":{\"title\":\"Sticky navigation\",\"type\":\"boolean\",\"default\":true,\"prefixed\":true},\"close-on-click\":{\"title\":\"Close navigation on click event\",\"type\":\"string\",\"enum\":[\"external\"],\"default\":\"external\",\"prefixed\":true}};\n  }\n\n  static get slots() {\n    return {\"skip\":{\"title\":\"Skip navigation\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"raw\"}]}},\"logo\":{\"title\":\"Logo\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"raw\"}]}},\"search\":{\"title\":\"Search\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"pfe-navigation-item\"}]}},\"mobile-search\":{\"title\":\"Mobile search functionality\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"raw\"}]}},\"main\":{\"title\":\"Main navigation\",\"type\":\"array\",\"namedSlot\":false,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"nav\"},{\"$ref\":\"raw\"}]}},\"language\":{\"title\":\"Language switcher\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"pfe-navigation-item\"}]}},\"mobile-language\":{\"title\":\"Mobile link to language page\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"a\"}]}},\"login\":{\"title\":\"Log in\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"pfe-navigation-item\"}]}},\"mobile-login\":{\"title\":\"Mobile link to log in page\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"a\"}]}},\"site-switcher\":{\"title\":\"Site switcher\",\"type\":\"array\",\"namedSlot\":true,\"items\":{\"title\":\"Item\",\"oneOf\":[{\"$ref\":\"pfe-navigation-item\"}]}}};\n  }\n  static get tag() {\n    return \"pfe-navigation\";\n  }\n\n  get templateUrl() {\n    return \"pfe-navigation.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-navigation.scss\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-navigation.json\";\n  }\n\n  closeAllNavigationItems() {\n    this.dispatchEvent(\n      new CustomEvent(\"pfe-navigation-item:toggle\", {\n        detail: {\n          action: \"close\"\n        },\n        bubbles: true,\n        composed: true\n      })\n    );\n  }\n\n  get overlay() {\n    return !this._overlay.hasAttribute(\"hidden\");\n  }\n\n  set overlay(state) {\n    if (state) {\n      // Add the overlay to the page\n      this._overlay.removeAttribute(\"hidden\");\n      // This prevents background scroll while nav is open\n      document.body.style.overflow = \"hidden\";\n    } else {\n      // Remove the overlay from the page\n      this._overlay.setAttribute(\"hidden\", \"\");\n      // Allow background to scroll again\n      document.body.style.overflow = \"auto\";\n\n    }\n  }\n\n  constructor() {\n    super(PfeNavigation);\n\n    // Attach functions for use below\n    this._init = this._init.bind(this);\n    this._setVisibility = this._setVisibility.bind(this);\n\n    // -- handlers\n    this._toggledHandler = this._toggledHandler.bind(this);\n    this._closeAllNavigationItems = this._closeAllNavigationItems.bind(this);\n    this._observerHandler = this._observerHandler.bind(this);\n    this._resizeHandler = this._resizeHandler.bind(this);\n    this._stickyHandler = this._stickyHandler.bind(this);\n    this.closeAllNavigationItems = this.closeAllNavigationItems.bind(this);\n    this._outsideListener = this._outsideListener.bind(this);\n    this._observer = new MutationObserver(this._observerHandler);\n\n    // Capture shadow elements\n    this._overlay = this.shadowRoot.querySelector(\".pfe-navigation__overlay\");\n    this._menuItem = this.shadowRoot.querySelector(\"pfe-navigation-item[pfe-icon='menu']\");\n\n    // Initialize active navigation item to empty array\n    this._activeNavigationItems = [];\n    // Set the state of this element to false until initialized\n    this.initialized = false;\n    this.overlay = false;\n    // Initial position of this element from the top of the screen\n    this.top = this.getBoundingClientRect().top || 0;\n\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // If this element contains light DOM, initialize it\n    if (this.children.length) {\n      // If only one value exists in the array, it starts at that size and goes up\n      this.breakpoints = {\n        main: [0, 1200], // visible from 0 - 1200px\n        search: [768],   // visible from 768px +\n        \"mobile-search\": [0, 767],\n        language: [768],\n        \"mobile-language\": [0, 767],\n        login: [768],\n        \"mobile-login\": [0, 767]\n      };\n\n      // Kick off the initialization of the light DOM elements\n      this.initialized = this._init();\n\n      // Listen for the toggled event on the navigation children\n      this.addEventListener(\"pfe-navigation-item:toggle\", this._toggledHandler);\n\n      // Watch for screen resizing\n      window.addEventListener(\"resize\", this._resizeHandler);\n    } else {\n      console.error(\"This component does not have any light DOM children.  Please check documentation for requirements.\");\n    }\n  }\n\n  disconnectedCallback() {\n    // Remove the custom listener for the toggled event\n    this.removeEventListener(\"pfe-navigation-item:toggle\", this._toggledHandler);\n\n    // Remove the scroll, resize, and outside click event listeners\n    window.removeEventListener(\"resize\", this._resizeHandler);\n    window.removeEventListener(\"scroll\", this._stickyHandler);\n    document.removeEventListener(\"click\", this._outsideListener);\n\n    this._observer.disconnect();\n  }\n\n  _observerHandler(mutationsList) {\n    // Reset the state to false, rerun the initializer\n    this.initialized = false;\n    this.initialized = this._init();\n  }\n\n  _resizeHandler(event) {\n    // Set the visibility of items\n    this._setVisibility(this.offsetWidth);\n    \n    // Check what the active item is\n    this._activeNavigationItems.forEach(item => {\n      // If the item is open but not visible, update it to hidden\n      if (item.expanded && !item.visible) {\n        item.expanded = false;\n        this._activeNavigationItems = this._activeNavigationItems.filter(i => i !== item);\n      } else if (item.expanded && item.parent && item.parent.visible) {\n        item.parent.expanded = true; // Ensure the parent is open\n        // If the parent item doesn't exist in the active array, add it\n        if (!this._activeNavigationItems.includes(item.parent)) {\n          this._activeNavigationItems.push(item.parent);\n        }\n      }\n    });\n\n    this.overlay = this._activeNavigationItems.length > 0;\n  }\n\n  _closeAllNavigationItems() {\n    // Close any open navigation items\n    this._activeNavigationItems = this._activeNavigationItems.filter(item => {\n      item.expanded = false;\n      return false;\n    });\n\n    this.overlay = this._activeNavigationItems.length > 0;\n  }\n\n  _toggledHandler(event) {\n    let close = event && event.detail ? event.detail.action === \"close\" : false;\n    let newItem = event && event.detail ? event.detail.navigationItem : null;\n    let currentItems = this._activeNavigationItems;\n\n    // Check if the new item shares a parent with the current one and that the parent is visible\n    let openSibling = currentItems.filter(item => newItem && newItem.parent && newItem.parent === item.parent && newItem.parent.visible);\n    let hasOpenParent = newItem && newItem.parent && newItem.parent.visible && currentItems.includes(newItem.parent);\n    let isOpen = currentItems.includes(newItem);\n\n    // If the action is specifically to close the item or there is a new item and it isn't visibly nested\n    if (close || (!newItem && currentItems.length > 0) || (newItem && newItem.visible && !hasOpenParent)) {\n      // Close the items in the array and remove them\n      currentItems.map(item => {\n        item.expanded = false;\n      });\n      this._activeNavigationItems = [];\n    }\n    // If there is a new item and it isn't visibly nested\n    else if (newItem && newItem.visible && hasOpenParent && openSibling.length > 0) {\n      // Close the items in the array and remove them\n      this._activeNavigationItems = currentItems.filter(item => {\n        if (item !== newItem.parent) {\n          item.expanded = false;\n        } else {\n          return item;\n        }\n      });\n    }\n\n    // If the clicked item is open, close itself\n    if (isOpen) {\n      newItem.expanded = false;\n      // Remove this item from the active items\n      this._activeNavigationItems = currentItems.filter(item => item !== newItem);\n    }\n    // If there are no open items and it's a visible element\n    else if(newItem && !isOpen && !close) {\n      // Open that item and add it to the active array\n      newItem.expanded = true;\n      this._activeNavigationItems.push(newItem);\n    } else {\n      this._closeAllNavigationItems();\n    }\n\n    // The overlay is open if any active items exist\n    this.overlay = (this._activeNavigationItems.length > 0);\n    \n    return;\n  }\n\n  _stickyHandler() {\n    if(window.pageYOffset >= this.top) {\n      this.classList.add(\"sticky\");\n    } else {\n      this.classList.remove(\"sticky\");\n    }\n  }\n\n  _outsideListener(event) {\n    if ((event.target !== this && event.target.closest(\"pfe-navigation\") === null) || event.path.length > 0 && event.path[0] === this._overlay) {\n      this._closeAllNavigationItems();\n    }\n  }\n\n  _setVisibility(width) {\n    Object.entries(this.breakpoints).map(item => {\n      let label = item[0];\n      let bps = item[1];\n      let start = bps[0];\n      let end = bps[1];\n      let isVisible = false;\n\n      // If the slot exists, set attribute based on supported breakpoints\n      if (this.slots[label] && this.slots[label].nodes.length > 0) {\n        if (width > start && (!end || (end && width < end))) {\n          isVisible = true;\n        }\n\n        this.slots[label].nodes.forEach(node => {\n          if (label !== \"main\") {\n            node.visible = isVisible;\n          } else {\n            isVisible ? node.removeAttribute(\"show_content\") : node.setAttribute(\"show_content\", \"\");\n            this._menuItem.visible = isVisible;\n            node.navItems.forEach(item => isVisible ? item.removeAttribute(\"parent_hidden\") : item.setAttribute(\"parent_hidden\", \"\"));\n          }\n        });\n      }\n    });\n  }\n\n  _init() {\n    if(!this.initialized) {\n      // @IE11 This is necessary so the script doesn't become non-responsive\n      if (window.ShadyCSS) {\n        this._observer.disconnect();\n      }\n\n      // Connect the shadow menu with the main component\n      let mainNav = this.querySelector(\"pfe-navigation-main\");\n      if (mainNav && mainNav.navItems) {\n        mainNav.navItems.forEach(item => {\n          item.parent = this._menuItem;\n        });\n      }\n  \n      // Start by setting the visibility of the slots\n      this._setVisibility(this.offsetWidth);\n\n      // If the nav is set to sticky, inject the height of the nav to the next element in the DOM\n      if(this.hasAttribute(\"pfe-sticky\") && this.getAttribute(\"pfe-sticky\") != \"false\") {\n        // Run the sticky check on first page load\n        this._stickyHandler();\n\n        // Attach the scroll event to the window\n        window.addEventListener(\"scroll\", this._stickyHandler);\n      }\n\n      // Listen for clicks outside the navigation element\n      if(this.hasAttribute(\"pfe-close-on-click\") && this.getAttribute(\"pfe-close-on-click\") === \"external\") {\n        document.addEventListener(\"click\", this._outsideListener);\n      }\n\n      // @IE11 This is necessary so the script doesn't become non-responsive\n      if (window.ShadyCSS) {\n        setTimeout(() => {\n          this._observer.observe(this, {\n            childList: true,\n            subtree: true,\n            characterData: true\n          });\n        }, 0);\n      }\n    }\n\n    return true;\n  }\n}\n\nPFElement.create(PfeNavigationItem);\nPFElement.create(PfeNavigationMain);\nPFElement.create(PfeNavigation);\n\nexport default PfeNavigation;\n//# sourceMappingURL=pfe-navigation.js.map\n"],"names":["commonjsGlobal","window","global","self","createCommonjsModule","fn","module","exports","es5","isES5","undefined","freeze","Object","defineProperty","getDescriptor","getOwnPropertyDescriptor","keys","names","getOwnPropertyNames","getPrototypeOf","isArray","Array","propertyIsWritable","obj","prop","descriptor","writable","set","has","hasOwnProperty","str","toString","proto","constructor","prototype","ObjectKeys","o","ret","key","call","push","ObjectGetDescriptor","value","ObjectDefineProperty","desc","ObjectFreeze","ObjectGetPrototypeOf","e","ArrayIsArray","es5_1","es5_2","es5_3","es5_4","es5_5","es5_6","es5_7","es5_8","es5_9","canEvaluate","navigator","errorObj","tryCatchTarget","globalObject","tryCatcher","target","apply","arguments","tryCatch","inherits","Child","Parent","hasProp","T","constructor$","propertyName","charAt","length","isPrimitive","val","isObject","maybeWrapAsError","maybeError","Error","safeToString","withAppended","appendee","len","i","getDataPropertyOrDefault","defaultValue","get","notEnumerableProp","name","configurable","enumerable","thrower","r","inheritedDataKeys","excludedPrototypes","Function","isExcludedProto","getKeys","visitedKeys","create","enumeration","thisAssignmentPattern","isClass","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","test","toFastProperties","eval","rident","isIdentifier","filledRange","count","prefix","suffix","isError","message","markAsOriginatingFromRejection","ignore","originatesFromRejection","OperationalError","canAttachTrace","ensureErrorObject","err","classString","copyDescriptors","from","to","filter","asArray","v","Symbol","iterator","ArrayFrom","it","itResult","next","done","isNode","process","toLowerCase","hasEnvVariables","env","getNativePromise","Promise","promise","domainBind","cb","bind","hasDevTools","chrome","loadTimes","isRecentNode","version","versions","node","split","map","Number","lastLineError","util","schedule","noAsyncScheduler","NativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","resolve","nativePromise","then","standalone","cordova","div","document","createElement","opts","attributes","toggleScheduled","div2","o2","classList","toggle","observe","scheduleToggle","disconnect","setTimeout","schedule_1","arrayMove","src","srcIndex","dst","dstIndex","j","Queue","capacity","_capacity","_length","_front","_willBeOverCapacity","size","_pushOne","arg","_checkCapacity","receiver","wrapMask","shift","front","_resizeTo","oldCapacity","moveItemsCount","queue","firstLineError","Async","_customScheduler","_isTickUsed","_lateQueue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","setScheduler","prev","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","haveItemsQueued","fatalError","stderr","write","stack","exit","throwLater","AsyncInvokeLater","_queueTick","AsyncInvoke","AsyncSettlePromises","invokeLater","invoke","settlePromises","_settlePromises","_drainQueue","queue$$1","_drainQueueStep","_reset","async","firstLineError_1","Objectfreeze","inherits$1","notEnumerableProp$1","subError","nameProperty","defaultMessage","SubError","captureStackTrace","_TypeError","_RangeError","Warning","CancellationError","TimeoutError","AggregateError","TypeError","RangeError","methods","level","indent","join","lines","cause","errorTypes","RejectionError","errors","thenables","INTERNAL","util$$1","tryConvertToPromise","context","getThen","_pushContext","reject","_popContext","isAnyBluebirdPromise","_then","_fulfill","_reject","doThenable","doGetThen","x","_captureStackTrace","synchronous","result","_rejectCallback","_resolveCallback","reason","promise_array","apiRejection","Proxyable","toResolutionValue","Map","PromiseArray","values","_promise","_propagateFrom","_setOnCancel","_values","_totalResolved","_init","init","_","resolveValueIfEmpty","_target","bitField","_bitField","_setAsyncGuaranteed","_value","_reason","_cancel","_resolveEmptyArray","_resolve","_iterate","getActualLength","shouldCopyValues","isResolved","maybePromise","suppressUnhandledRejections","_proxy","_promiseFulfilled","_promiseRejected","_promiseCancelled","_isResolved","_isCancellable","index","totalResolved","_resultCancelled","cancel","longStackTraces","contextStack","_promiseCreated","_peekContext","Context","_trace","CapturedTrace","peekContext","trace","pop","createContext","lastIndex","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","debuggability","getDomain","_getDomain","_async","es5$$1","unhandledRejectionHandled","possiblyUnhandledRejection","bluebirdFramePattern","nodeFramePattern","parseLinePattern","stackFramePattern","formatStack","indentStackFrames","printWarning","debugging","warnings","wForgottenReturn","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","fireRejectionEvent","_setReturnedNonUndefined","_returnedNonUndefined","_isRejectionUnhandled","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","_warn","shouldUseOwnTrace","warn","onPossiblyUnhandledRejection","domain","onUnhandledRejectionHandled","disableLongStackTraces","config","longStackTracesIsSupported","Promise_captureStackTrace","Promise_attachExtraTrace","_attachExtraTrace","Promise_dereferenceTrace","_dereferenceTrace","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","longStackTracesDereferenceTrace","hasLongStackTraces","fireDomEvent","CustomEvent","event","dispatchEvent","eventData","detail","cancelable","domEvent","Event","createEvent","initCustomEvent","fireGlobalEvent","emit","methodName","method","slice","generatePromiseLifecycleEventObject","eventToObjectGenerator","promiseCreated","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","child","warning","unhandledRejection","rejectionHandled","activeFireEvent","globalEventFired","domEventFired","warningsOption","cancellation","_clearCancellationData","cancellationClearCancellationData","cancellationPropagateFrom","_onCancel","cancellationOnCancel","cancellationSetOnCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","_execute","cancellationExecute","propagateFromFunction","monitoring","_fireEvent","defaultFireEvent","executor","handler","onCancel","parent","flags","previousOnCancel","_onCancelField","_cancellationParent","branchesRemainingToCancel","_branchesRemainingToCancel","_isBound","_setBoundTo","_boundTo","bindingPropagateFrom","boundValueFunction","isFulfilled","error","ignoreSelf","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","checkForgottenReturns","returnValue","handlerLine","creatorLine","traceLines","cleanStack","line","lineMatches","match","firstUserLine","msg","deprecated","replacement","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","isTraceLine","isInternalFrame","shouldIgnore","stackFramesAsArray","replace","title","isSoft","console","String","log","babelHelpers.typeof","localHandler","localEventFired","formatNonError","ruselessToString","newStr","JSON","stringify","snip","maxChars","substr","parseLineInfoRegex","parseLineInfo","matches","fileName","parseInt","setBounds","firstStackLines","lastStackLines","firstIndex","firstFileName","lastFileName","info","_promisesCreated","uncycle","nodes","stackToIndex","currentStack","cycleEdgeNode","currentChildLength","stackDetection","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","indexOf","hasStackAfterThrow","isTTY","color","catch_filter","NEXT_FILTER","catchFilter","instances","boundTo","_boundValue","predicateLoop","item","matchesPredicate","_finally","PassThroughHandlerContext","type","called","cancelPromise","isFinallyHandler","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","_isCancelled","isPending","isRejected","_passThrough","success","lastly","tap","tapCatch","handlerOrPredicate","catchInstances","maybeWrapAsError$1","OperationalError$1","isUntypedError","rErrorKey","wrapAsOperationalError","nodebackForPromise","multiArgs","wrapped","$_len","args","Math","max","$_i","nodeback","debug","_resolveFromSyncValue","attempt","calledBind","rejectThis","targetRejected","promiseRejectionQueued","bindingPromise","bindingResolved","thisArg","bindingRejected","_cancelBy","_isFollowing","_followee","_cancelBranched","_setWillBeCancelled","_branchHasCancelled","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_setCancelled","_cancelPromises","_unsetOnCancel","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","_invokeInternalOnCancel","direct_resolve","returner","thenReturn","thenThrow","catchThrow","caught","catchReturn","synchronous_inspection","PromiseInspection","_settledValueField","_isFateSealed","__isCancelled","thenCallback","promiseSetter","generateHolderClass","total","props","assignment","cancellationCode","passedArguments","code","holderClasses","thenCallbacks","promiseSetters","last","HolderClass","holder","callbacks","asyncNeeded","spread","MappingPromiseArray","promises","limit","_filter","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","_init$","preservedValues","callback","booleans","options","concurrency","isFinite","cr","callerCache","getterCache","call_get","getMethodCaller","getGetter","makeMethodCaller","ensureMethod","makeGetter","getCompiled","compiler","cache","caller","maybeCaller","namedGetter","indexedGetter","isIndex","getter","maybeGetter","using","NULL","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","resources","inspection","tryDispose","Disposer","data","_data","_context","resource","doDispose","_unsetDisposable","isDisposer","d","FunctionDisposer","maybeUnwrapDisposer","ResourceList","input","spreadArgs","disposer","reflectedResources","reflect","resultPromise","all","inspections","_disposer","timers","HandleWrapper","handle","clearTimeout","afterValue","delay","ms","afterTimeout","successClear","failureClear","timeout","handleWrapper","timeoutTimeout","generators","errors$$1","yieldHandlers","promiseFromYieldHandler","traceParent","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","concat","_yieldedPromise","_cancellationPhase","_cleanup","implementsReturn","coroutine","returnSentinel","_continue","_run","PromiseSpawn$","generator","spawn","addYieldHandler","nodeify","spreadAdapter","successAdapter","errorAdapter","newReason","asCallback","adapter","promisify","THIS","defaultSuffix","defaultPromisified","__isPromisified__","noCopyProps","noCopyPropsPattern","RegExp","defaultFilter","propsFilter","isPromisified","hasPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","passesDefaultFilter","escapeIdentRegex","makeNodePromisifiedEval","switchCaseArgumentOrder","likelyArgumentCount","min","argumentSequence","argumentCount","parameterDeclaration","parameterCount","originalName","newParameterCount","argumentOrder","shouldProxyThis","generateCallForArgumentCount","comma","generateArgumentSwitchCase","getFunctionCode","body","makeNodePromisifiedClosure","__","defaultThis","promisified","makeNodePromisified","promisifyAll","promisifier","promisifiedKey","Es6Map","mapToEntries","extractEntry","forEach","entriesToMap","entries","PropertiesPromiseArray","isMap","_isMap","keyOffset","castValue","race","raceLater","array","fulfill","cast","reduce","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","_gotAccum","accum","_eachComplete","sender","_resultCancelled$","gotAccum","completed","valueOrReason","gotValue","settle","SettledPromiseArray","_promiseResolved","some","CANCELLATION","SomePromiseArray","_howMany","_unwrap","_initialized","isArrayResolved","_canPossiblyFulfill","_getRangeError","setUnwrap","howMany","setHowMany","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","_SomePromiseArray","PromiseMap","each","PromiseReduce","PromiseAll","promiseAllThis","PromiseMapSeries","mapSeries","any","makeSelfResolutionError","reflectHandler","UNDEFINED_BINDING","async$$1","APPLY","check","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","getNewLibraryCopy","is","fromNode","fromCallback","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","_migrateCallbackAt","base","proxyable","shouldBind","_setFollowee","ignoreNonErrorWarnings","hasStack","_settlePromiseFromHandler","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","deferResolve","deferReject","defer","pending","fillTypes","p","a","b","c","old","noConflict","bluebird","path","currentElem","parentElement","PfeNavigationItem","preventDefault","tag","navigationItem","action","bubbles","composed","hasIcon","hasAttribute","isNested","Boolean","setAttribute","removeAttribute","contains","isExpanded","add","_trigger","tray","_tray","remove","isVisible","PFElement","PfeTypes","Container","nested","expanded","trigger","directLink","linkUrl","shadowRoot","querySelector","_icon","close","open","_keydownHandler","_suppressLink","_navigateToUrl","_directLinkHandler","unassigned","children","nestedItems","querySelectorAll","slot","assignedElements","flat","addEventListener","attr","oldValue","newValue","removeEventListener","href","location","focus","PfeNavigationMain","navItems","first","PfeNavigation","_overlay","state","style","overflow","_setVisibility","_toggledHandler","_closeAllNavigationItems","_observerHandler","_resizeHandler","_stickyHandler","closeAllNavigationItems","_outsideListener","_observer","_menuItem","_activeNavigationItems","initialized","overlay","top","getBoundingClientRect","breakpoints","main","search","language","login","mutationsList","offsetWidth","visible","includes","newItem","currentItems","openSibling","hasOpenParent","isOpen","pageYOffset","closest","width","label","bps","start","end","slots","ShadyCSS","mainNav","getAttribute","childList","subtree","characterData"],"mappings":"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"}