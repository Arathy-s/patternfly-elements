{"version":3,"file":"rh-avatar.umd.js","sources":["djb-hash.js","rh-avatar.umd.js"],"sourcesContent":["/**\n * djb2 string hashing function.\n *\n * @see http://www.cse.yorku.ca/~oz/hash.html\n * @param {String} str the string to hash.\n * @return {Number} a positive integer\n */\n\nfunction hash(str) {\n  let hash = 5381;\n  let i = str.length;\n\n  while (i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  return hash >>> 0;\n}\n\nexport { hash };\n","/*\n * Copyright 2018 Red Hat, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport RHElement from \"../rhelement/rhelement.umd.js\";\nimport { hash } from \"./djb-hash.js\";\n\nclass RhAvatar extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  --rh-avatar--pattern-color1: var(--rh-theme--color--ui-accent, #cce6ff);\n  --rh-avatar--pattern-color2: var(--rh-theme--color--ui-accent--hover, #cce6ff);\n  --rh-avatar--text-color: var(--rh-theme--color--text--on-dark, #333);\n  --rh-avatar--font-size: var(--rh-theme--font-size--heading--alpha, 1em);\n  --rh-avatar--border-radius: 16px;\n  --rh-avatar--width: 128px;\n  display: block;\n  position: relative;\n  width: var(--rh-avatar--width);\n  height: var(--rh-avatar--width); }\n  :host canvas {\n    width: 100%;\n    height: 100%;\n    image-rendering: optimizeSpeed;\n    \n    image-rendering: -moz-crisp-edges;\n    \n    image-rendering: -webkit-optimize-contrast;\n    \n    image-rendering: -o-crisp-edges;\n    \n    image-rendering: pixelated;\n    \n    -ms-interpolation-mode: nearest-neighbor;\n     }\n  :host #initials {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: var(--rh-avatar--text-color);\n    font-size: calc(2 * var(--rh-avatar--font-size));\n    font-weight: bold;\n    text-shadow: 0px 1px 4px rgba(0, 0, 0, 0.3); }\n\n:host([shape=rounded]) img, :host([shape=rounded]) canvas {\n  border-radius: calc( var(--rh-avatar--width) / 8 + 1px); }\n\n:host([shape=circle]) img, :host([shape=circle]) canvas {\n  border-radius: 50%; }\n\n:host([src]) canvas {\n  display: none; }\n\n:host([src]) img {\n  display: block;\n  width: 100%;\n  height: 100%;\n  object-fit: cover; }\n\n:host(:not([src])) img {\n  display: none; }\n\n:host(:not([show-initials])) #initials {\n  display: none; }\n\n:host([hidden]) {\n  display: none; }\n</style>\n<div id=\"initials\"></div>\n<canvas></canvas>\n<img>`;\n  }\n\n  static get tag() {\n    return \"rh-avatar\";\n  }\n\n  get templateUrl() {\n    return \"rh-avatar.html\";\n  }\n\n  get styleUrl() {\n    return \"rh-avatar.scss\";\n  }\n\n  static get observedAttributes() {\n    return [\"name\", \"pattern\", \"src\", \"shape\"];\n  }\n\n  static get patterns() {\n    return {\n      triangles: \"triangles\",\n      squares: \"squares\"\n    };\n  }\n\n  get name() {\n    return this.getAttribute(\"name\");\n  }\n\n  set name(val) {\n    return this.setAttribute(\"name\", val);\n  }\n\n  get src() {\n    return this.getAttribute(\"src\");\n  }\n\n  set src(href) {\n    return this.setAttribute(\"src\", href);\n  }\n\n  get pattern() {\n    return this.getAttribute(\"pattern\") || RhAvatar.patterns.squares;\n  }\n\n  set pattern(name) {\n    if (!RhAvatar.patterns[name]) {\n      this.log(\n        `invalid pattern \"${name}\", valid patterns are: ${Object.values(\n          RhAvatar.patterns\n        )}`\n      );\n      return;\n    }\n    return this.setAttribute(\"pattern\", name);\n  }\n\n  constructor() {\n    super(RhAvatar);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._initCanvas();\n\n    this.dispatchEvent(\n      new CustomEvent(`${RhAvatar.tag}:connected`, {\n        bubbles: false\n      })\n    );\n  }\n\n  attributeChangedCallback(attr, oldValue, newValue) {\n    super.attributeChangedCallback(...arguments);\n\n    switch (attr) {\n      case \"name\":\n      case \"pattern\":\n        break;\n      case \"src\":\n        break;\n\n      default:\n    }\n\n    if (this.connected) {\n      this.update();\n    } else {\n      this.addEventListener(`${RhAvatar.tag}:connected`, () => this.update());\n    }\n  }\n\n  _initCanvas() {\n    this._canvas = this.shadowRoot.querySelector(\"canvas\");\n    const size = this.var(\"--rh-avatar--width\").replace(/px$/, \"\");\n    this._canvas.width = size;\n    this._canvas.height = size;\n\n    this._squareSize = this._canvas.width / 8;\n    this._triangleSize = this._canvas.width / 4;\n\n    this._ctx = this._canvas.getContext(\"2d\");\n  }\n\n  _findInitials(name) {\n    const nameArr = name.trim().split(/\\s+/);\n    const fi = nameArr[0][0];\n    const li = nameArr.length > 1 ? nameArr[nameArr.length - 1][0] : \"\";\n    return [fi, li];\n  }\n\n  _setInitials(initials) {\n    this.shadowRoot.querySelector(\"#initials\").textContent = initials.join(\"\");\n  }\n\n  _getColors() {\n    this._color1 = this.var(\"--rh-avatar--pattern-color1\");\n    this._color2 = this.var(\"--rh-avatar--pattern-color2\");\n  }\n\n  update() {\n    this._setInitials(this._findInitials(this.name));\n\n    // if we have a src element, update the img, otherwise update the random pattern\n    if (this.hasAttribute(\"src\")) {\n      this.shadowRoot.querySelector(\"img\").src = this.src;\n    } else {\n      const bitPattern = hash(this.name).toString(2);\n      const arrPattern = bitPattern.split(\"\").map(n => Number(n));\n\n      this._getColors();\n      this._clear();\n      this._drawBackground();\n      if (this.pattern === RhAvatar.patterns.squares) {\n        this._drawSquarePattern(arrPattern);\n      } else if (this.pattern === RhAvatar.patterns.triangles) {\n        this._drawTrianglePattern(arrPattern);\n      }\n      this._drawGradient();\n    }\n  }\n\n  _clear() {\n    this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n  }\n\n  _drawBackground() {\n    this._ctx.fillStyle = this._color1;\n    this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n  }\n\n  _drawSquarePattern(pattern) {\n    this._ctx.fillStyle = this._color2;\n    if (this._ctx) {\n      let i = pattern.length;\n      while (i--) {\n        if (pattern[i]) {\n          this._drawMirroredSquare(i % 4, Math.floor(i / 4));\n        }\n      }\n    }\n  }\n\n  /**\n   * Draw a square at the given position, mirrored onto both the left and right half of the canvas.\n   */\n  _drawMirroredSquare(x, y) {\n    if (this._ctx) {\n      this._drawSquare(x, y);\n      this._drawSquare(7 - x, y);\n    }\n  }\n\n  _drawSquare(x, y) {\n    this._ctx.fillRect(\n      this._squareSize * x,\n      this._squareSize * y,\n      this._squareSize,\n      this._squareSize\n    );\n  }\n\n  _drawTrianglePattern(pattern) {\n    this._ctx.fillStyle = this._color2;\n    if (this._ctx) {\n      let i = pattern.length;\n      while (i--) {\n        if (pattern[i]) {\n          const x = Math.floor(i / 2) % 2;\n          const y = Math.floor(i / 4);\n          const alt = i % 4;\n\n          const p1 = [x, y];\n          const p2 = [x, y];\n          const p3 = [x, y];\n\n          switch (alt) {\n            case 0:\n              p2[1]++;\n              p3[0]++;\n              p3[1]++;\n              break;\n            case 1:\n              p2[0]++;\n              p3[0]++;\n              p3[1]++;\n              break;\n            case 2:\n              p2[0]++;\n              p3[1]++;\n              break;\n            case 3:\n              p1[0]++;\n              p2[0]++;\n              p2[1]++;\n              p3[1]++;\n              break;\n          }\n\n          this._drawMirroredTriangle(p1, p2, p3);\n        }\n      }\n    }\n  }\n\n  /**\n   * Draw a square at the given position in the top-left quadrant of the\n   * canvas, and mirrored to the other three quadrants.\n   */\n  _drawMirroredTriangle(p1, p2, p3) {\n    if (this._ctx) {\n      this._drawTriangle(p1, p2, p3);\n      this._drawTriangle(\n        [4 - p1[0], p1[1]],\n        [4 - p2[0], p2[1]],\n        [4 - p3[0], p3[1]]\n      );\n    }\n  }\n\n  _drawTriangle(p1, p2, p3) {\n    this._ctx.beginPath();\n    this._ctx.moveTo(...p1.map(c => c * this._triangleSize));\n    this._ctx.lineTo(...p2.map(c => c * this._triangleSize));\n    this._ctx.lineTo(...p3.map(c => c * this._triangleSize));\n    this._ctx.closePath();\n    this._ctx.fill();\n    this._ctx.fill();\n  }\n\n  _drawGradient() {\n    const gradient = this._ctx.createLinearGradient(\n      0,\n      this._canvas.height,\n      this._canvas.width,\n      0\n    );\n    let gradientColor1 = `${this._color2}`;\n    let gradientColor2 = `${this._color2}`;\n    if (/^#[A-f0-9]{3}$/.test(this._color2)) {\n      // color is of the form \"#fff\"\n      gradientColor1 += \"c\";\n      gradientColor2 += \"0\";\n    } else if (/^#[A-f0-9]{6}$/.test(this._color2)) {\n      // color is of the form \"#ffffff\"\n      gradientColor1 += \"cc\";\n      gradientColor2 += \"00\";\n    }\n    gradient.addColorStop(0, gradientColor1);\n    gradient.addColorStop(1, gradientColor2);\n    gradient.addColorStop(1, gradientColor1);\n    this._ctx.fillStyle = gradient;\n    this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n  }\n}\n\nRHElement.create(RhAvatar);\n\nexport default RhAvatar;\n"],"names":["hash","str","i","length","charCodeAt","RhAvatar","getAttribute","val","setAttribute","href","patterns","squares","name","log","Object","values","triangles","_initCanvas","dispatchEvent","CustomEvent","tag","bubbles","attr","oldValue","newValue","arguments","connected","update","addEventListener","_canvas","shadowRoot","querySelector","size","var","replace","width","height","_squareSize","_triangleSize","_ctx","getContext","nameArr","trim","split","fi","li","initials","textContent","join","_color1","_color2","_setInitials","_findInitials","hasAttribute","src","bitPattern","toString","arrPattern","map","Number","n","_getColors","_clear","_drawBackground","pattern","_drawSquarePattern","_drawTrianglePattern","_drawGradient","clearRect","fillStyle","fillRect","_drawMirroredSquare","Math","floor","x","y","_drawSquare","alt","p1","p2","p3","_drawMirroredTriangle","_drawTriangle","beginPath","moveTo","c","lineTo","closePath","fill","gradient","createLinearGradient","gradientColor1","gradientColor2","test","addColorStop","RHElement","create"],"mappings":";;;;;;;;EAAA;;;;;;;;EAQA,SAASA,IAAT,CAAcC,GAAd,EAAmB;EACjB,MAAID,OAAO,IAAX;EACA,MAAIE,IAAID,IAAIE,MAAZ;;EAEA,SAAOD,CAAP,EAAU;EACRF,WAAQA,OAAO,EAAR,GAAcC,IAAIG,UAAJ,CAAe,EAAEF,CAAjB,CAArB;EACD;;EAED,SAAOF,SAAS,CAAhB;EACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECjBD;;;;;;;;;;;;;;;;;;;;;;MAyBMK;;;;6BACO;EACT;EAiED;;;6BAMiB;EAChB,aAAO,gBAAP;EACD;;;6BAEc;EACb,aAAO,gBAAP;EACD;;;6BAaU;EACT,aAAO,KAAKC,YAAL,CAAkB,MAAlB,CAAP;EACD;2BAEQC,KAAK;EACZ,aAAO,KAAKC,YAAL,CAAkB,MAAlB,EAA0BD,GAA1B,CAAP;EACD;;;6BAES;EACR,aAAO,KAAKD,YAAL,CAAkB,KAAlB,CAAP;EACD;2BAEOG,MAAM;EACZ,aAAO,KAAKD,YAAL,CAAkB,KAAlB,EAAyBC,IAAzB,CAAP;EACD;;;6BAEa;EACZ,aAAO,KAAKH,YAAL,CAAkB,SAAlB,KAAgCD,SAASK,QAAT,CAAkBC,OAAzD;EACD;2BAEWC,MAAM;EAChB,UAAI,CAACP,SAASK,QAAT,CAAkBE,IAAlB,CAAL,EAA8B;EAC5B,aAAKC,GAAL,wBACsBD,IADtB,gCACoDE,OAAOC,MAAP,CAChDV,SAASK,QADuC,CADpD;EAKA;EACD;EACD,aAAO,KAAKF,YAAL,CAAkB,SAAlB,EAA6BI,IAA7B,CAAP;EACD;;;6BArDgB;EACf,aAAO,WAAP;EACD;;;6BAU+B;EAC9B,aAAO,CAAC,MAAD,EAAS,SAAT,EAAoB,KAApB,EAA2B,OAA3B,CAAP;EACD;;;6BAEqB;EACpB,aAAO;EACLI,mBAAW,WADN;EAELL,iBAAS;EAFJ,OAAP;EAID;;;EAkCD,sBAAc;EAAA;EAAA,8GACNN,QADM;EAEb;;;;0CAEmB;EAClB;;EAEA,WAAKY,WAAL;;EAEA,WAAKC,aAAL,CACE,IAAIC,WAAJ,CAAmBd,SAASe,GAA5B,iBAA6C;EAC3CC,iBAAS;EADkC,OAA7C,CADF;EAKD;;;+CAEwBC,MAAMC,UAAUC,UAAU;EAAA;;EACjD,mIAAkCC,SAAlC;;EAYA,UAAI,KAAKC,SAAT,EAAoB;EAClB,aAAKC,MAAL;EACD,OAFD,MAEO;EACL,aAAKC,gBAAL,CAAyBvB,SAASe,GAAlC,iBAAmD;EAAA,iBAAM,OAAKO,MAAL,EAAN;EAAA,SAAnD;EACD;EACF;;;oCAEa;EACZ,WAAKE,OAAL,GAAe,KAAKC,UAAL,CAAgBC,aAAhB,CAA8B,QAA9B,CAAf;EACA,UAAMC,OAAO,KAAKC,GAAL,CAAS,oBAAT,EAA+BC,OAA/B,CAAuC,KAAvC,EAA8C,EAA9C,CAAb;EACA,WAAKL,OAAL,CAAaM,KAAb,GAAqBH,IAArB;EACA,WAAKH,OAAL,CAAaO,MAAb,GAAsBJ,IAAtB;;EAEA,WAAKK,WAAL,GAAmB,KAAKR,OAAL,CAAaM,KAAb,GAAqB,CAAxC;EACA,WAAKG,aAAL,GAAqB,KAAKT,OAAL,CAAaM,KAAb,GAAqB,CAA1C;;EAEA,WAAKI,IAAL,GAAY,KAAKV,OAAL,CAAaW,UAAb,CAAwB,IAAxB,CAAZ;EACD;;;oCAEa5B,MAAM;EAClB,UAAM6B,UAAU7B,KAAK8B,IAAL,GAAYC,KAAZ,CAAkB,KAAlB,CAAhB;EACA,UAAMC,KAAKH,QAAQ,CAAR,EAAW,CAAX,CAAX;EACA,UAAMI,KAAKJ,QAAQtC,MAAR,GAAiB,CAAjB,GAAqBsC,QAAQA,QAAQtC,MAAR,GAAiB,CAAzB,EAA4B,CAA5B,CAArB,GAAsD,EAAjE;EACA,aAAO,CAACyC,EAAD,EAAKC,EAAL,CAAP;EACD;;;mCAEYC,UAAU;EACrB,WAAKhB,UAAL,CAAgBC,aAAhB,CAA8B,WAA9B,EAA2CgB,WAA3C,GAAyDD,SAASE,IAAT,CAAc,EAAd,CAAzD;EACD;;;mCAEY;EACX,WAAKC,OAAL,GAAe,KAAKhB,GAAL,CAAS,6BAAT,CAAf;EACA,WAAKiB,OAAL,GAAe,KAAKjB,GAAL,CAAS,6BAAT,CAAf;EACD;;;+BAEQ;EACP,WAAKkB,YAAL,CAAkB,KAAKC,aAAL,CAAmB,KAAKxC,IAAxB,CAAlB;;EAEA;EACA,UAAI,KAAKyC,YAAL,CAAkB,KAAlB,CAAJ,EAA8B;EAC5B,aAAKvB,UAAL,CAAgBC,aAAhB,CAA8B,KAA9B,EAAqCuB,GAArC,GAA2C,KAAKA,GAAhD;EACD,OAFD,MAEO;EACL,YAAMC,aAAavD,KAAK,KAAKY,IAAV,EAAgB4C,QAAhB,CAAyB,CAAzB,CAAnB;EACA,YAAMC,aAAaF,WAAWZ,KAAX,CAAiB,EAAjB,EAAqBe,GAArB,CAAyB;EAAA,iBAAKC,OAAOC,CAAP,CAAL;EAAA,SAAzB,CAAnB;;EAEA,aAAKC,UAAL;EACA,aAAKC,MAAL;EACA,aAAKC,eAAL;EACA,YAAI,KAAKC,OAAL,KAAiB3D,SAASK,QAAT,CAAkBC,OAAvC,EAAgD;EAC9C,eAAKsD,kBAAL,CAAwBR,UAAxB;EACD,SAFD,MAEO,IAAI,KAAKO,OAAL,KAAiB3D,SAASK,QAAT,CAAkBM,SAAvC,EAAkD;EACvD,eAAKkD,oBAAL,CAA0BT,UAA1B;EACD;EACD,aAAKU,aAAL;EACD;EACF;;;+BAEQ;EACP,WAAK5B,IAAL,CAAU6B,SAAV,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,KAAKvC,OAAL,CAAaM,KAAvC,EAA8C,KAAKN,OAAL,CAAaO,MAA3D;EACD;;;wCAEiB;EAChB,WAAKG,IAAL,CAAU8B,SAAV,GAAsB,KAAKpB,OAA3B;EACA,WAAKV,IAAL,CAAU+B,QAAV,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKzC,OAAL,CAAaM,KAAtC,EAA6C,KAAKN,OAAL,CAAaO,MAA1D;EACD;;;yCAEkB4B,SAAS;EAC1B,WAAKzB,IAAL,CAAU8B,SAAV,GAAsB,KAAKnB,OAA3B;EACA,UAAI,KAAKX,IAAT,EAAe;EACb,YAAIrC,IAAI8D,QAAQ7D,MAAhB;EACA,eAAOD,GAAP,EAAY;EACV,cAAI8D,QAAQ9D,CAAR,CAAJ,EAAgB;EACd,iBAAKqE,mBAAL,CAAyBrE,IAAI,CAA7B,EAAgCsE,KAAKC,KAAL,CAAWvE,IAAI,CAAf,CAAhC;EACD;EACF;EACF;EACF;;EAED;;;;;;0CAGoBwE,GAAGC,GAAG;EACxB,UAAI,KAAKpC,IAAT,EAAe;EACb,aAAKqC,WAAL,CAAiBF,CAAjB,EAAoBC,CAApB;EACA,aAAKC,WAAL,CAAiB,IAAIF,CAArB,EAAwBC,CAAxB;EACD;EACF;;;kCAEWD,GAAGC,GAAG;EAChB,WAAKpC,IAAL,CAAU+B,QAAV,CACE,KAAKjC,WAAL,GAAmBqC,CADrB,EAEE,KAAKrC,WAAL,GAAmBsC,CAFrB,EAGE,KAAKtC,WAHP,EAIE,KAAKA,WAJP;EAMD;;;2CAEoB2B,SAAS;EAC5B,WAAKzB,IAAL,CAAU8B,SAAV,GAAsB,KAAKnB,OAA3B;EACA,UAAI,KAAKX,IAAT,EAAe;EACb,YAAIrC,IAAI8D,QAAQ7D,MAAhB;EACA,eAAOD,GAAP,EAAY;EACV,cAAI8D,QAAQ9D,CAAR,CAAJ,EAAgB;EACd,gBAAMwE,IAAIF,KAAKC,KAAL,CAAWvE,IAAI,CAAf,IAAoB,CAA9B;EACA,gBAAMyE,IAAIH,KAAKC,KAAL,CAAWvE,IAAI,CAAf,CAAV;EACA,gBAAM2E,MAAM3E,IAAI,CAAhB;;EAEA,gBAAM4E,KAAK,CAACJ,CAAD,EAAIC,CAAJ,CAAX;EACA,gBAAMI,KAAK,CAACL,CAAD,EAAIC,CAAJ,CAAX;EACA,gBAAMK,KAAK,CAACN,CAAD,EAAIC,CAAJ,CAAX;;EAEA,oBAAQE,GAAR;EACE,mBAAK,CAAL;EACEE,mBAAG,CAAH;EACAC,mBAAG,CAAH;EACAA,mBAAG,CAAH;EACA;EACF,mBAAK,CAAL;EACED,mBAAG,CAAH;EACAC,mBAAG,CAAH;EACAA,mBAAG,CAAH;EACA;EACF,mBAAK,CAAL;EACED,mBAAG,CAAH;EACAC,mBAAG,CAAH;EACA;EACF,mBAAK,CAAL;EACEF,mBAAG,CAAH;EACAC,mBAAG,CAAH;EACAA,mBAAG,CAAH;EACAC,mBAAG,CAAH;EACA;EApBJ;;EAuBA,iBAAKC,qBAAL,CAA2BH,EAA3B,EAA+BC,EAA/B,EAAmCC,EAAnC;EACD;EACF;EACF;EACF;;EAED;;;;;;;4CAIsBF,IAAIC,IAAIC,IAAI;EAChC,UAAI,KAAKzC,IAAT,EAAe;EACb,aAAK2C,aAAL,CAAmBJ,EAAnB,EAAuBC,EAAvB,EAA2BC,EAA3B;EACA,aAAKE,aAAL,CACE,CAAC,IAAIJ,GAAG,CAAH,CAAL,EAAYA,GAAG,CAAH,CAAZ,CADF,EAEE,CAAC,IAAIC,GAAG,CAAH,CAAL,EAAYA,GAAG,CAAH,CAAZ,CAFF,EAGE,CAAC,IAAIC,GAAG,CAAH,CAAL,EAAYA,GAAG,CAAH,CAAZ,CAHF;EAKD;EACF;;;oCAEaF,IAAIC,IAAIC,IAAI;EAAA;EAAA;EAAA;EAAA;;EACxB,WAAKzC,IAAL,CAAU4C,SAAV;EACA,mBAAK5C,IAAL,EAAU6C,MAAV,+BAAoBN,GAAGpB,GAAH,CAAO;EAAA,eAAK2B,IAAI,OAAK/C,aAAd;EAAA,OAAP,CAApB;EACA,oBAAKC,IAAL,EAAU+C,MAAV,gCAAoBP,GAAGrB,GAAH,CAAO;EAAA,eAAK2B,IAAI,OAAK/C,aAAd;EAAA,OAAP,CAApB;EACA,oBAAKC,IAAL,EAAU+C,MAAV,gCAAoBN,GAAGtB,GAAH,CAAO;EAAA,eAAK2B,IAAI,OAAK/C,aAAd;EAAA,OAAP,CAApB;EACA,WAAKC,IAAL,CAAUgD,SAAV;EACA,WAAKhD,IAAL,CAAUiD,IAAV;EACA,WAAKjD,IAAL,CAAUiD,IAAV;EACD;;;sCAEe;EACd,UAAMC,WAAW,KAAKlD,IAAL,CAAUmD,oBAAV,CACf,CADe,EAEf,KAAK7D,OAAL,CAAaO,MAFE,EAGf,KAAKP,OAAL,CAAaM,KAHE,EAIf,CAJe,CAAjB;EAMA,UAAIwD,sBAAoB,KAAKzC,OAA7B;EACA,UAAI0C,sBAAoB,KAAK1C,OAA7B;EACA,UAAI,iBAAiB2C,IAAjB,CAAsB,KAAK3C,OAA3B,CAAJ,EAAyC;EACvC;EACAyC,0BAAkB,GAAlB;EACAC,0BAAkB,GAAlB;EACD,OAJD,MAIO,IAAI,iBAAiBC,IAAjB,CAAsB,KAAK3C,OAA3B,CAAJ,EAAyC;EAC9C;EACAyC,0BAAkB,IAAlB;EACAC,0BAAkB,IAAlB;EACD;EACDH,eAASK,YAAT,CAAsB,CAAtB,EAAyBH,cAAzB;EACAF,eAASK,YAAT,CAAsB,CAAtB,EAAyBF,cAAzB;EACAH,eAASK,YAAT,CAAsB,CAAtB,EAAyBH,cAAzB;EACA,WAAKpD,IAAL,CAAU8B,SAAV,GAAsBoB,QAAtB;EACA,WAAKlD,IAAL,CAAU+B,QAAV,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKzC,OAAL,CAAaM,KAAtC,EAA6C,KAAKN,OAAL,CAAaO,MAA1D;EACD;;;IArVoB2D;;EAwVvBA,UAAUC,MAAV,CAAiB3F,QAAjB;;;;;;;;"}